(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function _c(i){const t=Object.create(null);for(const e of i.split(","))t[e]=1;return e=>e in t}const Yt={},On=[],Rs=()=>{},K_=()=>!1,ua=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),vc=i=>i.startsWith("onUpdate:"),Ce=Object.assign,yc=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},J_=Object.prototype.hasOwnProperty,Ft=(i,t)=>J_.call(i,t),dt=Array.isArray,En=i=>fa(i)==="[object Map]",md=i=>fa(i)==="[object Set]",_t=i=>typeof i=="function",le=i=>typeof i=="string",bi=i=>typeof i=="symbol",Kt=i=>i!==null&&typeof i=="object",_d=i=>(Kt(i)||_t(i))&&_t(i.then)&&_t(i.catch),vd=Object.prototype.toString,fa=i=>vd.call(i),Q_=i=>fa(i).slice(8,-1),yd=i=>fa(i)==="[object Object]",bc=i=>le(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,or=_c(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),da=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},Z_=/-(\w)/g,cs=da(i=>i.replace(Z_,(t,e)=>e?e.toUpperCase():"")),tv=/\B([A-Z])/g,Qi=da(i=>i.replace(tv,"-$1").toLowerCase()),ga=da(i=>i.charAt(0).toUpperCase()+i.slice(1)),dl=da(i=>i?`on${ga(i)}`:""),pi=(i,t)=>!Object.is(i,t),Lo=(i,...t)=>{for(let e=0;e<i.length;e++)i[e](...t)},bd=(i,t,e,s=!1)=>{Object.defineProperty(i,t,{configurable:!0,enumerable:!1,writable:s,value:e})},Wl=i=>{const t=parseFloat(i);return isNaN(t)?i:t};let Pu;const pa=()=>Pu||(Pu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xc(i){if(dt(i)){const t={};for(let e=0;e<i.length;e++){const s=i[e],n=le(s)?nv(s):xc(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(le(i)||Kt(i))return i}const ev=/;(?![^(]*\))/g,sv=/:([^]+)/,iv=/\/\*[^]*?\*\//g;function nv(i){const t={};return i.replace(iv,"").split(ev).forEach(e=>{if(e){const s=e.split(sv);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function ma(i){let t="";if(le(i))t=i;else if(dt(i))for(let e=0;e<i.length;e++){const s=ma(i[e]);s&&(t+=s+" ")}else if(Kt(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}const rv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ov=_c(rv);function xd(i){return!!i||i===""}const wd=i=>!!(i&&i.__v_isRef===!0),Hl=i=>le(i)?i:i==null?"":dt(i)||Kt(i)&&(i.toString===vd||!_t(i.toString))?wd(i)?Hl(i.value):JSON.stringify(i,Cd,2):String(i),Cd=(i,t)=>wd(t)?Cd(i,t.value):En(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,n],r)=>(e[gl(s,r)+" =>"]=n,e),{})}:md(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>gl(e))}:bi(t)?gl(t):Kt(t)&&!dt(t)&&!yd(t)?String(t):t,gl=(i,t="")=>{var e;return bi(i)?`Symbol(${(e=i.description)!=null?e:t})`:i};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pe;class Sd{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pe,!t&&Pe&&(this.index=(Pe.scopes||(Pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Pe;try{return Pe=this,t()}finally{Pe=e}}}on(){Pe=this}off(){Pe=this.parent}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Td(i){return new Sd(i)}function Od(){return Pe}function av(i,t=!1){Pe&&Pe.cleanups.push(i)}let Ut;const pl=new WeakSet;class Ed{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pe&&Pe.active&&Pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pl.has(this)&&(pl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Dd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ju(this),kd(this);const t=Ut,e=xs;Ut=this,xs=!0;try{return this.fn()}finally{Md(this),Ut=t,xs=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Sc(t);this.deps=this.depsTail=void 0,ju(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vl(this)&&this.run()}get dirty(){return Vl(this)}}let Ad=0,ar,lr;function Dd(i,t=!1){if(i.flags|=8,t){i.next=lr,lr=i;return}i.next=ar,ar=i}function wc(){Ad++}function Cc(){if(--Ad>0)return;if(lr){let t=lr;for(lr=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let i;for(;ar;){let t=ar;for(ar=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){i||(i=s)}t=e}}if(i)throw i}function kd(i){for(let t=i.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Md(i){let t,e=i.depsTail,s=e;for(;s;){const n=s.prevDep;s.version===-1?(s===e&&(e=n),Sc(s),lv(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}i.deps=t,i.depsTail=e}function Vl(i){for(let t=i.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Pd(t.dep.computed)||t.dep.version!==t.version))return!0;return!!i._dirty}function Pd(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===br))return;i.globalVersion=br;const t=i.dep;if(i.flags|=2,t.version>0&&!i.isSSR&&i.deps&&!Vl(i)){i.flags&=-3;return}const e=Ut,s=xs;Ut=i,xs=!0;try{kd(i);const n=i.fn(i._value);(t.version===0||pi(n,i._value))&&(i._value=n,t.version++)}catch(n){throw t.version++,n}finally{Ut=e,xs=s,Md(i),i.flags&=-3}}function Sc(i,t=!1){const{dep:e,prevSub:s,nextSub:n}=i;if(s&&(s.nextSub=n,i.prevSub=void 0),n&&(n.prevSub=s,i.nextSub=void 0),e.subs===i&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)Sc(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function lv(i){const{prevDep:t,nextDep:e}=i;t&&(t.nextDep=e,i.prevDep=void 0),e&&(e.prevDep=t,i.nextDep=void 0)}let xs=!0;const jd=[];function xi(){jd.push(xs),xs=!1}function wi(){const i=jd.pop();xs=i===void 0?!0:i}function ju(i){const{cleanup:t}=i;if(i.cleanup=void 0,t){const e=Ut;Ut=void 0;try{t()}finally{Ut=e}}}let br=0;class cv{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Tc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Ut||!xs||Ut===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Ut)e=this.activeLink=new cv(Ut,this),Ut.deps?(e.prevDep=Ut.depsTail,Ut.depsTail.nextDep=e,Ut.depsTail=e):Ut.deps=Ut.depsTail=e,Fd(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=Ut.depsTail,e.nextDep=void 0,Ut.depsTail.nextDep=e,Ut.depsTail=e,Ut.deps===e&&(Ut.deps=s)}return e}trigger(t){this.version++,br++,this.notify(t)}notify(t){wc();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Cc()}}}function Fd(i){if(i.dep.sc++,i.sub.flags&4){const t=i.dep.computed;if(t&&!i.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Fd(s)}const e=i.dep.subs;e!==i&&(i.prevSub=e,e&&(e.nextSub=i)),i.dep.subs=i}}const Uo=new WeakMap,Ui=Symbol(""),Xl=Symbol(""),xr=Symbol("");function be(i,t,e){if(xs&&Ut){let s=Uo.get(i);s||Uo.set(i,s=new Map);let n=s.get(e);n||(s.set(e,n=new Tc),n.map=s,n.key=e),n.track()}}function Gs(i,t,e,s,n,r){const o=Uo.get(i);if(!o){br++;return}const a=l=>{l&&l.trigger()};if(wc(),t==="clear")o.forEach(a);else{const l=dt(i),h=l&&bc(e);if(l&&e==="length"){const u=Number(s);o.forEach((f,g)=>{(g==="length"||g===xr||!bi(g)&&g>=u)&&a(f)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),h&&a(o.get(xr)),t){case"add":l?h&&a(o.get("length")):(a(o.get(Ui)),En(i)&&a(o.get(Xl)));break;case"delete":l||(a(o.get(Ui)),En(i)&&a(o.get(Xl)));break;case"set":En(i)&&a(o.get(Ui));break}}Cc()}function hv(i,t){const e=Uo.get(i);return e&&e.get(t)}function pn(i){const t=Dt(i);return t===i?t:(be(t,"iterate",xr),ls(i)?t:t.map(xe))}function _a(i){return be(i=Dt(i),"iterate",xr),i}const uv={__proto__:null,[Symbol.iterator](){return ml(this,Symbol.iterator,xe)},concat(...i){return pn(this).concat(...i.map(t=>dt(t)?pn(t):t))},entries(){return ml(this,"entries",i=>(i[1]=xe(i[1]),i))},every(i,t){return Vs(this,"every",i,t,void 0,arguments)},filter(i,t){return Vs(this,"filter",i,t,e=>e.map(xe),arguments)},find(i,t){return Vs(this,"find",i,t,xe,arguments)},findIndex(i,t){return Vs(this,"findIndex",i,t,void 0,arguments)},findLast(i,t){return Vs(this,"findLast",i,t,xe,arguments)},findLastIndex(i,t){return Vs(this,"findLastIndex",i,t,void 0,arguments)},forEach(i,t){return Vs(this,"forEach",i,t,void 0,arguments)},includes(...i){return _l(this,"includes",i)},indexOf(...i){return _l(this,"indexOf",i)},join(i){return pn(this).join(i)},lastIndexOf(...i){return _l(this,"lastIndexOf",i)},map(i,t){return Vs(this,"map",i,t,void 0,arguments)},pop(){return Zn(this,"pop")},push(...i){return Zn(this,"push",i)},reduce(i,...t){return Fu(this,"reduce",i,t)},reduceRight(i,...t){return Fu(this,"reduceRight",i,t)},shift(){return Zn(this,"shift")},some(i,t){return Vs(this,"some",i,t,void 0,arguments)},splice(...i){return Zn(this,"splice",i)},toReversed(){return pn(this).toReversed()},toSorted(i){return pn(this).toSorted(i)},toSpliced(...i){return pn(this).toSpliced(...i)},unshift(...i){return Zn(this,"unshift",i)},values(){return ml(this,"values",xe)}};function ml(i,t,e){const s=_a(i),n=s[t]();return s!==i&&!ls(i)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=e(r.value)),r}),n}const fv=Array.prototype;function Vs(i,t,e,s,n,r){const o=_a(i),a=o!==i&&!ls(i),l=o[t];if(l!==fv[t]){const f=l.apply(i,r);return a?xe(f):f}let h=e;o!==i&&(a?h=function(f,g){return e.call(this,xe(f),g,i)}:e.length>2&&(h=function(f,g){return e.call(this,f,g,i)}));const u=l.call(o,h,s);return a&&n?n(u):u}function Fu(i,t,e,s){const n=_a(i);let r=e;return n!==i&&(ls(i)?e.length>3&&(r=function(o,a,l){return e.call(this,o,a,l,i)}):r=function(o,a,l){return e.call(this,o,xe(a),l,i)}),n[t](r,...s)}function _l(i,t,e){const s=Dt(i);be(s,"iterate",xr);const n=s[t](...e);return(n===-1||n===!1)&&Ac(e[0])?(e[0]=Dt(e[0]),s[t](...e)):n}function Zn(i,t,e=[]){xi(),wc();const s=Dt(i)[t].apply(i,e);return Cc(),wi(),s}const dv=_c("__proto__,__v_isRef,__isVue"),Ld=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(bi));function gv(i){bi(i)||(i=String(i));const t=Dt(this);return be(t,"has",i),t.hasOwnProperty(i)}class Rd{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(n?r?Sv:Wd:r?Nd:Bd).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=dt(t);if(!n){let l;if(o&&(l=uv[e]))return l;if(e==="hasOwnProperty")return gv}const a=Reflect.get(t,e,oe(t)?t:s);return(bi(e)?Ld.has(e):dv(e))||(n||be(t,"get",e),r)?a:oe(a)?o&&bc(e)?a:a.value:Kt(a)?n?Vd(a):jr(a):a}}class Id extends Rd{constructor(t=!1){super(!1,t)}set(t,e,s,n){let r=t[e];if(!this._isShallow){const l=qi(r);if(!ls(s)&&!qi(s)&&(r=Dt(r),s=Dt(s)),!dt(t)&&oe(r)&&!oe(s))return l?!1:(r.value=s,!0)}const o=dt(t)&&bc(e)?Number(e)<t.length:Ft(t,e),a=Reflect.set(t,e,s,oe(t)?t:n);return t===Dt(n)&&(o?pi(s,r)&&Gs(t,"set",e,s):Gs(t,"add",e,s)),a}deleteProperty(t,e){const s=Ft(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&Gs(t,"delete",e,void 0),n}has(t,e){const s=Reflect.has(t,e);return(!bi(e)||!Ld.has(e))&&be(t,"has",e),s}ownKeys(t){return be(t,"iterate",dt(t)?"length":Ui),Reflect.ownKeys(t)}}class pv extends Rd{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const mv=new Id,_v=new pv,vv=new Id(!0);const Yl=i=>i,ao=i=>Reflect.getPrototypeOf(i);function yv(i,t,e){return function(...s){const n=this.__v_raw,r=Dt(n),o=En(r),a=i==="entries"||i===Symbol.iterator&&o,l=i==="keys"&&o,h=n[i](...s),u=e?Yl:t?zl:xe;return!t&&be(r,"iterate",l?Xl:Ui),{next(){const{value:f,done:g}=h.next();return g?{value:f,done:g}:{value:a?[u(f[0]),u(f[1])]:u(f),done:g}},[Symbol.iterator](){return this}}}}function lo(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function bv(i,t){const e={get(n){const r=this.__v_raw,o=Dt(r),a=Dt(n);i||(pi(n,a)&&be(o,"get",n),be(o,"get",a));const{has:l}=ao(o),h=t?Yl:i?zl:xe;if(l.call(o,n))return h(r.get(n));if(l.call(o,a))return h(r.get(a));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!i&&be(Dt(n),"iterate",Ui),Reflect.get(n,"size",n)},has(n){const r=this.__v_raw,o=Dt(r),a=Dt(n);return i||(pi(n,a)&&be(o,"has",n),be(o,"has",a)),n===a?r.has(n):r.has(n)||r.has(a)},forEach(n,r){const o=this,a=o.__v_raw,l=Dt(a),h=t?Yl:i?zl:xe;return!i&&be(l,"iterate",Ui),a.forEach((u,f)=>n.call(r,h(u),h(f),o))}};return Ce(e,i?{add:lo("add"),set:lo("set"),delete:lo("delete"),clear:lo("clear")}:{add(n){!t&&!ls(n)&&!qi(n)&&(n=Dt(n));const r=Dt(this);return ao(r).has.call(r,n)||(r.add(n),Gs(r,"add",n,n)),this},set(n,r){!t&&!ls(r)&&!qi(r)&&(r=Dt(r));const o=Dt(this),{has:a,get:l}=ao(o);let h=a.call(o,n);h||(n=Dt(n),h=a.call(o,n));const u=l.call(o,n);return o.set(n,r),h?pi(r,u)&&Gs(o,"set",n,r):Gs(o,"add",n,r),this},delete(n){const r=Dt(this),{has:o,get:a}=ao(r);let l=o.call(r,n);l||(n=Dt(n),l=o.call(r,n)),a&&a.call(r,n);const h=r.delete(n);return l&&Gs(r,"delete",n,void 0),h},clear(){const n=Dt(this),r=n.size!==0,o=n.clear();return r&&Gs(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=yv(n,i,t)}),e}function Oc(i,t){const e=bv(i,t);return(s,n,r)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?s:Reflect.get(Ft(e,n)&&n in s?e:s,n,r)}const xv={get:Oc(!1,!1)},wv={get:Oc(!1,!0)},Cv={get:Oc(!0,!1)};const Bd=new WeakMap,Nd=new WeakMap,Wd=new WeakMap,Sv=new WeakMap;function Tv(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ov(i){return i.__v_skip||!Object.isExtensible(i)?0:Tv(Q_(i))}function jr(i){return qi(i)?i:Ec(i,!1,mv,xv,Bd)}function Hd(i){return Ec(i,!1,vv,wv,Nd)}function Vd(i){return Ec(i,!0,_v,Cv,Wd)}function Ec(i,t,e,s,n){if(!Kt(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const r=n.get(i);if(r)return r;const o=Ov(i);if(o===0)return i;const a=new Proxy(i,o===2?s:e);return n.set(i,a),a}function mi(i){return qi(i)?mi(i.__v_raw):!!(i&&i.__v_isReactive)}function qi(i){return!!(i&&i.__v_isReadonly)}function ls(i){return!!(i&&i.__v_isShallow)}function Ac(i){return i?!!i.__v_raw:!1}function Dt(i){const t=i&&i.__v_raw;return t?Dt(t):i}function _i(i){return!Ft(i,"__v_skip")&&Object.isExtensible(i)&&bd(i,"__v_skip",!0),i}const xe=i=>Kt(i)?jr(i):i,zl=i=>Kt(i)?Vd(i):i;function oe(i){return i?i.__v_isRef===!0:!1}function Fr(i){return Xd(i,!1)}function Ev(i){return Xd(i,!0)}function Xd(i,t){return oe(i)?i:new Av(i,t)}class Av{constructor(t,e){this.dep=new Tc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Dt(t),this._value=e?t:xe(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||ls(t)||qi(t);t=s?t:Dt(t),pi(t,e)&&(this._rawValue=t,this._value=s?t:xe(t),this.dep.trigger())}}function Ke(i){return oe(i)?i.value:i}const Dv={get:(i,t,e)=>t==="__v_raw"?i:Ke(Reflect.get(i,t,e)),set:(i,t,e,s)=>{const n=i[t];return oe(n)&&!oe(e)?(n.value=e,!0):Reflect.set(i,t,e,s)}};function Yd(i){return mi(i)?i:new Proxy(i,Dv)}function kv(i){const t=dt(i)?new Array(i.length):{};for(const e in i)t[e]=Pv(i,e);return t}class Mv{constructor(t,e,s){this._object=t,this._key=e,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return hv(Dt(this._object),this._key)}}function Pv(i,t,e){const s=i[t];return oe(s)?s:new Mv(i,t,e)}class jv{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new Tc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=br-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ut!==this)return Dd(this,!0),!0}get value(){const t=this.dep.track();return Pd(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Fv(i,t,e=!1){let s,n;return _t(i)?s=i:(s=i.get,n=i.set),new jv(s,n,e)}const co={},Go=new WeakMap;let Ni;function Lv(i,t=!1,e=Ni){if(e){let s=Go.get(e);s||Go.set(e,s=[]),s.push(i)}}function Rv(i,t,e=Yt){const{immediate:s,deep:n,once:r,scheduler:o,augmentJob:a,call:l}=e,h=P=>n?P:ls(P)||n===!1||n===0?$s(P,1):$s(P);let u,f,g,m,v=!1,b=!1;if(oe(i)?(f=()=>i.value,v=ls(i)):mi(i)?(f=()=>h(i),v=!0):dt(i)?(b=!0,v=i.some(P=>mi(P)||ls(P)),f=()=>i.map(P=>{if(oe(P))return P.value;if(mi(P))return h(P);if(_t(P))return l?l(P,2):P()})):_t(i)?t?f=l?()=>l(i,2):i:f=()=>{if(g){xi();try{g()}finally{wi()}}const P=Ni;Ni=u;try{return l?l(i,3,[m]):i(m)}finally{Ni=P}}:f=Rs,t&&n){const P=f,V=n===!0?1/0:n;f=()=>$s(P(),V)}const C=Od(),O=()=>{u.stop(),C&&C.active&&yc(C.effects,u)};if(r&&t){const P=t;t=(...V)=>{P(...V),O()}}let D=b?new Array(i.length).fill(co):co;const L=P=>{if(!(!(u.flags&1)||!u.dirty&&!P))if(t){const V=u.run();if(n||v||(b?V.some((it,J)=>pi(it,D[J])):pi(V,D))){g&&g();const it=Ni;Ni=u;try{const J=[V,D===co?void 0:b&&D[0]===co?[]:D,m];l?l(t,3,J):t(...J),D=V}finally{Ni=it}}}else u.run()};return a&&a(L),u=new Ed(f),u.scheduler=o?()=>o(L,!1):L,m=P=>Lv(P,!1,u),g=u.onStop=()=>{const P=Go.get(u);if(P){if(l)l(P,4);else for(const V of P)V();Go.delete(u)}},t?s?L(!0):D=u.run():o?o(L.bind(null,!0),!0):u.run(),O.pause=u.pause.bind(u),O.resume=u.resume.bind(u),O.stop=O,O}function $s(i,t=1/0,e){if(t<=0||!Kt(i)||i.__v_skip||(e=e||new Set,e.has(i)))return i;if(e.add(i),t--,oe(i))$s(i.value,t,e);else if(dt(i))for(let s=0;s<i.length;s++)$s(i[s],t,e);else if(md(i)||En(i))i.forEach(s=>{$s(s,t,e)});else if(yd(i)){for(const s in i)$s(i[s],t,e);for(const s of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,s)&&$s(i[s],t,e)}return i}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Lr(i,t,e,s){try{return s?i(...s):i()}catch(n){va(n,t,e)}}function Is(i,t,e,s){if(_t(i)){const n=Lr(i,t,e,s);return n&&_d(n)&&n.catch(r=>{va(r,t,e)}),n}if(dt(i)){const n=[];for(let r=0;r<i.length;r++)n.push(Is(i[r],t,e,s));return n}}function va(i,t,e,s=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Yt;if(t){let a=t.parent;const l=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](i,l,h)===!1)return}a=a.parent}if(r){xi(),Lr(r,null,10,[i,l,h]),wi();return}}Iv(i,e,n,s,o)}function Iv(i,t,e,s=!0,n=!1){if(n)throw i;console.error(i)}const Fe=[];let Ms=-1;const An=[];let fi=null,yn=0;const zd=Promise.resolve();let $o=null;function Dc(i){const t=$o||zd;return i?t.then(this?i.bind(this):i):t}function Bv(i){let t=Ms+1,e=Fe.length;for(;t<e;){const s=t+e>>>1,n=Fe[s],r=wr(n);r<i||r===i&&n.flags&2?t=s+1:e=s}return t}function kc(i){if(!(i.flags&1)){const t=wr(i),e=Fe[Fe.length-1];!e||!(i.flags&2)&&t>=wr(e)?Fe.push(i):Fe.splice(Bv(t),0,i),i.flags|=1,Ud()}}function Ud(){$o||($o=zd.then($d))}function Nv(i){dt(i)?An.push(...i):fi&&i.id===-1?fi.splice(yn+1,0,i):i.flags&1||(An.push(i),i.flags|=1),Ud()}function Lu(i,t,e=Ms+1){for(;e<Fe.length;e++){const s=Fe[e];if(s&&s.flags&2){if(i&&s.id!==i.uid)continue;Fe.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Gd(i){if(An.length){const t=[...new Set(An)].sort((e,s)=>wr(e)-wr(s));if(An.length=0,fi){fi.push(...t);return}for(fi=t,yn=0;yn<fi.length;yn++){const e=fi[yn];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}fi=null,yn=0}}const wr=i=>i.id==null?i.flags&2?-1:1/0:i.id;function $d(i){try{for(Ms=0;Ms<Fe.length;Ms++){const t=Fe[Ms];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Lr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ms<Fe.length;Ms++){const t=Fe[Ms];t&&(t.flags&=-2)}Ms=-1,Fe.length=0,Gd(),$o=null,(Fe.length||An.length)&&$d()}}let Ne=null,qd=null;function qo(i){const t=Ne;return Ne=i,qd=i&&i.type.__scopeId||null,t}function Wv(i,t=Ne,e){if(!t||i._n)return i;const s=(...n)=>{s._d&&zu(-1);const r=qo(t);let o;try{o=i(...n)}finally{qo(r),s._d&&zu(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Dn(i,t){if(Ne===null)return i;const e=wa(Ne),s=i.dirs||(i.dirs=[]);for(let n=0;n<t.length;n++){let[r,o,a,l=Yt]=t[n];r&&(_t(r)&&(r={mounted:r,updated:r}),r.deep&&$s(o),s.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return i}function Ii(i,t,e,s){const n=i.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(xi(),Is(l,e,8,[i.el,a,i,t]),wi())}}const Hv=Symbol("_vte"),Vv=i=>i.__isTeleport;function Mc(i,t){i.shapeFlag&6&&i.component?(i.transition=t,Mc(i.component.subTree,t)):i.shapeFlag&128?(i.ssContent.transition=t.clone(i.ssContent),i.ssFallback.transition=t.clone(i.ssFallback)):i.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Kd(i,t){return _t(i)?Ce({name:i.name},t,{setup:i}):i}function Jd(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}function Ko(i,t,e,s,n=!1){if(dt(i)){i.forEach((v,b)=>Ko(v,t&&(dt(t)?t[b]:t),e,s,n));return}if(cr(s)&&!n){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ko(i,t,e,s.component.subTree);return}const r=s.shapeFlag&4?wa(s.component):s.el,o=n?null:r,{i:a,r:l}=i,h=t&&t.r,u=a.refs===Yt?a.refs={}:a.refs,f=a.setupState,g=Dt(f),m=f===Yt?()=>!1:v=>Ft(g,v);if(h!=null&&h!==l&&(le(h)?(u[h]=null,m(h)&&(f[h]=null)):oe(h)&&(h.value=null)),_t(l))Lr(l,a,12,[o,u]);else{const v=le(l),b=oe(l);if(v||b){const C=()=>{if(i.f){const O=v?m(l)?f[l]:u[l]:l.value;n?dt(O)&&yc(O,r):dt(O)?O.includes(r)||O.push(r):v?(u[l]=[r],m(l)&&(f[l]=u[l])):(l.value=[r],i.k&&(u[i.k]=l.value))}else v?(u[l]=o,m(l)&&(f[l]=o)):b&&(l.value=o,i.k&&(u[i.k]=o))};o?(C.id=-1,qe(C,e)):C()}}}pa().requestIdleCallback;pa().cancelIdleCallback;const cr=i=>!!i.type.__asyncLoader,Qd=i=>i.type.__isKeepAlive;function Xv(i,t){Zd(i,"a",t)}function Yv(i,t){Zd(i,"da",t)}function Zd(i,t,e=me){const s=i.__wdc||(i.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(ya(t,s,e),e){let n=e.parent;for(;n&&n.parent;)Qd(n.parent.vnode)&&zv(s,t,e,n),n=n.parent}}function zv(i,t,e,s){const n=ya(t,i,s,!0);Pc(()=>{yc(s[t],n)},e)}function ya(i,t,e=me,s=!1){if(e){const n=e[i]||(e[i]=[]),r=t.__weh||(t.__weh=(...o)=>{xi();const a=Rr(e),l=Is(t,e,i,o);return a(),wi(),l});return s?n.unshift(r):n.push(r),r}}const si=i=>(t,e=me)=>{(!Sr||i==="sp")&&ya(i,(...s)=>t(...s),e)},Uv=si("bm"),tg=si("m"),Gv=si("bu"),$v=si("u"),qv=si("bum"),Pc=si("um"),Kv=si("sp"),Jv=si("rtg"),Qv=si("rtc");function Zv(i,t=me){ya("ec",i,t)}const ty="components";function ey(i,t){return iy(ty,i,!0,t)||i}const sy=Symbol.for("v-ndc");function iy(i,t,e=!0,s=!1){const n=Ne||me;if(n){const r=n.type;{const a=Uy(r,!1);if(a&&(a===t||a===cs(t)||a===ga(cs(t))))return r}const o=Ru(n[i]||r[i],t)||Ru(n.appContext[i],t);return!o&&s?r:o}}function Ru(i,t){return i&&(i[t]||i[cs(t)]||i[ga(cs(t))])}function ny(i,t,e,s){let n;const r=e,o=dt(i);if(o||le(i)){const a=o&&mi(i);let l=!1;a&&(l=!ls(i),i=_a(i)),n=new Array(i.length);for(let h=0,u=i.length;h<u;h++)n[h]=t(l?xe(i[h]):i[h],h,void 0,r)}else if(typeof i=="number"){n=new Array(i);for(let a=0;a<i;a++)n[a]=t(a+1,a,void 0,r)}else if(Kt(i))if(i[Symbol.iterator])n=Array.from(i,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(i);n=new Array(a.length);for(let l=0,h=a.length;l<h;l++){const u=a[l];n[l]=t(i[u],u,l,r)}}else n=[];return n}const Ul=i=>i?xg(i)?wa(i):Ul(i.parent):null,hr=Ce(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Ul(i.parent),$root:i=>Ul(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>sg(i),$forceUpdate:i=>i.f||(i.f=()=>{kc(i.update)}),$nextTick:i=>i.n||(i.n=Dc.bind(i.proxy)),$watch:i=>Oy.bind(i)}),vl=(i,t)=>i!==Yt&&!i.__isScriptSetup&&Ft(i,t),ry={get({_:i},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:n,props:r,accessCache:o,type:a,appContext:l}=i;let h;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return s[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(vl(s,t))return o[t]=1,s[t];if(n!==Yt&&Ft(n,t))return o[t]=2,n[t];if((h=i.propsOptions[0])&&Ft(h,t))return o[t]=3,r[t];if(e!==Yt&&Ft(e,t))return o[t]=4,e[t];Gl&&(o[t]=0)}}const u=hr[t];let f,g;if(u)return t==="$attrs"&&be(i.attrs,"get",""),u(i);if((f=a.__cssModules)&&(f=f[t]))return f;if(e!==Yt&&Ft(e,t))return o[t]=4,e[t];if(g=l.config.globalProperties,Ft(g,t))return g[t]},set({_:i},t,e){const{data:s,setupState:n,ctx:r}=i;return vl(n,t)?(n[t]=e,!0):s!==Yt&&Ft(s,t)?(s[t]=e,!0):Ft(i.props,t)||t[0]==="$"&&t.slice(1)in i?!1:(r[t]=e,!0)},has({_:{data:i,setupState:t,accessCache:e,ctx:s,appContext:n,propsOptions:r}},o){let a;return!!e[o]||i!==Yt&&Ft(i,o)||vl(t,o)||(a=r[0])&&Ft(a,o)||Ft(s,o)||Ft(hr,o)||Ft(n.config.globalProperties,o)},defineProperty(i,t,e){return e.get!=null?i._.accessCache[t]=0:Ft(e,"value")&&this.set(i,t,e.value,null),Reflect.defineProperty(i,t,e)}};function Iu(i){return dt(i)?i.reduce((t,e)=>(t[e]=null,t),{}):i}let Gl=!0;function oy(i){const t=sg(i),e=i.proxy,s=i.ctx;Gl=!1,t.beforeCreate&&Bu(t.beforeCreate,i,"bc");const{data:n,computed:r,methods:o,watch:a,provide:l,inject:h,created:u,beforeMount:f,mounted:g,beforeUpdate:m,updated:v,activated:b,deactivated:C,beforeDestroy:O,beforeUnmount:D,destroyed:L,unmounted:P,render:V,renderTracked:it,renderTriggered:J,errorCaptured:H,serverPrefetch:Z,expose:lt,inheritAttrs:St,components:wt,directives:ut,filters:Et}=t;if(h&&ay(h,s,null),o)for(const nt in o){const ot=o[nt];_t(ot)&&(s[nt]=ot.bind(e))}if(n){const nt=n.call(e,e);Kt(nt)&&(i.data=jr(nt))}if(Gl=!0,r)for(const nt in r){const ot=r[nt],Qt=_t(ot)?ot.bind(e,e):_t(ot.get)?ot.get.bind(e,e):Rs,R=!_t(ot)&&_t(ot.set)?ot.set.bind(e):Rs,ce=Be({get:Qt,set:R});Object.defineProperty(s,nt,{enumerable:!0,configurable:!0,get:()=>ce.value,set:ee=>ce.value=ee})}if(a)for(const nt in a)eg(a[nt],s,e,nt);if(l){const nt=_t(l)?l.call(e):l;Reflect.ownKeys(nt).forEach(ot=>{ur(ot,nt[ot])})}u&&Bu(u,i,"c");function vt(nt,ot){dt(ot)?ot.forEach(Qt=>nt(Qt.bind(e))):ot&&nt(ot.bind(e))}if(vt(Uv,f),vt(tg,g),vt(Gv,m),vt($v,v),vt(Xv,b),vt(Yv,C),vt(Zv,H),vt(Qv,it),vt(Jv,J),vt(qv,D),vt(Pc,P),vt(Kv,Z),dt(lt))if(lt.length){const nt=i.exposed||(i.exposed={});lt.forEach(ot=>{Object.defineProperty(nt,ot,{get:()=>e[ot],set:Qt=>e[ot]=Qt})})}else i.exposed||(i.exposed={});V&&i.render===Rs&&(i.render=V),St!=null&&(i.inheritAttrs=St),wt&&(i.components=wt),ut&&(i.directives=ut),Z&&Jd(i)}function ay(i,t,e=Rs){dt(i)&&(i=$l(i));for(const s in i){const n=i[s];let r;Kt(n)?"default"in n?r=ws(n.from||s,n.default,!0):r=ws(n.from||s):r=ws(n),oe(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Bu(i,t,e){Is(dt(i)?i.map(s=>s.bind(t.proxy)):i.bind(t.proxy),t,e)}function eg(i,t,e,s){let n=s.includes(".")?mg(e,s):()=>e[s];if(le(i)){const r=t[i];_t(r)&&kn(n,r)}else if(_t(i))kn(n,i.bind(e));else if(Kt(i))if(dt(i))i.forEach(r=>eg(r,t,e,s));else{const r=_t(i.handler)?i.handler.bind(e):t[i.handler];_t(r)&&kn(n,r,i)}}function sg(i){const t=i.type,{mixins:e,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=i.appContext,a=r.get(t);let l;return a?l=a:!n.length&&!e&&!s?l=t:(l={},n.length&&n.forEach(h=>Jo(l,h,o,!0)),Jo(l,t,o)),Kt(t)&&r.set(t,l),l}function Jo(i,t,e,s=!1){const{mixins:n,extends:r}=t;r&&Jo(i,r,e,!0),n&&n.forEach(o=>Jo(i,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=ly[o]||e&&e[o];i[o]=a?a(i[o],t[o]):t[o]}return i}const ly={data:Nu,props:Wu,emits:Wu,methods:ir,computed:ir,beforeCreate:Me,created:Me,beforeMount:Me,mounted:Me,beforeUpdate:Me,updated:Me,beforeDestroy:Me,beforeUnmount:Me,destroyed:Me,unmounted:Me,activated:Me,deactivated:Me,errorCaptured:Me,serverPrefetch:Me,components:ir,directives:ir,watch:hy,provide:Nu,inject:cy};function Nu(i,t){return t?i?function(){return Ce(_t(i)?i.call(this,this):i,_t(t)?t.call(this,this):t)}:t:i}function cy(i,t){return ir($l(i),$l(t))}function $l(i){if(dt(i)){const t={};for(let e=0;e<i.length;e++)t[i[e]]=i[e];return t}return i}function Me(i,t){return i?[...new Set([].concat(i,t))]:t}function ir(i,t){return i?Ce(Object.create(null),i,t):t}function Wu(i,t){return i?dt(i)&&dt(t)?[...new Set([...i,...t])]:Ce(Object.create(null),Iu(i),Iu(t??{})):t}function hy(i,t){if(!i)return t;if(!t)return i;const e=Ce(Object.create(null),i);for(const s in t)e[s]=Me(i[s],t[s]);return e}function ig(){return{app:null,config:{isNativeTag:K_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uy=0;function fy(i,t){return function(s,n=null){_t(s)||(s=Ce({},s)),n!=null&&!Kt(n)&&(n=null);const r=ig(),o=new WeakSet,a=[];let l=!1;const h=r.app={_uid:uy++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:$y,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&_t(u.install)?(o.add(u),u.install(h,...f)):_t(u)&&(o.add(u),u(h,...f))),h},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),h},component(u,f){return f?(r.components[u]=f,h):r.components[u]},directive(u,f){return f?(r.directives[u]=f,h):r.directives[u]},mount(u,f,g){if(!l){const m=h._ceVNode||ge(s,n);return m.appContext=r,g===!0?g="svg":g===!1&&(g=void 0),i(m,u,g),l=!0,h._container=u,u.__vue_app__=h,wa(m.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Is(a,h._instance,16),i(null,h._container),delete h._container.__vue_app__)},provide(u,f){return r.provides[u]=f,h},runWithContext(u){const f=Gi;Gi=h;try{return u()}finally{Gi=f}}};return h}}let Gi=null;function ur(i,t){if(me){let e=me.provides;const s=me.parent&&me.parent.provides;s===e&&(e=me.provides=Object.create(s)),e[i]=t}}function ws(i,t,e=!1){const s=me||Ne;if(s||Gi){const n=Gi?Gi._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&i in n)return n[i];if(arguments.length>1)return e&&_t(t)?t.call(s&&s.proxy):t}}function dy(){return!!(me||Ne||Gi)}const ng={},rg=()=>Object.create(ng),og=i=>Object.getPrototypeOf(i)===ng;function gy(i,t,e,s=!1){const n={},r=rg();i.propsDefaults=Object.create(null),ag(i,t,n,r);for(const o in i.propsOptions[0])o in n||(n[o]=void 0);e?i.props=s?n:Hd(n):i.type.props?i.props=n:i.props=r,i.attrs=r}function py(i,t,e,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=i,a=Dt(n),[l]=i.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=i.vnode.dynamicProps;for(let f=0;f<u.length;f++){let g=u[f];if(ba(i.emitsOptions,g))continue;const m=t[g];if(l)if(Ft(r,g))m!==r[g]&&(r[g]=m,h=!0);else{const v=cs(g);n[v]=ql(l,a,v,m,i,!1)}else m!==r[g]&&(r[g]=m,h=!0)}}}else{ag(i,t,n,r)&&(h=!0);let u;for(const f in a)(!t||!Ft(t,f)&&((u=Qi(f))===f||!Ft(t,u)))&&(l?e&&(e[f]!==void 0||e[u]!==void 0)&&(n[f]=ql(l,a,f,void 0,i,!0)):delete n[f]);if(r!==a)for(const f in r)(!t||!Ft(t,f))&&(delete r[f],h=!0)}h&&Gs(i.attrs,"set","")}function ag(i,t,e,s){const[n,r]=i.propsOptions;let o=!1,a;if(t)for(let l in t){if(or(l))continue;const h=t[l];let u;n&&Ft(n,u=cs(l))?!r||!r.includes(u)?e[u]=h:(a||(a={}))[u]=h:ba(i.emitsOptions,l)||(!(l in s)||h!==s[l])&&(s[l]=h,o=!0)}if(r){const l=Dt(e),h=a||Yt;for(let u=0;u<r.length;u++){const f=r[u];e[f]=ql(n,l,f,h[f],i,!Ft(h,f))}}return o}function ql(i,t,e,s,n,r){const o=i[e];if(o!=null){const a=Ft(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&_t(l)){const{propsDefaults:h}=n;if(e in h)s=h[e];else{const u=Rr(n);s=h[e]=l.call(null,t),u()}}else s=l;n.ce&&n.ce._setProp(e,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Qi(e))&&(s=!0))}return s}const my=new WeakMap;function lg(i,t,e=!1){const s=e?my:t.propsCache,n=s.get(i);if(n)return n;const r=i.props,o={},a=[];let l=!1;if(!_t(i)){const u=f=>{l=!0;const[g,m]=lg(f,t,!0);Ce(o,g),m&&a.push(...m)};!e&&t.mixins.length&&t.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}if(!r&&!l)return Kt(i)&&s.set(i,On),On;if(dt(r))for(let u=0;u<r.length;u++){const f=cs(r[u]);Hu(f)&&(o[f]=Yt)}else if(r)for(const u in r){const f=cs(u);if(Hu(f)){const g=r[u],m=o[f]=dt(g)||_t(g)?{type:g}:Ce({},g),v=m.type;let b=!1,C=!0;if(dt(v))for(let O=0;O<v.length;++O){const D=v[O],L=_t(D)&&D.name;if(L==="Boolean"){b=!0;break}else L==="String"&&(C=!1)}else b=_t(v)&&v.name==="Boolean";m[0]=b,m[1]=C,(b||Ft(m,"default"))&&a.push(f)}}const h=[o,a];return Kt(i)&&s.set(i,h),h}function Hu(i){return i[0]!=="$"&&!or(i)}const cg=i=>i[0]==="_"||i==="$stable",jc=i=>dt(i)?i.map(Ps):[Ps(i)],_y=(i,t,e)=>{if(t._n)return t;const s=Wv((...n)=>jc(t(...n)),e);return s._c=!1,s},hg=(i,t,e)=>{const s=i._ctx;for(const n in i){if(cg(n))continue;const r=i[n];if(_t(r))t[n]=_y(n,r,s);else if(r!=null){const o=jc(r);t[n]=()=>o}}},ug=(i,t)=>{const e=jc(t);i.slots.default=()=>e},fg=(i,t,e)=>{for(const s in t)(e||s!=="_")&&(i[s]=t[s])},vy=(i,t,e)=>{const s=i.slots=rg();if(i.vnode.shapeFlag&32){const n=t._;n?(fg(s,t,e),e&&bd(s,"_",n,!0)):hg(t,s)}else t&&ug(i,t)},yy=(i,t,e)=>{const{vnode:s,slots:n}=i;let r=!0,o=Yt;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:fg(n,t,e):(r=!t.$stable,hg(t,n)),o=t}else t&&(ug(i,t),o={default:1});if(r)for(const a in n)!cg(a)&&o[a]==null&&delete n[a]},qe=jy;function by(i){return xy(i)}function xy(i,t){const e=pa();e.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:a,createComment:l,setText:h,setElementText:u,parentNode:f,nextSibling:g,setScopeId:m=Rs,insertStaticContent:v}=i,b=(y,x,A,I=null,B=null,N=null,$=void 0,G=null,Y=!!x.dynamicChildren)=>{if(y===x)return;y&&!tr(y,x)&&(I=F(y),ee(y,B,N,!0),y=null),x.patchFlag===-2&&(Y=!1,x.dynamicChildren=null);const{type:X,ref:ct,shapeFlag:K}=x;switch(X){case xa:C(y,x,A,I);break;case Ki:O(y,x,A,I);break;case Ro:y==null&&D(x,A,I,$);break;case _s:wt(y,x,A,I,B,N,$,G,Y);break;default:K&1?V(y,x,A,I,B,N,$,G,Y):K&6?ut(y,x,A,I,B,N,$,G,Y):(K&64||K&128)&&X.process(y,x,A,I,B,N,$,G,Y,Q)}ct!=null&&B&&Ko(ct,y&&y.ref,N,x||y,!x)},C=(y,x,A,I)=>{if(y==null)s(x.el=a(x.children),A,I);else{const B=x.el=y.el;x.children!==y.children&&h(B,x.children)}},O=(y,x,A,I)=>{y==null?s(x.el=l(x.children||""),A,I):x.el=y.el},D=(y,x,A,I)=>{[y.el,y.anchor]=v(y.children,x,A,I,y.el,y.anchor)},L=({el:y,anchor:x},A,I)=>{let B;for(;y&&y!==x;)B=g(y),s(y,A,I),y=B;s(x,A,I)},P=({el:y,anchor:x})=>{let A;for(;y&&y!==x;)A=g(y),n(y),y=A;n(x)},V=(y,x,A,I,B,N,$,G,Y)=>{x.type==="svg"?$="svg":x.type==="math"&&($="mathml"),y==null?it(x,A,I,B,N,$,G,Y):Z(y,x,B,N,$,G,Y)},it=(y,x,A,I,B,N,$,G)=>{let Y,X;const{props:ct,shapeFlag:K,transition:rt,dirs:at}=y;if(Y=y.el=o(y.type,N,ct&&ct.is,ct),K&8?u(Y,y.children):K&16&&H(y.children,Y,null,I,B,yl(y,N),$,G),at&&Ii(y,null,I,"created"),J(Y,y,y.scopeId,$,I),ct){for(const Wt in ct)Wt!=="value"&&!or(Wt)&&r(Y,Wt,null,ct[Wt],N,I);"value"in ct&&r(Y,"value",null,ct.value,N),(X=ct.onVnodeBeforeMount)&&ks(X,I,y)}at&&Ii(y,null,I,"beforeMount");const Tt=wy(B,rt);Tt&&rt.beforeEnter(Y),s(Y,x,A),((X=ct&&ct.onVnodeMounted)||Tt||at)&&qe(()=>{X&&ks(X,I,y),Tt&&rt.enter(Y),at&&Ii(y,null,I,"mounted")},B)},J=(y,x,A,I,B)=>{if(A&&m(y,A),I)for(let N=0;N<I.length;N++)m(y,I[N]);if(B){let N=B.subTree;if(x===N||vg(N.type)&&(N.ssContent===x||N.ssFallback===x)){const $=B.vnode;J(y,$,$.scopeId,$.slotScopeIds,B.parent)}}},H=(y,x,A,I,B,N,$,G,Y=0)=>{for(let X=Y;X<y.length;X++){const ct=y[X]=G?di(y[X]):Ps(y[X]);b(null,ct,x,A,I,B,N,$,G)}},Z=(y,x,A,I,B,N,$)=>{const G=x.el=y.el;let{patchFlag:Y,dynamicChildren:X,dirs:ct}=x;Y|=y.patchFlag&16;const K=y.props||Yt,rt=x.props||Yt;let at;if(A&&Bi(A,!1),(at=rt.onVnodeBeforeUpdate)&&ks(at,A,x,y),ct&&Ii(x,y,A,"beforeUpdate"),A&&Bi(A,!0),(K.innerHTML&&rt.innerHTML==null||K.textContent&&rt.textContent==null)&&u(G,""),X?lt(y.dynamicChildren,X,G,A,I,yl(x,B),N):$||ot(y,x,G,null,A,I,yl(x,B),N,!1),Y>0){if(Y&16)St(G,K,rt,A,B);else if(Y&2&&K.class!==rt.class&&r(G,"class",null,rt.class,B),Y&4&&r(G,"style",K.style,rt.style,B),Y&8){const Tt=x.dynamicProps;for(let Wt=0;Wt<Tt.length;Wt++){const kt=Tt[Wt],he=K[kt],se=rt[kt];(se!==he||kt==="value")&&r(G,kt,he,se,B,A)}}Y&1&&y.children!==x.children&&u(G,x.children)}else!$&&X==null&&St(G,K,rt,A,B);((at=rt.onVnodeUpdated)||ct)&&qe(()=>{at&&ks(at,A,x,y),ct&&Ii(x,y,A,"updated")},I)},lt=(y,x,A,I,B,N,$)=>{for(let G=0;G<x.length;G++){const Y=y[G],X=x[G],ct=Y.el&&(Y.type===_s||!tr(Y,X)||Y.shapeFlag&70)?f(Y.el):A;b(Y,X,ct,null,I,B,N,$,!0)}},St=(y,x,A,I,B)=>{if(x!==A){if(x!==Yt)for(const N in x)!or(N)&&!(N in A)&&r(y,N,x[N],null,B,I);for(const N in A){if(or(N))continue;const $=A[N],G=x[N];$!==G&&N!=="value"&&r(y,N,G,$,B,I)}"value"in A&&r(y,"value",x.value,A.value,B)}},wt=(y,x,A,I,B,N,$,G,Y)=>{const X=x.el=y?y.el:a(""),ct=x.anchor=y?y.anchor:a("");let{patchFlag:K,dynamicChildren:rt,slotScopeIds:at}=x;at&&(G=G?G.concat(at):at),y==null?(s(X,A,I),s(ct,A,I),H(x.children||[],A,ct,B,N,$,G,Y)):K>0&&K&64&&rt&&y.dynamicChildren?(lt(y.dynamicChildren,rt,A,B,N,$,G),(x.key!=null||B&&x===B.subTree)&&dg(y,x,!0)):ot(y,x,A,ct,B,N,$,G,Y)},ut=(y,x,A,I,B,N,$,G,Y)=>{x.slotScopeIds=G,y==null?x.shapeFlag&512?B.ctx.activate(x,A,I,$,Y):Et(x,A,I,B,N,$,Y):Gt(y,x,Y)},Et=(y,x,A,I,B,N,$)=>{const G=y.component=Hy(y,I,B);if(Qd(y)&&(G.ctx.renderer=Q),Vy(G,!1,$),G.asyncDep){if(B&&B.registerDep(G,vt,$),!y.el){const Y=G.subTree=ge(Ki);O(null,Y,x,A)}}else vt(G,y,x,A,B,N,$)},Gt=(y,x,A)=>{const I=x.component=y.component;if(My(y,x,A))if(I.asyncDep&&!I.asyncResolved){nt(I,x,A);return}else I.next=x,I.update();else x.el=y.el,I.vnode=x},vt=(y,x,A,I,B,N,$)=>{const G=()=>{if(y.isMounted){let{next:K,bu:rt,u:at,parent:Tt,vnode:Wt}=y;{const Te=gg(y);if(Te){K&&(K.el=Wt.el,nt(y,K,$)),Te.asyncDep.then(()=>{y.isUnmounted||G()});return}}let kt=K,he;Bi(y,!1),K?(K.el=Wt.el,nt(y,K,$)):K=Wt,rt&&Lo(rt),(he=K.props&&K.props.onVnodeBeforeUpdate)&&ks(he,Tt,K,Wt),Bi(y,!0);const se=Xu(y),pe=y.subTree;y.subTree=se,b(pe,se,f(pe.el),F(pe),y,B,N),K.el=se.el,kt===null&&Py(y,se.el),at&&qe(at,B),(he=K.props&&K.props.onVnodeUpdated)&&qe(()=>ks(he,Tt,K,Wt),B)}else{let K;const{el:rt,props:at}=x,{bm:Tt,m:Wt,parent:kt,root:he,type:se}=y,pe=cr(x);Bi(y,!1),Tt&&Lo(Tt),!pe&&(K=at&&at.onVnodeBeforeMount)&&ks(K,kt,x),Bi(y,!0);{he.ce&&he.ce._injectChildStyle(se);const Te=y.subTree=Xu(y);b(null,Te,A,I,y,B,N),x.el=Te.el}if(Wt&&qe(Wt,B),!pe&&(K=at&&at.onVnodeMounted)){const Te=x;qe(()=>ks(K,kt,Te),B)}(x.shapeFlag&256||kt&&cr(kt.vnode)&&kt.vnode.shapeFlag&256)&&y.a&&qe(y.a,B),y.isMounted=!0,x=A=I=null}};y.scope.on();const Y=y.effect=new Ed(G);y.scope.off();const X=y.update=Y.run.bind(Y),ct=y.job=Y.runIfDirty.bind(Y);ct.i=y,ct.id=y.uid,Y.scheduler=()=>kc(ct),Bi(y,!0),X()},nt=(y,x,A)=>{x.component=y;const I=y.vnode.props;y.vnode=x,y.next=null,py(y,x.props,I,A),yy(y,x.children,A),xi(),Lu(y),wi()},ot=(y,x,A,I,B,N,$,G,Y=!1)=>{const X=y&&y.children,ct=y?y.shapeFlag:0,K=x.children,{patchFlag:rt,shapeFlag:at}=x;if(rt>0){if(rt&128){R(X,K,A,I,B,N,$,G,Y);return}else if(rt&256){Qt(X,K,A,I,B,N,$,G,Y);return}}at&8?(ct&16&&At(X,B,N),K!==X&&u(A,K)):ct&16?at&16?R(X,K,A,I,B,N,$,G,Y):At(X,B,N,!0):(ct&8&&u(A,""),at&16&&H(K,A,I,B,N,$,G,Y))},Qt=(y,x,A,I,B,N,$,G,Y)=>{y=y||On,x=x||On;const X=y.length,ct=x.length,K=Math.min(X,ct);let rt;for(rt=0;rt<K;rt++){const at=x[rt]=Y?di(x[rt]):Ps(x[rt]);b(y[rt],at,A,null,B,N,$,G,Y)}X>ct?At(y,B,N,!0,!1,K):H(x,A,I,B,N,$,G,Y,K)},R=(y,x,A,I,B,N,$,G,Y)=>{let X=0;const ct=x.length;let K=y.length-1,rt=ct-1;for(;X<=K&&X<=rt;){const at=y[X],Tt=x[X]=Y?di(x[X]):Ps(x[X]);if(tr(at,Tt))b(at,Tt,A,null,B,N,$,G,Y);else break;X++}for(;X<=K&&X<=rt;){const at=y[K],Tt=x[rt]=Y?di(x[rt]):Ps(x[rt]);if(tr(at,Tt))b(at,Tt,A,null,B,N,$,G,Y);else break;K--,rt--}if(X>K){if(X<=rt){const at=rt+1,Tt=at<ct?x[at].el:I;for(;X<=rt;)b(null,x[X]=Y?di(x[X]):Ps(x[X]),A,Tt,B,N,$,G,Y),X++}}else if(X>rt)for(;X<=K;)ee(y[X],B,N,!0),X++;else{const at=X,Tt=X,Wt=new Map;for(X=Tt;X<=rt;X++){const Oe=x[X]=Y?di(x[X]):Ps(x[X]);Oe.key!=null&&Wt.set(Oe.key,X)}let kt,he=0;const se=rt-Tt+1;let pe=!1,Te=0;const Ti=new Array(se);for(X=0;X<se;X++)Ti[X]=0;for(X=at;X<=K;X++){const Oe=y[X];if(he>=se){ee(Oe,B,N,!0);continue}let Ze;if(Oe.key!=null)Ze=Wt.get(Oe.key);else for(kt=Tt;kt<=rt;kt++)if(Ti[kt-Tt]===0&&tr(Oe,x[kt])){Ze=kt;break}Ze===void 0?ee(Oe,B,N,!0):(Ti[Ze-Tt]=X+1,Ze>=Te?Te=Ze:pe=!0,b(Oe,x[Ze],A,null,B,N,$,G,Y),he++)}const tn=pe?Cy(Ti):On;for(kt=tn.length-1,X=se-1;X>=0;X--){const Oe=Tt+X,Ze=x[Oe],Vr=Oe+1<ct?x[Oe+1].el:I;Ti[X]===0?b(null,Ze,A,Vr,B,N,$,G,Y):pe&&(kt<0||X!==tn[kt]?ce(Ze,A,Vr,2):kt--)}}},ce=(y,x,A,I,B=null)=>{const{el:N,type:$,transition:G,children:Y,shapeFlag:X}=y;if(X&6){ce(y.component.subTree,x,A,I);return}if(X&128){y.suspense.move(x,A,I);return}if(X&64){$.move(y,x,A,Q);return}if($===_s){s(N,x,A);for(let K=0;K<Y.length;K++)ce(Y[K],x,A,I);s(y.anchor,x,A);return}if($===Ro){L(y,x,A);return}if(I!==2&&X&1&&G)if(I===0)G.beforeEnter(N),s(N,x,A),qe(()=>G.enter(N),B);else{const{leave:K,delayLeave:rt,afterLeave:at}=G,Tt=()=>s(N,x,A),Wt=()=>{K(N,()=>{Tt(),at&&at()})};rt?rt(N,Tt,Wt):Wt()}else s(N,x,A)},ee=(y,x,A,I=!1,B=!1)=>{const{type:N,props:$,ref:G,children:Y,dynamicChildren:X,shapeFlag:ct,patchFlag:K,dirs:rt,cacheIndex:at}=y;if(K===-2&&(B=!1),G!=null&&Ko(G,null,A,y,!0),at!=null&&(x.renderCache[at]=void 0),ct&256){x.ctx.deactivate(y);return}const Tt=ct&1&&rt,Wt=!cr(y);let kt;if(Wt&&(kt=$&&$.onVnodeBeforeUnmount)&&ks(kt,x,y),ct&6)Se(y.component,A,I);else{if(ct&128){y.suspense.unmount(A,I);return}Tt&&Ii(y,null,x,"beforeUnmount"),ct&64?y.type.remove(y,x,A,Q,I):X&&!X.hasOnce&&(N!==_s||K>0&&K&64)?At(X,x,A,!1,!0):(N===_s&&K&384||!B&&ct&16)&&At(Y,x,A),I&&ve(y)}(Wt&&(kt=$&&$.onVnodeUnmounted)||Tt)&&qe(()=>{kt&&ks(kt,x,y),Tt&&Ii(y,null,x,"unmounted")},A)},ve=y=>{const{type:x,el:A,anchor:I,transition:B}=y;if(x===_s){$t(A,I);return}if(x===Ro){P(y);return}const N=()=>{n(A),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(y.shapeFlag&1&&B&&!B.persisted){const{leave:$,delayLeave:G}=B,Y=()=>$(A,N);G?G(y.el,N,Y):Y()}else N()},$t=(y,x)=>{let A;for(;y!==x;)A=g(y),n(y),y=A;n(x)},Se=(y,x,A)=>{const{bum:I,scope:B,job:N,subTree:$,um:G,m:Y,a:X}=y;Vu(Y),Vu(X),I&&Lo(I),B.stop(),N&&(N.flags|=8,ee($,y,x,A)),G&&qe(G,x),qe(()=>{y.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},At=(y,x,A,I=!1,B=!1,N=0)=>{for(let $=N;$<y.length;$++)ee(y[$],x,A,I,B)},F=y=>{if(y.shapeFlag&6)return F(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const x=g(y.anchor||y.el),A=x&&x[Hv];return A?g(A):x};let j=!1;const U=(y,x,A)=>{y==null?x._vnode&&ee(x._vnode,null,null,!0):b(x._vnode||null,y,x,null,null,null,A),x._vnode=y,j||(j=!0,Lu(),Gd(),j=!1)},Q={p:b,um:ee,m:ce,r:ve,mt:Et,mc:H,pc:ot,pbc:lt,n:F,o:i};return{render:U,hydrate:void 0,createApp:fy(U)}}function yl({type:i,props:t},e){return e==="svg"&&i==="foreignObject"||e==="mathml"&&i==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Bi({effect:i,job:t},e){e?(i.flags|=32,t.flags|=4):(i.flags&=-33,t.flags&=-5)}function wy(i,t){return(!i||i&&!i.pendingBranch)&&t&&!t.persisted}function dg(i,t,e=!1){const s=i.children,n=t.children;if(dt(s)&&dt(n))for(let r=0;r<s.length;r++){const o=s[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=di(n[r]),a.el=o.el),!e&&a.patchFlag!==-2&&dg(o,a)),a.type===xa&&(a.el=o.el)}}function Cy(i){const t=i.slice(),e=[0];let s,n,r,o,a;const l=i.length;for(s=0;s<l;s++){const h=i[s];if(h!==0){if(n=e[e.length-1],i[n]<h){t[s]=n,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,i[e[a]]<h?r=a+1:o=a;h<i[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function gg(i){const t=i.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:gg(t)}function Vu(i){if(i)for(let t=0;t<i.length;t++)i[t].flags|=8}const Sy=Symbol.for("v-scx"),Ty=()=>ws(Sy);function kn(i,t,e){return pg(i,t,e)}function pg(i,t,e=Yt){const{immediate:s,deep:n,flush:r,once:o}=e,a=Ce({},e),l=t&&s||!t&&r!=="post";let h;if(Sr){if(r==="sync"){const m=Ty();h=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Rs,m.resume=Rs,m.pause=Rs,m}}const u=me;a.call=(m,v,b)=>Is(m,u,v,b);let f=!1;r==="post"?a.scheduler=m=>{qe(m,u&&u.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(m,v)=>{v?m():kc(m)}),a.augmentJob=m=>{t&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const g=Rv(i,t,a);return Sr&&(h?h.push(g):l&&g()),g}function Oy(i,t,e){const s=this.proxy,n=le(i)?i.includes(".")?mg(s,i):()=>s[i]:i.bind(s,s);let r;_t(t)?r=t:(r=t.handler,e=t);const o=Rr(this),a=pg(n,r.bind(s),e);return o(),a}function mg(i,t){const e=t.split(".");return()=>{let s=i;for(let n=0;n<e.length&&s;n++)s=s[e[n]];return s}}const Ey=(i,t)=>t==="modelValue"||t==="model-value"?i.modelModifiers:i[`${t}Modifiers`]||i[`${cs(t)}Modifiers`]||i[`${Qi(t)}Modifiers`];function Ay(i,t,...e){if(i.isUnmounted)return;const s=i.vnode.props||Yt;let n=e;const r=t.startsWith("update:"),o=r&&Ey(s,t.slice(7));o&&(o.trim&&(n=e.map(u=>le(u)?u.trim():u)),o.number&&(n=e.map(Wl)));let a,l=s[a=dl(t)]||s[a=dl(cs(t))];!l&&r&&(l=s[a=dl(Qi(t))]),l&&Is(l,i,6,n);const h=s[a+"Once"];if(h){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,Is(h,i,6,n)}}function _g(i,t,e=!1){const s=t.emitsCache,n=s.get(i);if(n!==void 0)return n;const r=i.emits;let o={},a=!1;if(!_t(i)){const l=h=>{const u=_g(h,t,!0);u&&(a=!0,Ce(o,u))};!e&&t.mixins.length&&t.mixins.forEach(l),i.extends&&l(i.extends),i.mixins&&i.mixins.forEach(l)}return!r&&!a?(Kt(i)&&s.set(i,null),null):(dt(r)?r.forEach(l=>o[l]=null):Ce(o,r),Kt(i)&&s.set(i,o),o)}function ba(i,t){return!i||!ua(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ft(i,t[0].toLowerCase()+t.slice(1))||Ft(i,Qi(t))||Ft(i,t))}function Xu(i){const{type:t,vnode:e,proxy:s,withProxy:n,propsOptions:[r],slots:o,attrs:a,emit:l,render:h,renderCache:u,props:f,data:g,setupState:m,ctx:v,inheritAttrs:b}=i,C=qo(i);let O,D;try{if(e.shapeFlag&4){const P=n||s,V=P;O=Ps(h.call(V,P,u,f,m,g,v)),D=a}else{const P=t;O=Ps(P.length>1?P(f,{attrs:a,slots:o,emit:l}):P(f,null)),D=t.props?a:Dy(a)}}catch(P){fr.length=0,va(P,i,1),O=ge(Ki)}let L=O;if(D&&b!==!1){const P=Object.keys(D),{shapeFlag:V}=L;P.length&&V&7&&(r&&P.some(vc)&&(D=ky(D,r)),L=Ln(L,D,!1,!0))}return e.dirs&&(L=Ln(L,null,!1,!0),L.dirs=L.dirs?L.dirs.concat(e.dirs):e.dirs),e.transition&&Mc(L,e.transition),O=L,qo(C),O}const Dy=i=>{let t;for(const e in i)(e==="class"||e==="style"||ua(e))&&((t||(t={}))[e]=i[e]);return t},ky=(i,t)=>{const e={};for(const s in i)(!vc(s)||!(s.slice(9)in t))&&(e[s]=i[s]);return e};function My(i,t,e){const{props:s,children:n,component:r}=i,{props:o,children:a,patchFlag:l}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return s?Yu(s,o,h):!!o;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const g=u[f];if(o[g]!==s[g]&&!ba(h,g))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Yu(s,o,h):!0:!!o;return!1}function Yu(i,t,e){const s=Object.keys(t);if(s.length!==Object.keys(i).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==i[r]&&!ba(e,r))return!0}return!1}function Py({vnode:i,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===i&&(s.el=i.el),s===i)(i=t.vnode).el=e,t=t.parent;else break}}const vg=i=>i.__isSuspense;function jy(i,t){t&&t.pendingBranch?dt(i)?t.effects.push(...i):t.effects.push(i):Nv(i)}const _s=Symbol.for("v-fgt"),xa=Symbol.for("v-txt"),Ki=Symbol.for("v-cmt"),Ro=Symbol.for("v-stc"),fr=[];let Qe=null;function ye(i=!1){fr.push(Qe=i?null:[])}function Fy(){fr.pop(),Qe=fr[fr.length-1]||null}let Cr=1;function zu(i,t=!1){Cr+=i,i<0&&Qe&&t&&(Qe.hasOnce=!0)}function yg(i){return i.dynamicChildren=Cr>0?Qe||On:null,Fy(),Cr>0&&Qe&&Qe.push(i),i}function Je(i,t,e,s,n,r){return yg(mt(i,t,e,s,n,r,!0))}function Kl(i,t,e,s,n){return yg(ge(i,t,e,s,n,!0))}function Qo(i){return i?i.__v_isVNode===!0:!1}function tr(i,t){return i.type===t.type&&i.key===t.key}const bg=({key:i})=>i??null,Io=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?le(i)||oe(i)||_t(i)?{i:Ne,r:i,k:t,f:!!e}:i:null);function mt(i,t=null,e=null,s=0,n=null,r=i===_s?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&bg(t),ref:t&&Io(t),scopeId:qd,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ne};return a?(Fc(l,e),r&128&&i.normalize(l)):e&&(l.shapeFlag|=le(e)?8:16),Cr>0&&!o&&Qe&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Qe.push(l),l}const ge=Ly;function Ly(i,t=null,e=null,s=0,n=null,r=!1){if((!i||i===sy)&&(i=Ki),Qo(i)){const a=Ln(i,t,!0);return e&&Fc(a,e),Cr>0&&!r&&Qe&&(a.shapeFlag&6?Qe[Qe.indexOf(i)]=a:Qe.push(a)),a.patchFlag=-2,a}if(Gy(i)&&(i=i.__vccOpts),t){t=Ry(t);let{class:a,style:l}=t;a&&!le(a)&&(t.class=ma(a)),Kt(l)&&(Ac(l)&&!dt(l)&&(l=Ce({},l)),t.style=xc(l))}const o=le(i)?1:vg(i)?128:Vv(i)?64:Kt(i)?4:_t(i)?2:0;return mt(i,t,e,s,n,o,r,!0)}function Ry(i){return i?Ac(i)||og(i)?Ce({},i):i:null}function Ln(i,t,e=!1,s=!1){const{props:n,ref:r,patchFlag:o,children:a,transition:l}=i,h=t?By(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:i.type,props:h,key:h&&bg(h),ref:t&&t.ref?e&&r?dt(r)?r.concat(Io(t)):[r,Io(t)]:Io(t):r,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:a,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==_s?o===-1?16:o|16:o,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:l,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Ln(i.ssContent),ssFallback:i.ssFallback&&Ln(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return l&&s&&Mc(u,l.clone(u)),u}function Bo(i=" ",t=0){return ge(xa,null,i,t)}function Iy(i,t){const e=ge(Ro,null,i);return e.staticCount=t,e}function Uu(i="",t=!1){return t?(ye(),Kl(Ki,null,i)):ge(Ki,null,i)}function Ps(i){return i==null||typeof i=="boolean"?ge(Ki):dt(i)?ge(_s,null,i.slice()):Qo(i)?di(i):ge(xa,null,String(i))}function di(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Ln(i)}function Fc(i,t){let e=0;const{shapeFlag:s}=i;if(t==null)t=null;else if(dt(t))e=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),Fc(i,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!og(t)?t._ctx=Ne:n===3&&Ne&&(Ne.slots._===1?t._=1:(t._=2,i.patchFlag|=1024))}else _t(t)?(t={default:t,_ctx:Ne},e=32):(t=String(t),s&64?(e=16,t=[Bo(t)]):e=8);i.children=t,i.shapeFlag|=e}function By(...i){const t={};for(let e=0;e<i.length;e++){const s=i[e];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=ma([t.class,s.class]));else if(n==="style")t.style=xc([t.style,s.style]);else if(ua(n)){const r=t[n],o=s[n];o&&r!==o&&!(dt(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=s[n])}return t}function ks(i,t,e,s=null){Is(i,t,7,[e,s])}const Ny=ig();let Wy=0;function Hy(i,t,e){const s=i.type,n=(t?t.appContext:i.appContext)||Ny,r={uid:Wy++,vnode:i,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Sd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lg(s,n),emitsOptions:_g(s,n),emit:null,emitted:null,propsDefaults:Yt,inheritAttrs:s.inheritAttrs,ctx:Yt,data:Yt,props:Yt,attrs:Yt,slots:Yt,refs:Yt,setupState:Yt,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Ay.bind(null,r),i.ce&&i.ce(r),r}let me=null,Zo,Jl;{const i=pa(),t=(e,s)=>{let n;return(n=i[e])||(n=i[e]=[]),n.push(s),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};Zo=t("__VUE_INSTANCE_SETTERS__",e=>me=e),Jl=t("__VUE_SSR_SETTERS__",e=>Sr=e)}const Rr=i=>{const t=me;return Zo(i),i.scope.on(),()=>{i.scope.off(),Zo(t)}},Gu=()=>{me&&me.scope.off(),Zo(null)};function xg(i){return i.vnode.shapeFlag&4}let Sr=!1;function Vy(i,t=!1,e=!1){t&&Jl(t);const{props:s,children:n}=i.vnode,r=xg(i);gy(i,s,r,t),vy(i,n,e);const o=r?Xy(i,t):void 0;return t&&Jl(!1),o}function Xy(i,t){const e=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,ry);const{setup:s}=e;if(s){xi();const n=i.setupContext=s.length>1?zy(i):null,r=Rr(i),o=Lr(s,i,0,[i.props,n]),a=_d(o);if(wi(),r(),(a||i.sp)&&!cr(i)&&Jd(i),a){if(o.then(Gu,Gu),t)return o.then(l=>{$u(i,l)}).catch(l=>{va(l,i,0)});i.asyncDep=o}else $u(i,o)}else wg(i)}function $u(i,t,e){_t(t)?i.type.__ssrInlineRender?i.ssrRender=t:i.render=t:Kt(t)&&(i.setupState=Yd(t)),wg(i)}function wg(i,t,e){const s=i.type;i.render||(i.render=s.render||Rs);{const n=Rr(i);xi();try{oy(i)}finally{wi(),n()}}}const Yy={get(i,t){return be(i,"get",""),i[t]}};function zy(i){const t=e=>{i.exposed=e||{}};return{attrs:new Proxy(i.attrs,Yy),slots:i.slots,emit:i.emit,expose:t}}function wa(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(Yd(_i(i.exposed)),{get(t,e){if(e in t)return t[e];if(e in hr)return hr[e](i)},has(t,e){return e in t||e in hr}})):i.proxy}function Uy(i,t=!0){return _t(i)?i.displayName||i.name:i.name||t&&i.__name}function Gy(i){return _t(i)&&"__vccOpts"in i}const Be=(i,t)=>Fv(i,t,Sr);function Cg(i,t,e){const s=arguments.length;return s===2?Kt(t)&&!dt(t)?Qo(t)?ge(i,null,[t]):ge(i,t):ge(i,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&Qo(e)&&(e=[e]),ge(i,t,e))}const $y="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ql;const qu=typeof window<"u"&&window.trustedTypes;if(qu)try{Ql=qu.createPolicy("vue",{createHTML:i=>i})}catch{}const Sg=Ql?i=>Ql.createHTML(i):i=>i,qy="http://www.w3.org/2000/svg",Ky="http://www.w3.org/1998/Math/MathML",zs=typeof document<"u"?document:null,Ku=zs&&zs.createElement("template"),Jy={insert:(i,t,e)=>{t.insertBefore(i,e||null)},remove:i=>{const t=i.parentNode;t&&t.removeChild(i)},createElement:(i,t,e,s)=>{const n=t==="svg"?zs.createElementNS(qy,i):t==="mathml"?zs.createElementNS(Ky,i):e?zs.createElement(i,{is:e}):zs.createElement(i);return i==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:i=>zs.createTextNode(i),createComment:i=>zs.createComment(i),setText:(i,t)=>{i.nodeValue=t},setElementText:(i,t)=>{i.textContent=t},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>zs.querySelector(i),setScopeId(i,t){i.setAttribute(t,"")},insertStaticContent(i,t,e,s,n,r){const o=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{Ku.innerHTML=Sg(s==="svg"?`<svg>${i}</svg>`:s==="mathml"?`<math>${i}</math>`:i);const a=Ku.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},Qy=Symbol("_vtc");function Zy(i,t,e){const s=i[Qy];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?i.removeAttribute("class"):e?i.setAttribute("class",t):i.className=t}const Ju=Symbol("_vod"),t0=Symbol("_vsh"),e0=Symbol(""),s0=/(^|;)\s*display\s*:/;function i0(i,t,e){const s=i.style,n=le(e);let r=!1;if(e&&!n){if(t)if(le(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&No(s,a,"")}else for(const o in t)e[o]==null&&No(s,o,"");for(const o in e)o==="display"&&(r=!0),No(s,o,e[o])}else if(n){if(t!==e){const o=s[e0];o&&(e+=";"+o),s.cssText=e,r=s0.test(e)}}else t&&i.removeAttribute("style");Ju in i&&(i[Ju]=r?s.display:"",i[t0]&&(s.display="none"))}const Qu=/\s*!important$/;function No(i,t,e){if(dt(e))e.forEach(s=>No(i,t,s));else if(e==null&&(e=""),t.startsWith("--"))i.setProperty(t,e);else{const s=n0(i,t);Qu.test(e)?i.setProperty(Qi(s),e.replace(Qu,""),"important"):i[s]=e}}const Zu=["Webkit","Moz","ms"],bl={};function n0(i,t){const e=bl[t];if(e)return e;let s=cs(t);if(s!=="filter"&&s in i)return bl[t]=s;s=ga(s);for(let n=0;n<Zu.length;n++){const r=Zu[n]+s;if(r in i)return bl[t]=r}return t}const tf="http://www.w3.org/1999/xlink";function ef(i,t,e,s,n,r=ov(t)){s&&t.startsWith("xlink:")?e==null?i.removeAttributeNS(tf,t.slice(6,t.length)):i.setAttributeNS(tf,t,e):e==null||r&&!xd(e)?i.removeAttribute(t):i.setAttribute(t,r?"":bi(e)?String(e):e)}function sf(i,t,e,s,n){if(t==="innerHTML"||t==="textContent"){e!=null&&(i[t]=t==="innerHTML"?Sg(e):e);return}const r=i.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?i.getAttribute("value")||"":i.value,l=e==null?i.type==="checkbox"?"on":"":String(e);(a!==l||!("_value"in i))&&(i.value=l),e==null&&i.removeAttribute(t),i._value=e;return}let o=!1;if(e===""||e==null){const a=typeof i[t];a==="boolean"?e=xd(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{i[t]=e}catch{}o&&i.removeAttribute(n||t)}function bn(i,t,e,s){i.addEventListener(t,e,s)}function r0(i,t,e,s){i.removeEventListener(t,e,s)}const nf=Symbol("_vei");function o0(i,t,e,s,n=null){const r=i[nf]||(i[nf]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=a0(t);if(s){const h=r[t]=h0(s,n);bn(i,a,h,l)}else o&&(r0(i,a,o,l),r[t]=void 0)}}const rf=/(?:Once|Passive|Capture)$/;function a0(i){let t;if(rf.test(i)){t={};let s;for(;s=i.match(rf);)i=i.slice(0,i.length-s[0].length),t[s[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):Qi(i.slice(2)),t]}let xl=0;const l0=Promise.resolve(),c0=()=>xl||(l0.then(()=>xl=0),xl=Date.now());function h0(i,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;Is(u0(s,e.value),t,5,[s])};return e.value=i,e.attached=c0(),e}function u0(i,t){if(dt(t)){const e=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{e.call(i),i._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const of=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,f0=(i,t,e,s,n,r)=>{const o=n==="svg";t==="class"?Zy(i,s,o):t==="style"?i0(i,e,s):ua(t)?vc(t)||o0(i,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):d0(i,t,s,o))?(sf(i,t,s),!i.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ef(i,t,s,o,r,t!=="value")):i._isVueCE&&(/[A-Z]/.test(t)||!le(s))?sf(i,cs(t),s,r,t):(t==="true-value"?i._trueValue=s:t==="false-value"&&(i._falseValue=s),ef(i,t,s,o))};function d0(i,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in i&&of(t)&&_t(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&i.tagName==="INPUT"||t==="type"&&i.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=i.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return of(t)&&le(e)?!1:t in i}const af=i=>{const t=i.props["onUpdate:modelValue"]||!1;return dt(t)?e=>Lo(t,e):t};function g0(i){i.target.composing=!0}function lf(i){const t=i.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const wl=Symbol("_assign"),Mn={created(i,{modifiers:{lazy:t,trim:e,number:s}},n){i[wl]=af(n);const r=s||n.props&&n.props.type==="number";bn(i,t?"change":"input",o=>{if(o.target.composing)return;let a=i.value;e&&(a=a.trim()),r&&(a=Wl(a)),i[wl](a)}),e&&bn(i,"change",()=>{i.value=i.value.trim()}),t||(bn(i,"compositionstart",g0),bn(i,"compositionend",lf),bn(i,"change",lf))},mounted(i,{value:t}){i.value=t??""},beforeUpdate(i,{value:t,oldValue:e,modifiers:{lazy:s,trim:n,number:r}},o){if(i[wl]=af(o),i.composing)return;const a=(r||i.type==="number")&&!/^0\d/.test(i.value)?Wl(i.value):i.value,l=t??"";a!==l&&(document.activeElement===i&&i.type!=="range"&&(s&&t===e||n&&i.value.trim()===l)||(i.value=l))}},p0=Ce({patchProp:f0},Jy);let cf;function m0(){return cf||(cf=by(p0))}const _0=(...i)=>{const t=m0().createApp(...i),{mount:e}=t;return t.mount=s=>{const n=y0(s);if(!n)return;const r=t._component;!_t(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=e(n,!1,v0(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function v0(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function y0(i){return le(i)?document.querySelector(i):i}const Ir=(i,t)=>{const e=i.__vccOpts||i;for(const[s,n]of t)e[s]=n;return e},b0={};function x0(i,t){const e=ey("router-view");return ye(),Je("div",null,[ge(e)])}const w0=Ir(b0,[["render",x0]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const xn=typeof document<"u";function Tg(i){return typeof i=="object"||"displayName"in i||"props"in i||"__vccOpts"in i}function C0(i){return i.__esModule||i[Symbol.toStringTag]==="Module"||i.default&&Tg(i.default)}const jt=Object.assign;function Cl(i,t){const e={};for(const s in t){const n=t[s];e[s]=Ss(n)?n.map(i):i(n)}return e}const dr=()=>{},Ss=Array.isArray,Og=/#/g,S0=/&/g,T0=/\//g,O0=/=/g,E0=/\?/g,Eg=/\+/g,A0=/%5B/g,D0=/%5D/g,Ag=/%5E/g,k0=/%60/g,Dg=/%7B/g,M0=/%7C/g,kg=/%7D/g,P0=/%20/g;function Lc(i){return encodeURI(""+i).replace(M0,"|").replace(A0,"[").replace(D0,"]")}function j0(i){return Lc(i).replace(Dg,"{").replace(kg,"}").replace(Ag,"^")}function Zl(i){return Lc(i).replace(Eg,"%2B").replace(P0,"+").replace(Og,"%23").replace(S0,"%26").replace(k0,"`").replace(Dg,"{").replace(kg,"}").replace(Ag,"^")}function F0(i){return Zl(i).replace(O0,"%3D")}function L0(i){return Lc(i).replace(Og,"%23").replace(E0,"%3F")}function R0(i){return i==null?"":L0(i).replace(T0,"%2F")}function Tr(i){try{return decodeURIComponent(""+i)}catch{}return""+i}const I0=/\/$/,B0=i=>i.replace(I0,"");function Sl(i,t,e="/"){let s,n={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),n=i(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=V0(s??t,e),{fullPath:s+(r&&"?")+r+o,path:s,query:n,hash:Tr(o)}}function N0(i,t){const e=t.query?i(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function hf(i,t){return!t||!i.toLowerCase().startsWith(t.toLowerCase())?i:i.slice(t.length)||"/"}function W0(i,t,e){const s=t.matched.length-1,n=e.matched.length-1;return s>-1&&s===n&&Rn(t.matched[s],e.matched[n])&&Mg(t.params,e.params)&&i(t.query)===i(e.query)&&t.hash===e.hash}function Rn(i,t){return(i.aliasOf||i)===(t.aliasOf||t)}function Mg(i,t){if(Object.keys(i).length!==Object.keys(t).length)return!1;for(const e in i)if(!H0(i[e],t[e]))return!1;return!0}function H0(i,t){return Ss(i)?uf(i,t):Ss(t)?uf(t,i):i===t}function uf(i,t){return Ss(t)?i.length===t.length&&i.every((e,s)=>e===t[s]):i.length===1&&i[0]===t}function V0(i,t){if(i.startsWith("/"))return i;if(!i)return t;const e=t.split("/"),s=i.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let r=e.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const li={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Or;(function(i){i.pop="pop",i.push="push"})(Or||(Or={}));var gr;(function(i){i.back="back",i.forward="forward",i.unknown=""})(gr||(gr={}));function X0(i){if(!i)if(xn){const t=document.querySelector("base");i=t&&t.getAttribute("href")||"/",i=i.replace(/^\w+:\/\/[^\/]+/,"")}else i="/";return i[0]!=="/"&&i[0]!=="#"&&(i="/"+i),B0(i)}const Y0=/^[^#]+#/;function z0(i,t){return i.replace(Y0,"#")+t}function U0(i,t){const e=document.documentElement.getBoundingClientRect(),s=i.getBoundingClientRect();return{behavior:t.behavior,left:s.left-e.left-(t.left||0),top:s.top-e.top-(t.top||0)}}const Ca=()=>({left:window.scrollX,top:window.scrollY});function G0(i){let t;if("el"in i){const e=i.el,s=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?s?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=U0(n,i)}else t=i;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function ff(i,t){return(history.state?history.state.position-t:-1)+i}const tc=new Map;function $0(i,t){tc.set(i,t)}function q0(i){const t=tc.get(i);return tc.delete(i),t}let K0=()=>location.protocol+"//"+location.host;function Pg(i,t){const{pathname:e,search:s,hash:n}=t,r=i.indexOf("#");if(r>-1){let a=n.includes(i.slice(r))?i.slice(r).length:1,l=n.slice(a);return l[0]!=="/"&&(l="/"+l),hf(l,"")}return hf(e,i)+s+n}function J0(i,t,e,s){let n=[],r=[],o=null;const a=({state:g})=>{const m=Pg(i,location),v=e.value,b=t.value;let C=0;if(g){if(e.value=m,t.value=g,o&&o===v){o=null;return}C=b?g.position-b.position:0}else s(m);n.forEach(O=>{O(e.value,v,{delta:C,type:Or.pop,direction:C?C>0?gr.forward:gr.back:gr.unknown})})};function l(){o=e.value}function h(g){n.push(g);const m=()=>{const v=n.indexOf(g);v>-1&&n.splice(v,1)};return r.push(m),m}function u(){const{history:g}=window;g.state&&g.replaceState(jt({},g.state,{scroll:Ca()}),"")}function f(){for(const g of r)g();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:h,destroy:f}}function df(i,t,e,s=!1,n=!1){return{back:i,current:t,forward:e,replaced:s,position:window.history.length,scroll:n?Ca():null}}function Q0(i){const{history:t,location:e}=window,s={value:Pg(i,e)},n={value:t.state};n.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,h,u){const f=i.indexOf("#"),g=f>-1?(e.host&&document.querySelector("base")?i:i.slice(f))+l:K0()+i+l;try{t[u?"replaceState":"pushState"](h,"",g),n.value=h}catch(m){console.error(m),e[u?"replace":"assign"](g)}}function o(l,h){const u=jt({},t.state,df(n.value.back,l,n.value.forward,!0),h,{position:n.value.position});r(l,u,!0),s.value=l}function a(l,h){const u=jt({},n.value,t.state,{forward:l,scroll:Ca()});r(u.current,u,!0);const f=jt({},df(s.value,l,null),{position:u.position+1},h);r(l,f,!1),s.value=l}return{location:s,state:n,push:a,replace:o}}function Z0(i){i=X0(i);const t=Q0(i),e=J0(i,t.state,t.location,t.replace);function s(r,o=!0){o||e.pauseListeners(),history.go(r)}const n=jt({location:"",base:i,go:s,createHref:z0.bind(null,i)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function tb(i){return i=location.host?i||location.pathname+location.search:"",i.includes("#")||(i+="#"),Z0(i)}function eb(i){return typeof i=="string"||i&&typeof i=="object"}function jg(i){return typeof i=="string"||typeof i=="symbol"}const Fg=Symbol("");var gf;(function(i){i[i.aborted=4]="aborted",i[i.cancelled=8]="cancelled",i[i.duplicated=16]="duplicated"})(gf||(gf={}));function In(i,t){return jt(new Error,{type:i,[Fg]:!0},t)}function Xs(i,t){return i instanceof Error&&Fg in i&&(t==null||!!(i.type&t))}const pf="[^/]+?",sb={sensitive:!1,strict:!1,start:!0,end:!0},ib=/[.+*?^${}()[\]/\\]/g;function nb(i,t){const e=jt({},sb,t),s=[];let n=e.start?"^":"";const r=[];for(const h of i){const u=h.length?[]:[90];e.strict&&!h.length&&(n+="/");for(let f=0;f<h.length;f++){const g=h[f];let m=40+(e.sensitive?.25:0);if(g.type===0)f||(n+="/"),n+=g.value.replace(ib,"\\$&"),m+=40;else if(g.type===1){const{value:v,repeatable:b,optional:C,regexp:O}=g;r.push({name:v,repeatable:b,optional:C});const D=O||pf;if(D!==pf){m+=10;try{new RegExp(`(${D})`)}catch(P){throw new Error(`Invalid custom RegExp for param "${v}" (${D}): `+P.message)}}let L=b?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;f||(L=C&&h.length<2?`(?:/${L})`:"/"+L),C&&(L+="?"),n+=L,m+=20,C&&(m+=-8),b&&(m+=-20),D===".*"&&(m+=-50)}u.push(m)}s.push(u)}if(e.strict&&e.end){const h=s.length-1;s[h][s[h].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function a(h){const u=h.match(o),f={};if(!u)return null;for(let g=1;g<u.length;g++){const m=u[g]||"",v=r[g-1];f[v.name]=m&&v.repeatable?m.split("/"):m}return f}function l(h){let u="",f=!1;for(const g of i){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const m of g)if(m.type===0)u+=m.value;else if(m.type===1){const{value:v,repeatable:b,optional:C}=m,O=v in h?h[v]:"";if(Ss(O)&&!b)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const D=Ss(O)?O.join("/"):O;if(!D)if(C)g.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);u+=D}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function rb(i,t){let e=0;for(;e<i.length&&e<t.length;){const s=t[e]-i[e];if(s)return s;e++}return i.length<t.length?i.length===1&&i[0]===80?-1:1:i.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Lg(i,t){let e=0;const s=i.score,n=t.score;for(;e<s.length&&e<n.length;){const r=rb(s[e],n[e]);if(r)return r;e++}if(Math.abs(n.length-s.length)===1){if(mf(s))return 1;if(mf(n))return-1}return n.length-s.length}function mf(i){const t=i[i.length-1];return i.length>0&&t[t.length-1]<0}const ob={type:0,value:""},ab=/[a-zA-Z0-9_]/;function lb(i){if(!i)return[[]];if(i==="/")return[[ob]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function t(m){throw new Error(`ERR (${e})/"${h}": ${m}`)}let e=0,s=e;const n=[];let r;function o(){r&&n.push(r),r=[]}let a=0,l,h="",u="";function f(){h&&(e===0?r.push({type:0,value:h}):e===1||e===2||e===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function g(){h+=l}for(;a<i.length;){if(l=i[a++],l==="\\"&&e!==2){s=e,e=4;continue}switch(e){case 0:l==="/"?(h&&f(),o()):l===":"?(f(),e=1):g();break;case 4:g(),e=s;break;case 1:l==="("?e=2:ab.test(l)?g():(f(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:e=3:u+=l;break;case 3:f(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${h}"`),f(),o(),n}function cb(i,t,e){const s=nb(lb(i.path),e),n=jt(s,{record:i,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function hb(i,t){const e=[],s=new Map;t=bf({strict:!1,end:!0,sensitive:!1},t);function n(f){return s.get(f)}function r(f,g,m){const v=!m,b=vf(f);b.aliasOf=m&&m.record;const C=bf(t,f),O=[b];if("alias"in f){const P=typeof f.alias=="string"?[f.alias]:f.alias;for(const V of P)O.push(vf(jt({},b,{components:m?m.record.components:b.components,path:V,aliasOf:m?m.record:b})))}let D,L;for(const P of O){const{path:V}=P;if(g&&V[0]!=="/"){const it=g.record.path,J=it[it.length-1]==="/"?"":"/";P.path=g.record.path+(V&&J+V)}if(D=cb(P,g,C),m?m.alias.push(D):(L=L||D,L!==D&&L.alias.push(D),v&&f.name&&!yf(D)&&o(f.name)),Rg(D)&&l(D),b.children){const it=b.children;for(let J=0;J<it.length;J++)r(it[J],D,m&&m.children[J])}m=m||D}return L?()=>{o(L)}:dr}function o(f){if(jg(f)){const g=s.get(f);g&&(s.delete(f),e.splice(e.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=e.indexOf(f);g>-1&&(e.splice(g,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return e}function l(f){const g=db(f,e);e.splice(g,0,f),f.record.name&&!yf(f)&&s.set(f.record.name,f)}function h(f,g){let m,v={},b,C;if("name"in f&&f.name){if(m=s.get(f.name),!m)throw In(1,{location:f});C=m.record.name,v=jt(_f(g.params,m.keys.filter(L=>!L.optional).concat(m.parent?m.parent.keys.filter(L=>L.optional):[]).map(L=>L.name)),f.params&&_f(f.params,m.keys.map(L=>L.name))),b=m.stringify(v)}else if(f.path!=null)b=f.path,m=e.find(L=>L.re.test(b)),m&&(v=m.parse(b),C=m.record.name);else{if(m=g.name?s.get(g.name):e.find(L=>L.re.test(g.path)),!m)throw In(1,{location:f,currentLocation:g});C=m.record.name,v=jt({},g.params,f.params),b=m.stringify(v)}const O=[];let D=m;for(;D;)O.unshift(D.record),D=D.parent;return{name:C,path:b,params:v,matched:O,meta:fb(O)}}i.forEach(f=>r(f));function u(){e.length=0,s.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:n}}function _f(i,t){const e={};for(const s of t)s in i&&(e[s]=i[s]);return e}function vf(i){const t={path:i.path,redirect:i.redirect,name:i.name,meta:i.meta||{},aliasOf:i.aliasOf,beforeEnter:i.beforeEnter,props:ub(i),children:i.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in i?i.components||null:i.component&&{default:i.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function ub(i){const t={},e=i.props||!1;if("component"in i)t.default=e;else for(const s in i.components)t[s]=typeof e=="object"?e[s]:e;return t}function yf(i){for(;i;){if(i.record.aliasOf)return!0;i=i.parent}return!1}function fb(i){return i.reduce((t,e)=>jt(t,e.meta),{})}function bf(i,t){const e={};for(const s in i)e[s]=s in t?t[s]:i[s];return e}function db(i,t){let e=0,s=t.length;for(;e!==s;){const r=e+s>>1;Lg(i,t[r])<0?s=r:e=r+1}const n=gb(i);return n&&(s=t.lastIndexOf(n,s-1)),s}function gb(i){let t=i;for(;t=t.parent;)if(Rg(t)&&Lg(i,t)===0)return t}function Rg({record:i}){return!!(i.name||i.components&&Object.keys(i.components).length||i.redirect)}function pb(i){const t={};if(i===""||i==="?")return t;const s=(i[0]==="?"?i.slice(1):i).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(Eg," "),o=r.indexOf("="),a=Tr(o<0?r:r.slice(0,o)),l=o<0?null:Tr(r.slice(o+1));if(a in t){let h=t[a];Ss(h)||(h=t[a]=[h]),h.push(l)}else t[a]=l}return t}function xf(i){let t="";for(let e in i){const s=i[e];if(e=F0(e),s==null){s!==void 0&&(t+=(t.length?"&":"")+e);continue}(Ss(s)?s.map(r=>r&&Zl(r)):[s&&Zl(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function mb(i){const t={};for(const e in i){const s=i[e];s!==void 0&&(t[e]=Ss(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return t}const _b=Symbol(""),wf=Symbol(""),Rc=Symbol(""),Ig=Symbol(""),ec=Symbol("");function er(){let i=[];function t(s){return i.push(s),()=>{const n=i.indexOf(s);n>-1&&i.splice(n,1)}}function e(){i=[]}return{add:t,list:()=>i.slice(),reset:e}}function gi(i,t,e,s,n,r=o=>o()){const o=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((a,l)=>{const h=g=>{g===!1?l(In(4,{from:e,to:t})):g instanceof Error?l(g):eb(g)?l(In(2,{from:t,to:g})):(o&&s.enterCallbacks[n]===o&&typeof g=="function"&&o.push(g),a())},u=r(()=>i.call(s&&s.instances[n],t,e,h));let f=Promise.resolve(u);i.length<3&&(f=f.then(h)),f.catch(g=>l(g))})}function Tl(i,t,e,s,n=r=>r()){const r=[];for(const o of i)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Tg(l)){const u=(l.__vccOpts||l)[t];u&&r.push(gi(u,e,s,o,a,n))}else{let h=l();r.push(()=>h.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=C0(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const m=(f.__vccOpts||f)[t];return m&&gi(m,e,s,o,a,n)()}))}}return r}function Cf(i){const t=ws(Rc),e=ws(Ig),s=Be(()=>{const l=Ke(i.to);return t.resolve(l)}),n=Be(()=>{const{matched:l}=s.value,{length:h}=l,u=l[h-1],f=e.matched;if(!u||!f.length)return-1;const g=f.findIndex(Rn.bind(null,u));if(g>-1)return g;const m=Sf(l[h-2]);return h>1&&Sf(u)===m&&f[f.length-1].path!==m?f.findIndex(Rn.bind(null,l[h-2])):g}),r=Be(()=>n.value>-1&&wb(e.params,s.value.params)),o=Be(()=>n.value>-1&&n.value===e.matched.length-1&&Mg(e.params,s.value.params));function a(l={}){if(xb(l)){const h=t[Ke(i.replace)?"replace":"push"](Ke(i.to)).catch(dr);return i.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:Be(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function vb(i){return i.length===1?i[0]:i}const yb=Kd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Cf,setup(i,{slots:t}){const e=jr(Cf(i)),{options:s}=ws(Rc),n=Be(()=>({[Tf(i.activeClass,s.linkActiveClass,"router-link-active")]:e.isActive,[Tf(i.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&vb(t.default(e));return i.custom?r:Cg("a",{"aria-current":e.isExactActive?i.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},r)}}}),bb=yb;function xb(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&!i.defaultPrevented&&!(i.button!==void 0&&i.button!==0)){if(i.currentTarget&&i.currentTarget.getAttribute){const t=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return i.preventDefault&&i.preventDefault(),!0}}function wb(i,t){for(const e in t){const s=t[e],n=i[e];if(typeof s=="string"){if(s!==n)return!1}else if(!Ss(n)||n.length!==s.length||s.some((r,o)=>r!==n[o]))return!1}return!0}function Sf(i){return i?i.aliasOf?i.aliasOf.path:i.path:""}const Tf=(i,t,e)=>i??t??e,Cb=Kd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(i,{attrs:t,slots:e}){const s=ws(ec),n=Be(()=>i.route||s.value),r=ws(wf,0),o=Be(()=>{let h=Ke(r);const{matched:u}=n.value;let f;for(;(f=u[h])&&!f.components;)h++;return h}),a=Be(()=>n.value.matched[o.value]);ur(wf,Be(()=>o.value+1)),ur(_b,a),ur(ec,n);const l=Fr();return kn(()=>[l.value,a.value,i.name],([h,u,f],[g,m,v])=>{u&&(u.instances[f]=h,m&&m!==u&&h&&h===g&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),h&&u&&(!m||!Rn(u,m)||!g)&&(u.enterCallbacks[f]||[]).forEach(b=>b(h))},{flush:"post"}),()=>{const h=n.value,u=i.name,f=a.value,g=f&&f.components[u];if(!g)return Of(e.default,{Component:g,route:h});const m=f.props[u],v=m?m===!0?h.params:typeof m=="function"?m(h):m:null,C=Cg(g,jt({},v,t,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return Of(e.default,{Component:C,route:h})||C}}});function Of(i,t){if(!i)return null;const e=i(t);return e.length===1?e[0]:e}const Sb=Cb;function Tb(i){const t=hb(i.routes,i),e=i.parseQuery||pb,s=i.stringifyQuery||xf,n=i.history,r=er(),o=er(),a=er(),l=Ev(li);let h=li;xn&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Cl.bind(null,F=>""+F),f=Cl.bind(null,R0),g=Cl.bind(null,Tr);function m(F,j){let U,Q;return jg(F)?(U=t.getRecordMatcher(F),Q=j):Q=F,t.addRoute(Q,U)}function v(F){const j=t.getRecordMatcher(F);j&&t.removeRoute(j)}function b(){return t.getRoutes().map(F=>F.record)}function C(F){return!!t.getRecordMatcher(F)}function O(F,j){if(j=jt({},j||l.value),typeof F=="string"){const A=Sl(e,F,j.path),I=t.resolve({path:A.path},j),B=n.createHref(A.fullPath);return jt(A,I,{params:g(I.params),hash:Tr(A.hash),redirectedFrom:void 0,href:B})}let U;if(F.path!=null)U=jt({},F,{path:Sl(e,F.path,j.path).path});else{const A=jt({},F.params);for(const I in A)A[I]==null&&delete A[I];U=jt({},F,{params:f(A)}),j.params=f(j.params)}const Q=t.resolve(U,j),Rt=F.hash||"";Q.params=u(g(Q.params));const y=N0(s,jt({},F,{hash:j0(Rt),path:Q.path})),x=n.createHref(y);return jt({fullPath:y,hash:Rt,query:s===xf?mb(F.query):F.query||{}},Q,{redirectedFrom:void 0,href:x})}function D(F){return typeof F=="string"?Sl(e,F,l.value.path):jt({},F)}function L(F,j){if(h!==F)return In(8,{from:j,to:F})}function P(F){return J(F)}function V(F){return P(jt(D(F),{replace:!0}))}function it(F){const j=F.matched[F.matched.length-1];if(j&&j.redirect){const{redirect:U}=j;let Q=typeof U=="function"?U(F):U;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=D(Q):{path:Q},Q.params={}),jt({query:F.query,hash:F.hash,params:Q.path!=null?{}:F.params},Q)}}function J(F,j){const U=h=O(F),Q=l.value,Rt=F.state,y=F.force,x=F.replace===!0,A=it(U);if(A)return J(jt(D(A),{state:typeof A=="object"?jt({},Rt,A.state):Rt,force:y,replace:x}),j||U);const I=U;I.redirectedFrom=j;let B;return!y&&W0(s,Q,U)&&(B=In(16,{to:I,from:Q}),ce(Q,Q,!0,!1)),(B?Promise.resolve(B):lt(I,Q)).catch(N=>Xs(N)?Xs(N,2)?N:R(N):ot(N,I,Q)).then(N=>{if(N){if(Xs(N,2))return J(jt({replace:x},D(N.to),{state:typeof N.to=="object"?jt({},Rt,N.to.state):Rt,force:y}),j||I)}else N=wt(I,Q,!0,x,Rt);return St(I,Q,N),N})}function H(F,j){const U=L(F,j);return U?Promise.reject(U):Promise.resolve()}function Z(F){const j=$t.values().next().value;return j&&typeof j.runWithContext=="function"?j.runWithContext(F):F()}function lt(F,j){let U;const[Q,Rt,y]=Ob(F,j);U=Tl(Q.reverse(),"beforeRouteLeave",F,j);for(const A of Q)A.leaveGuards.forEach(I=>{U.push(gi(I,F,j))});const x=H.bind(null,F,j);return U.push(x),At(U).then(()=>{U=[];for(const A of r.list())U.push(gi(A,F,j));return U.push(x),At(U)}).then(()=>{U=Tl(Rt,"beforeRouteUpdate",F,j);for(const A of Rt)A.updateGuards.forEach(I=>{U.push(gi(I,F,j))});return U.push(x),At(U)}).then(()=>{U=[];for(const A of y)if(A.beforeEnter)if(Ss(A.beforeEnter))for(const I of A.beforeEnter)U.push(gi(I,F,j));else U.push(gi(A.beforeEnter,F,j));return U.push(x),At(U)}).then(()=>(F.matched.forEach(A=>A.enterCallbacks={}),U=Tl(y,"beforeRouteEnter",F,j,Z),U.push(x),At(U))).then(()=>{U=[];for(const A of o.list())U.push(gi(A,F,j));return U.push(x),At(U)}).catch(A=>Xs(A,8)?A:Promise.reject(A))}function St(F,j,U){a.list().forEach(Q=>Z(()=>Q(F,j,U)))}function wt(F,j,U,Q,Rt){const y=L(F,j);if(y)return y;const x=j===li,A=xn?history.state:{};U&&(Q||x?n.replace(F.fullPath,jt({scroll:x&&A&&A.scroll},Rt)):n.push(F.fullPath,Rt)),l.value=F,ce(F,j,U,x),R()}let ut;function Et(){ut||(ut=n.listen((F,j,U)=>{if(!Se.listening)return;const Q=O(F),Rt=it(Q);if(Rt){J(jt(Rt,{replace:!0,force:!0}),Q).catch(dr);return}h=Q;const y=l.value;xn&&$0(ff(y.fullPath,U.delta),Ca()),lt(Q,y).catch(x=>Xs(x,12)?x:Xs(x,2)?(J(jt(D(x.to),{force:!0}),Q).then(A=>{Xs(A,20)&&!U.delta&&U.type===Or.pop&&n.go(-1,!1)}).catch(dr),Promise.reject()):(U.delta&&n.go(-U.delta,!1),ot(x,Q,y))).then(x=>{x=x||wt(Q,y,!1),x&&(U.delta&&!Xs(x,8)?n.go(-U.delta,!1):U.type===Or.pop&&Xs(x,20)&&n.go(-1,!1)),St(Q,y,x)}).catch(dr)}))}let Gt=er(),vt=er(),nt;function ot(F,j,U){R(F);const Q=vt.list();return Q.length?Q.forEach(Rt=>Rt(F,j,U)):console.error(F),Promise.reject(F)}function Qt(){return nt&&l.value!==li?Promise.resolve():new Promise((F,j)=>{Gt.add([F,j])})}function R(F){return nt||(nt=!F,Et(),Gt.list().forEach(([j,U])=>F?U(F):j()),Gt.reset()),F}function ce(F,j,U,Q){const{scrollBehavior:Rt}=i;if(!xn||!Rt)return Promise.resolve();const y=!U&&q0(ff(F.fullPath,0))||(Q||!U)&&history.state&&history.state.scroll||null;return Dc().then(()=>Rt(F,j,y)).then(x=>x&&G0(x)).catch(x=>ot(x,F,j))}const ee=F=>n.go(F);let ve;const $t=new Set,Se={currentRoute:l,listening:!0,addRoute:m,removeRoute:v,clearRoutes:t.clearRoutes,hasRoute:C,getRoutes:b,resolve:O,options:i,push:P,replace:V,go:ee,back:()=>ee(-1),forward:()=>ee(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:vt.add,isReady:Qt,install(F){const j=this;F.component("RouterLink",bb),F.component("RouterView",Sb),F.config.globalProperties.$router=j,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>Ke(l)}),xn&&!ve&&l.value===li&&(ve=!0,P(n.location).catch(Rt=>{}));const U={};for(const Rt in li)Object.defineProperty(U,Rt,{get:()=>l.value[Rt],enumerable:!0});F.provide(Rc,j),F.provide(Ig,Hd(U)),F.provide(ec,l);const Q=F.unmount;$t.add(F),F.unmount=function(){$t.delete(F),$t.size<1&&(h=li,ut&&ut(),ut=null,l.value=li,ve=!1,nt=!1),Q()}}};function At(F){return F.reduce((j,U)=>j.then(()=>Z(U)),Promise.resolve())}return Se}function Ob(i,t){const e=[],s=[],n=[],r=Math.max(t.matched.length,i.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(i.matched.find(h=>Rn(h,a))?s.push(a):e.push(a));const l=i.matched[o];l&&(t.matched.find(h=>Rn(h,l))||n.push(l))}return[e,s,n]}function w(i,t,e){return(t=function(s){var n=function(r,o){if(typeof r!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var l=a.call(r,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(r)}(s,"string");return typeof n=="symbol"?n:n+""}(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Ef(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,s)}return e}function S(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ef(Object(e),!0).forEach(function(s){w(i,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Ef(Object(e)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(e,s))})}return i}function Jt(i,t){if(i==null)return{};var e,s,n=function(o,a){if(o==null)return{};var l={};for(var h in o)if({}.hasOwnProperty.call(o,h)){if(a.indexOf(h)>=0)continue;l[h]=o[h]}return l}(i,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)e=r[s],t.indexOf(e)>=0||{}.propertyIsEnumerable.call(i,e)&&(n[e]=i[e])}return n}function Ci(i,t){return t||(t=i.slice(0)),Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(t)}}))}class Af{constructor(){w(this,"browserShadowBlurConstant",1),w(this,"DPI",96),w(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),w(this,"perfLimitSizeTotal",2097152),w(this,"maxCacheSideLimit",4096),w(this,"minCacheSideLimit",256),w(this,"disableStyleCopyPaste",!1),w(this,"enableGLFiltering",!0),w(this,"textureSize",4096),w(this,"forceGLPutImageData",!1),w(this,"cachesBoundsOfCurve",!1),w(this,"fontPaths",{}),w(this,"NUM_FRACTION_DIGITS",4)}}const Pt=new class extends Af{constructor(i){super(),this.configure(i)}configure(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,i)}addFonts(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=S(S({},this.fontPaths),i)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(i=>{delete this.fontPaths[i]})}clearFonts(){this.fontPaths={}}restoreDefaults(i){const t=new Af,e=(i==null?void 0:i.reduce((s,n)=>(s[n]=t[n],s),{}))||t;this.configure(e)}},vi=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];return console[i]("fabric",...e)};class Ls extends Error{constructor(t,e){super("fabric: ".concat(t),e)}}class Eb extends Ls{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}class Ab{}class Db extends Ab{testPrecision(t,e){const s="precision ".concat(e,` float;
void main(){}`),n=t.createShader(t.FRAGMENT_SHADER);return!!n&&(t.shaderSource(n,s),t.compileShader(n),!!t.getShaderParameter(n,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(s=>this.testPrecision(e,s)),e.getExtension("WEBGL_lose_context").loseContext(),vi("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const kb={};let Df;const Bs=()=>Df||(Df={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new Db,dispose(){},copyPasteData:kb}),Nn=()=>Bs().document,Ic=()=>Bs().window,Bg=()=>{var i;return Math.max((i=Pt.devicePixelRatio)!==null&&i!==void 0?i:Ic().devicePixelRatio,1)},pr=new class{constructor(){w(this,"charWidthsCache",{}),w(this,"boundsOfCurveCache",{})}getFontCache(i){let{fontFamily:t,fontStyle:e,fontWeight:s}=i;t=t.toLowerCase(),this.charWidthsCache[t]||(this.charWidthsCache[t]={});const n=this.charWidthsCache[t],r="".concat(e.toLowerCase(),"_").concat((s+"").toLowerCase());return n[r]||(n[r]={}),n[r]}clearFontCache(i){(i=(i||"").toLowerCase())?this.charWidthsCache[i]&&delete this.charWidthsCache[i]:this.charWidthsCache={}}limitDimsByArea(i){const{perfLimitSizeTotal:t}=Pt,e=Math.sqrt(t*i);return[Math.floor(e),Math.floor(t/e)]}},sc="6.6.4";function Wo(){}const Br=Math.PI/2,ta=2*Math.PI,Bc=Math.PI/180,Re=Object.freeze([1,0,0,1,0,0]),Nc=16,ci=.4477152502,xt="center",Lt="left",We="top",ic="bottom",ne="right",He="none",Wc=/\r?\n/,Ng="moving",Sa="scaling",Wg="rotating",Hc="rotate",Hg="skewing",Er="resizing",Mb="modifyPoly",Pb="modifyPath",ea="changed",Ta="scale",Xe="scaleX",hs="scaleY",Wn="skewX",Hn="skewY",ue="fill",Ve="stroke",sa="modified",mn="json",Ol="svg",tt=new class{constructor(){this[mn]=new Map,this[Ol]=new Map}has(i){return this[mn].has(i)}getClass(i){const t=this[mn].get(i);if(!t)throw new Ls("No class registered for ".concat(i));return t}setClass(i,t){t?this[mn].set(t,i):(this[mn].set(i.type,i),this[mn].set(i.type.toLowerCase(),i))}getSVGClass(i){return this[Ol].get(i)}setSVGClass(i,t){this[Ol].set(t??i.type.toLowerCase(),i)}},ia=new class extends Array{remove(i){const t=this.indexOf(i);t>-1&&this.splice(t,1)}cancelAll(){const i=this.splice(0);return i.forEach(t=>t.abort()),i}cancelByCanvas(i){if(!i)return[];const t=this.filter(e=>{var s;return e.target===i||typeof e.target=="object"&&((s=e.target)===null||s===void 0?void 0:s.canvas)===i});return t.forEach(e=>e.abort()),t}cancelByTarget(i){if(!i)return[];const t=this.filter(e=>e.target===i);return t.forEach(e=>e.abort()),t}};class jb{constructor(){w(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach(s=>{let[n,r]=s;this.on(n,r)}),()=>this.off(t);if(e){const s=t;return this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(e),()=>this.off(s,e)}return()=>!1}once(t,e){if(typeof t=="object"){const s=[];return Object.entries(t).forEach(n=>{let[r,o]=n;s.push(this.once(r,o))}),()=>s.forEach(n=>n())}if(e){const s=this.on(t,function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e.call(this,...r),s()});return s}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const s=this.__eventListeners[t],n=s.indexOf(e);n>-1&&s.splice(n,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(t===void 0)for(const s in this.__eventListeners)this._removeEventListener(s);else typeof t=="object"?Object.entries(t).forEach(s=>{let[n,r]=s;this._removeEventListener(n,r)}):this._removeEventListener(t,e)}fire(t,e){var s;if(!this.__eventListeners)return;const n=(s=this.__eventListeners[t])===null||s===void 0?void 0:s.concat();if(n)for(let r=0;r<n.length;r++)n[r].call(this,e||{})}}const wn=(i,t)=>{const e=i.indexOf(t);return e!==-1&&i.splice(e,1),i},Zs=i=>{if(i===0)return 1;switch(Math.abs(i)/Br){case 1:case 3:return 0;case 2:return-1}return Math.cos(i)},ti=i=>{if(i===0)return 0;const t=i/Br,e=Math.sign(i);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(i)};class k{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new k(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new k(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new k(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new k(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new k(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new k(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new k(this.x/t.x,this.y/t.y)}scalarDivide(t){return new k(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new k(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,s=this.y-t.y;return Math.sqrt(e*e+s*s)}midPointFrom(t){return this.lerp(t)}min(t){return new k(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new k(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,s=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=s}clone(){return new k(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vc;const s=ti(t),n=Zs(t),r=this.subtract(e);return new k(r.x*n-r.y*s,r.x*s+r.y*n).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new k(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const Vc=new k(0,0),Ho=i=>!!i&&Array.isArray(i._objects);function Vg(i){class t extends i{constructor(){super(...arguments),w(this,"_objects",[])}_onObjectAdded(s){}_onObjectRemoved(s){}_onStackOrderChanged(s){}add(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const o=this._objects.push(...n);return n.forEach(a=>this._onObjectAdded(a)),o}insertAt(s){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this._objects.splice(s,0,...r),r.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const s=this._objects,n=[];for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return o.forEach(l=>{const h=s.indexOf(l);h!==-1&&(s.splice(h,1),n.push(l),this._onObjectRemoved(l))}),n}forEachObject(s){this.getObjects().forEach((n,r,o)=>s(n,r,o))}getObjects(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return n.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...n))}item(s){return this._objects[s]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(s,n){return!!this._objects.includes(s)||!!n&&this._objects.some(r=>r instanceof t&&r.contains(s,!0))}complexity(){return this._objects.reduce((s,n)=>s+=n.complexity?n.complexity():0,0)}sendObjectToBack(s){return!(!s||s===this._objects[0])&&(wn(this._objects,s),this._objects.unshift(s),this._onStackOrderChanged(s),!0)}bringObjectToFront(s){return!(!s||s===this._objects[this._objects.length-1])&&(wn(this._objects,s),this._objects.push(s),this._onStackOrderChanged(s),!0)}sendObjectBackwards(s,n){if(!s)return!1;const r=this._objects.indexOf(s);if(r!==0){const o=this.findNewLowerIndex(s,r,n);return wn(this._objects,s),this._objects.splice(o,0,s),this._onStackOrderChanged(s),!0}return!1}bringObjectForward(s,n){if(!s)return!1;const r=this._objects.indexOf(s);if(r!==this._objects.length-1){const o=this.findNewUpperIndex(s,r,n);return wn(this._objects,s),this._objects.splice(o,0,s),this._onStackOrderChanged(s),!0}return!1}moveObjectTo(s,n){return s!==this._objects[n]&&(wn(this._objects,s),this._objects.splice(n,0,s),this._onStackOrderChanged(s),!0)}findNewLowerIndex(s,n,r){let o;if(r){o=n;for(let a=n-1;a>=0;--a)if(s.isOverlapping(this._objects[a])){o=a;break}}else o=n-1;return o}findNewUpperIndex(s,n,r){let o;if(r){o=n;for(let a=n+1;a<this._objects.length;++a)if(s.isOverlapping(this._objects[a])){o=a;break}}else o=n+1;return o}collectObjects(s){let{left:n,top:r,width:o,height:a}=s,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const h=[],u=new k(n,r),f=u.add(new k(o,a));for(let g=this._objects.length-1;g>=0;g--){const m=this._objects[g];m.selectable&&m.visible&&(l&&m.intersectsWithRect(u,f)||m.isContainedWithinRect(u,f)||l&&m.containsPoint(u)||l&&m.containsPoint(f))&&h.push(m)}return h}}return t}class Xg extends jb{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}}function Vo(i){return Ic().requestAnimationFrame(i)}function Fb(i){return Ic().cancelAnimationFrame(i)}let Lb=0;const yi=()=>Lb++,Ts=()=>{const i=Nn().createElement("canvas");if(!i||i.getContext===void 0)throw new Ls("Failed to create `canvas` element");return i},Rb=()=>Nn().createElement("img"),us=i=>{const t=Ts();return t.width=i.width,t.height=i.height,t},Yg=(i,t,e)=>i.toDataURL("image/".concat(t),e),zg=(i,t,e)=>new Promise((s,n)=>{i.toBlob(s,"image/".concat(t),e)}),re=i=>i*Bc,ei=i=>i/Bc,Ib=i=>i.every((t,e)=>t===Re[e]),Ie=(i,t,e)=>new k(i).transform(t,e),bs=i=>{const t=1/(i[0]*i[3]-i[1]*i[2]),e=[t*i[3],-t*i[1],-t*i[2],t*i[0],0,0],{x:s,y:n}=new k(i[4],i[5]).transform(e,!0);return e[4]=-s,e[5]=-n,e},_e=(i,t,e)=>[i[0]*t[0]+i[2]*t[1],i[1]*t[0]+i[3]*t[1],i[0]*t[2]+i[2]*t[3],i[1]*t[2]+i[3]*t[3],e?0:i[0]*t[4]+i[2]*t[5]+i[4],e?0:i[1]*t[4]+i[3]*t[5]+i[5]],Xc=(i,t)=>i.reduceRight((e,s)=>s&&e?_e(s,e,t):s||e,void 0)||Re.concat(),Ug=i=>{let[t,e]=i;return Math.atan2(e,t)},na=i=>{const t=Ug(i),e=Math.pow(i[0],2)+Math.pow(i[1],2),s=Math.sqrt(e),n=(i[0]*i[3]-i[2]*i[1])/s,r=Math.atan2(i[0]*i[2]+i[1]*i[3],e);return{angle:ei(t),scaleX:s,scaleY:n,skewX:ei(r),skewY:0,translateX:i[4]||0,translateY:i[5]||0}},Nr=function(i){return[1,0,0,1,i,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Vn(){let{angle:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=re(i),n=Zs(s),r=ti(s);return[n,r,-r,n,t?t-(n*t-r*e):0,e?e-(r*t+n*e):0]}const Yc=function(i){return[i,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,0,0]},Gg=i=>Math.tan(re(i)),$g=i=>[1,0,Gg(i),1,0,0],qg=i=>[1,Gg(i),0,1,0,0],Oa=i=>{let{scaleX:t=1,scaleY:e=1,flipX:s=!1,flipY:n=!1,skewX:r=0,skewY:o=0}=i,a=Yc(s?-t:t,n?-e:e);return r&&(a=_e(a,$g(r),!0)),o&&(a=_e(a,qg(o),!0)),a},Bb=i=>{const{translateX:t=0,translateY:e=0,angle:s=0}=i;let n=Nr(t,e);s&&(n=_e(n,Vn({angle:s})));const r=Oa(i);return Ib(r)||(n=_e(n,r)),n},Xo=function(i){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(s,n){if(t&&t.aborted)return n(new Eb("loadImage"));const r=Rb();let o;t&&(o=function(l){r.src="",n(l)},t.addEventListener("abort",o,{once:!0}));const a=function(){r.onload=r.onerror=null,o&&(t==null||t.removeEventListener("abort",o)),s(r)};i?(r.onload=a,r.onerror=function(){o&&(t==null||t.removeEventListener("abort",o)),n(new Ls("Error loading ".concat(r.src)))},e&&(r.crossOrigin=e),r.src=i):a()})},Ar=function(i){let{signal:t,reviver:e=Wo}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((s,n)=>{const r=[];t&&t.addEventListener("abort",n,{once:!0}),Promise.all(i.map(o=>tt.getClass(o.type).fromObject(o,{signal:t}).then(a=>(e(o,a),r.push(a),a)))).then(s).catch(o=>{r.forEach(a=>{a.dispose&&a.dispose()}),n(o)}).finally(()=>{t&&t.removeEventListener("abort",n)})})},Ea=function(i){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((e,s)=>{const n=[];t&&t.addEventListener("abort",s,{once:!0});const r=Object.values(i).map(a=>a&&a.type&&tt.has(a.type)?Ar([a],{signal:t}).then(l=>{let[h]=l;return n.push(h),h}):a),o=Object.keys(i);Promise.all(r).then(a=>a.reduce((l,h,u)=>(l[o[u]]=h,l),{})).then(e).catch(a=>{n.forEach(l=>{l.dispose&&l.dispose()}),s(a)}).finally(()=>{t&&t.removeEventListener("abort",s)})})},Xn=function(i){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((t,e)=>(e in i&&(t[e]=i[e]),t),{})},zc=(i,t)=>Object.keys(i).reduce((e,s)=>(t(i[s],s,i)&&(e[s]=i[s]),e),{}),qt=(i,t)=>parseFloat(Number(i).toFixed(t)),Dr=i=>"matrix("+i.map(t=>qt(t,Pt.NUM_FRACTION_DIGITS)).join(" ")+")",as=i=>!!i&&i.toLive!==void 0,kf=i=>!!i&&typeof i.toObject=="function",Mf=i=>!!i&&i.offsetX!==void 0&&"source"in i,Wi=i=>!!i&&"multiSelectionStacking"in i;function Kg(i){const t=i&&ys(i);let e=0,s=0;if(!i||!t)return{left:e,top:s};let n=i;const r=t.documentElement,o=t.body||{scrollLeft:0,scrollTop:0};for(;n&&(n.parentNode||n.host)&&(n=n.parentNode||n.host,n===t?(e=o.scrollLeft||r.scrollLeft||0,s=o.scrollTop||r.scrollTop||0):(e+=n.scrollLeft||0,s+=n.scrollTop||0),n.nodeType!==1||n.style.position!=="fixed"););return{left:e,top:s}}const ys=i=>i.ownerDocument||null,Jg=i=>{var t;return((t=i.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},Qg=function(i,t,e){let{width:s,height:n}=e,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;i.width=s,i.height=n,r>1&&(i.setAttribute("width",(s*r).toString()),i.setAttribute("height",(n*r).toString()),t.scale(r,r))},nc=(i,t)=>{let{width:e,height:s}=t;e&&(i.style.width=typeof e=="number"?"".concat(e,"px"):e),s&&(i.style.height=typeof s=="number"?"".concat(s,"px"):s)};function Pf(i){return i.onselectstart!==void 0&&(i.onselectstart=()=>!1),i.style.userSelect=He,i}class Zg{constructor(t){w(this,"_originalCanvasStyle",void 0),w(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=(s=t)&&s.getContext!==void 0?t:t&&Nn().getElementById(t)||Ts();var s;if(e.hasAttribute("data-fabric"))throw new Ls("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:s}=t;const{el:n}=this.lower;n.classList.remove("lower-canvas"),n.removeAttribute("data-fabric"),n.setAttribute("width","".concat(e)),n.setAttribute("height","".concat(s)),n.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:s,ctx:n}=this.lower;Qg(s,n,t,e)}setCSSDimensions(t){nc(this.lower.el,t)}calcOffset(){return function(t){var e;const s=t&&ys(t),n={left:0,top:0};if(!s)return n;const r=((e=Jg(t))===null||e===void 0?void 0:e.getComputedStyle(t,null))||{};n.left+=parseInt(r.borderLeftWidth,10)||0,n.top+=parseInt(r.borderTopWidth,10)||0,n.left+=parseInt(r.paddingLeft,10)||0,n.top+=parseInt(r.paddingTop,10)||0;let o={left:0,top:0};const a=s.documentElement;t.getBoundingClientRect!==void 0&&(o=t.getBoundingClientRect());const l=Kg(t);return{left:o.left+l.left-(a.clientLeft||0)+n.left,top:o.top+l.top-(a.clientTop||0)+n.top}}(this.lower.el)}dispose(){Bs().dispose(this.lower.el),delete this.lower}}const Nb={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Re]};class Wr extends Vg(Xg){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return Wr.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new Zg(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];const r=super.insertAt(t,...s);return s.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),r}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(vi("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Bg():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,e){return this.setDimensions({width:t},e)}setHeight(t,e){return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:s=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const n=S({width:this.width,height:this.height},t);this.elements.setDimensions(n,this.getRetinaScaling()),this.hasLostContext=!0,this.width=n.width,this.height=n.height}s||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,e){this._setDimensionsImpl(t,e),e&&e.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const s=t,n=[...this.viewportTransform],r=Ie(t,bs(n));n[0]=e,n[3]=e;const o=Ie(r,n);n[4]+=s.x-o.x,n[5]+=s.y-o.y,this.setViewportTransform(n)}setZoom(t){this.zoomToPoint(new k(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new k(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Vo(()=>this.renderAndReset()))}calcViewportBoundaries(){const t=this.width,e=this.height,s=bs(this.viewportTransform),n=Ie({x:0,y:0},s),r=Ie({x:t,y:e},s),o=n.min(r),a=n.max(r);return this.vptCoords={tl:o,tr:new k(a.x,o.y),bl:new k(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(Fb(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const s=this.viewportTransform,n=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),n&&(n._set("canvas",this),n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,n)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const s=this.viewportTransform;t.save(),t.transform(...s),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let s=0,n=e.length;s<n;++s)e[s]&&e[s].render(t)}_renderBackgroundOrOverlay(t,e){const s=this["".concat(e,"Color")],n=this["".concat(e,"Image")],r=this.viewportTransform,o=this["".concat(e,"Vpt")];if(!s&&!n)return;const a=as(s);if(s){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=a?s.toLive(t):s,o&&t.transform(...r),a){t.transform(1,0,0,1,s.offsetX||0,s.offsetY||0);const l=s.gradientTransform||s.patternTransform;l&&t.transform(...l)}t.fill(),t.restore()}if(n){t.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&t.transform(...r),n.render(t),this.skipOffscreen=l,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new k(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new k(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new k(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new k(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new k(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Ie(this.getCenterPoint(),bs(this.viewportTransform))}_centerObject(t,e){t.setXY(e,xt,xt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const s=this.clipPath,n=s&&!s.excludeFromExport?this._toObject(s,t,e):null;return S(S(S({version:sc},Xn(this,e)),{},{objects:this._objects.filter(r=>!r.excludeFromExport).map(r=>this._toObject(r,t,e))},this.__serializeBgOverlay(t,e)),n?{clipPath:n}:null)}_toObject(t,e,s){let n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);const r=t[e](s);return this.includeDefaultValues||(t.includeDefaultValues=!!n),r}__serializeBgOverlay(t,e){const s={},n=this.backgroundImage,r=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return as(o)?o.excludeFromExport||(s.background=o.toObject(e)):o&&(s.background=o),as(a)?a.excludeFromExport||(s.overlay=a.toObject(e)):a&&(s.overlay=a),n&&!n.excludeFromExport&&(s.backgroundImage=this._toObject(n,t,e)),r&&!r.excludeFromExport&&(s.overlayImage=this._toObject(r,t,e)),s}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const s=[];return this._setSVGPreamble(s,t),this._setSVGHeader(s,t),this.clipPath&&s.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(s,"background"),this._setSVGBgOverlayImage(s,"backgroundImage",e),this._setSVGObjects(s,e),this.clipPath&&s.push(`</g>
`),this._setSVGBgOverlayColor(s,"overlay"),this._setSVGBgOverlayImage(s,"overlayImage",e),s.push("</svg>"),s.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const s=e.width||"".concat(this.width),n=e.height||"".concat(this.height),r=Pt.NUM_FRACTION_DIGITS,o=e.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(qt(-l[4]/l[0],r)," ").concat(qt(-l[5]/l[3],r)," ").concat(qt(this.width/l[0],r)," ").concat(qt(this.height/l[3],r),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',s,'" ','height="',n,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",sc,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(yi()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(t=>{const e=this["".concat(t,"Color")];if(as(e)){const s=this["".concat(t,"Vpt")],n=this.viewportTransform,r={isType:()=>!1,width:this.width/(s?n[0]:1),height:this.height/(s?n[3]:1)};return e.toSVG(r,{additionalTransform:s?Dr(n):""})}}).join("")}createSVGFontFacesMarkup(){const t=[],e={},s=Pt.fontPaths;this._objects.forEach(function r(o){t.push(o),Ho(o)&&o._objects.forEach(r)}),t.forEach(r=>{if(!(o=r)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=r;!e[l]&&s[l]&&(e[l]=!0,a&&Object.values(a).forEach(h=>{Object.values(h).forEach(u=>{let{fontFamily:f=""}=u;!e[f]&&s[f]&&(e[f]=!0)})}))});const n=Object.keys(e).map(r=>`		@font-face {
			font-family: '`.concat(r,`';
			src: url('`).concat(s[r],`');
		}
`)).join("");return n?`	<style type="text/css"><![CDATA[
`.concat(n,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject(s=>{s.excludeFromExport||this._setSVGObject(t,s,e)})}_setSVGObject(t,e,s){t.push(e.toSVG(s))}_setSVGBgOverlayImage(t,e,s){const n=this[e];n&&!n.excludeFromExport&&n.toSVG&&t.push(n.toSVG(s))}_setSVGBgOverlayColor(t,e){const s=this["".concat(e,"Color")];if(s)if(as(s)){const n=s.repeat||"",r=this.width,o=this.height,a=this["".concat(e,"Vpt")]?Dr(bs(this.viewportTransform)):"";t.push('<rect transform="'.concat(a," translate(").concat(r/2,",").concat(o/2,')" x="').concat(s.offsetX-r/2,'" y="').concat(s.offsetY-o/2,'" width="').concat(n!=="repeat-y"&&n!=="no-repeat"||!Mf(s)?r:s.source.width,'" height="').concat(n!=="repeat-x"&&n!=="no-repeat"||!Mf(s)?o:s.source.height,'" fill="url(#SVGID_').concat(s.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',s,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:s}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Ls("`json` is undefined"));const n=typeof t=="string"?JSON.parse(t):t,{objects:r=[],backgroundImage:o,background:a,overlayImage:l,overlay:h,clipPath:u}=n,f=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Ar(r,{reviver:e,signal:s}),Ea({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:h,clipPath:u},{signal:s})]).then(g=>{let[m,v]=g;return this.clear(),this.add(...m),this.set(n),this.set(v),this.renderOnAddRemove=f,this})}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=us(this);return new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:s=1,multiplier:n=1,enableRetinaScaling:r=!1}=t,o=n*(r?this.getRetinaScaling():1);return Yg(this.toCanvasElement(o,t),e,s)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:s=1,multiplier:n=1,enableRetinaScaling:r=!1}=t,o=n*(r?this.getRetinaScaling():1);return zg(this.toCanvasElement(o,t),e,s)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:s,left:n,top:r,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(e||this.width)*t,l=(s||this.height)*t,h=this.getZoom(),u=this.width,f=this.height,g=this.skipControlsDrawing,m=h*t,v=this.viewportTransform,b=[m,0,0,m,(v[4]-(n||0))*t,(v[5]-(r||0))*t],C=this.enableRetinaScaling,O=us({width:a,height:l}),D=o?this._objects.filter(L=>o(L)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=b,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(O.getContext("2d"),D),this.viewportTransform=v,this.width=u,this.height=f,this.calcViewportBoundaries(),this.enableRetinaScaling=C,this.skipControlsDrawing=g,O}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),ia.cancelByCanvas(this),this.disposed=!0,new Promise((t,e)=>{const s=()=>{this.destroy(),t(!0)};s.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=s:s()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(t=>t.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}w(Wr,"ownDefaults",Nb);const Wb=["touchstart","touchmove","touchend"],Hb=i=>{const t=Kg(i.target),e=function(s){const n=s.changedTouches;return n&&n[0]?n[0]:s}(i);return new k(e.clientX+t.left,e.clientY+t.top)},rc=i=>Wb.includes(i.type)||i.pointerType==="touch",jf=i=>{i.preventDefault(),i.stopPropagation()},Js=i=>{let t=0,e=0,s=0,n=0;for(let r=0,o=i.length;r<o;r++){const{x:a,y:l}=i[r];(a>s||!r)&&(s=a),(a<t||!r)&&(t=a),(l>n||!r)&&(n=l),(l<e||!r)&&(e=l)}return{left:t,top:e,width:s-t,height:n-e}},Vb=["translateX","translateY","scaleX","scaleY"],Xb=(i,t)=>ra(i,_e(t,i.calcOwnMatrix())),ra=(i,t)=>{const e=na(t),{translateX:s,translateY:n,scaleX:r,scaleY:o}=e,a=Jt(e,Vb),l=new k(s,n);i.flipX=!1,i.flipY=!1,Object.assign(i,a),i.set({scaleX:r,scaleY:o}),i.setPositionByOrigin(l,xt,xt)},Yb=i=>{i.scaleX=1,i.scaleY=1,i.skewX=0,i.skewY=0,i.flipX=!1,i.flipY=!1,i.rotate(0)},tp=i=>({scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,angle:i.angle,left:i.left,flipX:i.flipX,flipY:i.flipY,top:i.top}),Uc=(i,t,e)=>{const s=i/2,n=t/2,r=[new k(-s,-n),new k(s,-n),new k(-s,n),new k(s,n)].map(a=>a.transform(e)),o=Js(r);return new k(o.width,o.height)},Aa=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Re;return _e(bs(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Re),i)},Pn=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Re,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Re;return i.transform(Aa(t,e))},zb=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Re,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Re;return i.transform(Aa(t,e),!0)},Ub=(i,t,e)=>{const s=Aa(t,e);return ra(i,_e(s,i.calcOwnMatrix())),s},ep=(i,t)=>{var e;const{transform:{target:s}}=t;(e=s.canvas)===null||e===void 0||e.fire("object:".concat(i),S(S({},t),{},{target:s})),s.fire(i,t)},Gb={left:-.5,top:-.5,center:0,bottom:.5,right:.5},ae=i=>typeof i=="string"?Gb[i]:i-.5,oa="not-allowed";function sp(i){return ae(i.originX)===ae(xt)&&ae(i.originY)===ae(xt)}function Ff(i){return .5-ae(i)}const Cs=(i,t)=>i[t],ip=(i,t,e,s)=>({e:i,transform:t,pointer:new k(e,s)});function np(i,t){const e=i.getTotalAngle()+ei(Math.atan2(t.y,t.x))+360;return Math.round(e%360/45)}function Gc(i,t,e,s,n){var r;let{target:o,corner:a}=i;const l=o.controls[a],h=((r=o.canvas)===null||r===void 0?void 0:r.getZoom())||1,u=o.padding/h,f=function(g,m,v,b){const C=g.getRelativeCenterPoint(),O=v!==void 0&&b!==void 0?g.translateToGivenOrigin(C,xt,xt,v,b):new k(g.left,g.top);return(g.angle?m.rotate(-re(g.angle),C):m).subtract(O)}(o,new k(s,n),t,e);return f.x>=u&&(f.x-=u),f.x<=-u&&(f.x+=u),f.y>=u&&(f.y-=u),f.y<=u&&(f.y+=u),f.x-=l.offsetX,f.y-=l.offsetY,f}const $b=(i,t,e,s)=>{const{target:n,offsetX:r,offsetY:o}=t,a=e-r,l=s-o,h=!Cs(n,"lockMovementX")&&n.left!==a,u=!Cs(n,"lockMovementY")&&n.top!==l;return h&&n.set(Lt,a),u&&n.set(We,l),(h||u)&&ep(Ng,ip(i,t,e,s)),h||u},Lf={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},El=(i,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+(t-i)*(2/3-e)*6:i),Rf=(i,t,e,s)=>{i/=255,t/=255,e/=255;const n=Math.max(i,t,e),r=Math.min(i,t,e);let o,a;const l=(n+r)/2;if(n===r)o=a=0;else{const h=n-r;switch(a=l>.5?h/(2-n-r):h/(n+r),n){case i:o=(t-e)/h+(t<e?6:0);break;case t:o=(e-i)/h+2;break;case e:o=(i-t)/h+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),s]},If=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(i)/(i.endsWith("%")?100:1)},ho=i=>Math.min(Math.round(i),255).toString(16).toUpperCase().padStart(2,"0"),Bf=i=>{let[t,e,s,n=1]=i;const r=Math.round(.3*t+.59*e+.11*s);return[r,r,r,n]};class Nt{constructor(t){if(w(this,"isUnrecognised",!1),t)if(t instanceof Nt)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,s,n,r=1]=t;this.setSource([e,s,n,r])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return(t=t.toLowerCase())in Lf&&(t=Lf[t]),t==="transparent"?[255,255,255,0]:Nt.sourceFromHex(t)||Nt.sourceFromRgb(t)||Nt.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,s]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(s,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,s]=Rf(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(s,"%)")}toHsla(){const[t,e,s,n]=Rf(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(s,"%,").concat(n,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,s,n]=this.getSource();return"".concat(ho(t)).concat(ho(e)).concat(ho(s)).concat(ho(Math.round(255*n)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(Bf(this.getSource())),this}toBlackWhite(t){const[e,,,s]=Bf(this.getSource()),n=e<(t||127)?0:255;return this.setSource([n,n,n,s]),this}overlayWith(t){t instanceof Nt||(t=new Nt(t));const e=this.getSource(),s=t.getSource(),[n,r,o]=e.map((a,l)=>Math.round(.5*a+.5*s[l]));return this.setSource([n,r,o,e[3]]),this}static fromRgb(t){return Nt.fromRgba(t)}static fromRgba(t){return new Nt(Nt.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(e){const[s,n,r]=e.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[s,n,r,If(e[4])]}}static fromHsl(t){return Nt.fromHsla(t)}static fromHsla(t){return new Nt(Nt.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!e)return;const s=(Nt.parseAngletoDegrees(e[1])%360+360)%360/360,n=parseFloat(e[2])/100,r=parseFloat(e[3])/100;let o,a,l;if(n===0)o=a=l=r;else{const h=r<=.5?r*(n+1):r+n-r*n,u=2*r-h;o=El(u,h,s+1/3),a=El(u,h,s),l=El(u,h,s-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),If(e[4])]}static fromHex(t){return new Nt(Nt.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let s;s=e.length<=4?e.split("").map(l=>l+l):e.match(/.{2}/g);const[n,r,o,a=255]=s.map(l=>parseInt(l,16));return[n,r,o,a/255]}}static parseAngletoDegrees(t){const e=t.toLowerCase(),s=parseFloat(e);return e.includes("rad")?ei(s):e.includes("turn")?360*s:s}}const jn=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nc;const e=/\D{0,2}$/.exec(i),s=parseFloat(i),n=Pt.DPI;switch(e==null?void 0:e[0]){case"mm":return s*n/25.4;case"cm":return s*n/2.54;case"in":return s*n;case"pt":return s*n/72;case"pc":return s*n/72*12;case"em":return s*t;default:return s}},qb=i=>{const[t,e]=i.trim().split(" "),[s,n]=(r=t)&&r!==He?[r.slice(1,4),r.slice(5,8)]:r===He?[r,r]:["Mid","Mid"];var r;return{meetOrSlice:e||"meet",alignX:s,alignY:n}},kr=function(i,t){let e,s,n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)e="url(#SVGID_".concat(t.id,")");else{const r=new Nt(t),o=r.getAlpha();e=r.toRgb(),o!==1&&(s=o.toString())}else e="none";return n?"".concat(i,": ").concat(e,"; ").concat(s?"".concat(i,"-opacity: ").concat(s,"; "):""):"".concat(i,'="').concat(e,'" ').concat(s?"".concat(i,'-opacity="').concat(s,'" '):"")};class rp{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",s=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):He,r=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",h=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",f=t?"":this.getSvgFilter(),g=kr(ue,this.fill);return[kr(Ve,this.stroke),"stroke-width: ",s,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",r,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",g,"fill-rule: ",e,"; ","opacity: ",h,";",f,u].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=t?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'.concat(Dr(s));return"".concat(n).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),r=t.indexOf("COMMON_PARTS");return t[r]=n,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:s,withShadow:n,additionalTransform:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=e?"":'style="'.concat(this.getSvgStyles(),'" '),a=n?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,h=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,f=this.stroke,g=this.fill,m=this.shadow,v=[],b=t.indexOf("COMMON_PARTS");let C;l&&(l.clipPathId="CLIPPATH_".concat(yi()),C='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(s),`</clipPath>
`)),u&&v.push("<g ",a,this.getSvgCommons(),` >
`),v.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const O=[o,h,e?"":this.addPaintOrder()," ",r?'transform="'.concat(r,'" '):""].join("");return t[b]=O,as(g)&&v.push(g.toSVG(this)),as(f)&&v.push(f.toSVG(this)),m&&v.push(m.toSVG(this)),l&&v.push(C),v.push(t.join("")),v.push(`</g>
`),u&&v.push(`</g>
`),s?s(v.join("")):v.join("")}addPaintOrder(){return this.paintFirst!==ue?' paint-order="'.concat(this.paintFirst,'" '):""}}function Da(i){return new RegExp("^("+i.join("|")+")\\b","i")}var Nf;const Ji=String.raw(Nf||(Nf=Ci(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),Kb=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Ji+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Ji+"))?\\s+(.*)"),Jb={cx:Lt,x:Lt,r:"radius",cy:We,y:We,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Al="font-size",Dl="clip-path";Da(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Da(["symbol","image","marker","pattern","view","svg"]);const Wf=Da(["symbol","g","a","svg","clipPath","defs"]),Qb=new k(1,0),op=new k,ap=(i,t)=>i.rotate(t),oc=(i,t)=>new k(t).subtract(i),ac=i=>i.distanceFrom(op),lc=(i,t)=>Math.atan2(mr(i,t),tx(i,t)),Zb=i=>lc(Qb,i),$c=i=>i.eq(op)?i:i.scalarDivide(ac(i)),lp=function(i){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return $c(new k(-i.y,i.x).scalarMultiply(t?1:-1))},mr=(i,t)=>i.x*t.y-i.y*t.x,tx=(i,t)=>i.x*t.x+i.y*t.y,Hf=(i,t,e)=>{if(i.eq(t)||i.eq(e))return!0;const s=mr(t,e),n=mr(t,i),r=mr(e,i);return s>=0?n>=0&&r<=0:!(n<=0&&r>=0)},Vf="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Xf=new RegExp("(?:\\s|^)"+Vf+Vf+"("+Ji+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Qs{constructor(t){const e=typeof t=="string"?Qs.parseShadow(t):t;Object.assign(this,Qs.ownDefaults,e),this.id=yi()}static parseShadow(t){const e=t.trim(),[,s=0,n=0,r=0]=(Xf.exec(e)||[]).map(o=>parseFloat(o)||0);return{color:(e.replace(Xf,"")||"rgb(0,0,0)").trim(),offsetX:s,offsetY:n,blur:r}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=ap(new k(this.offsetX,this.offsetY),re(-t.angle)),s=new Nt(this.color);let n=40,r=40;return t.width&&t.height&&(n=100*qt((Math.abs(e.x)+this.blur)/t.width,Pt.NUM_FRACTION_DIGITS)+20,r=100*qt((Math.abs(e.y)+this.blur)/t.height,Pt.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(r,'%" height="').concat(100+2*r,'%" x="-').concat(n,'%" width="').concat(100+2*n,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(qt(this.blur?this.blur/2:0,Pt.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(qt(e.x,Pt.NUM_FRACTION_DIGITS),'" dy="').concat(qt(e.y,Pt.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(s.toRgb(),'" flood-opacity="').concat(s.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},e=Qs.ownDefaults;return this.includeDefaultValues?t:zc(t,(s,n)=>s!==e[n])}static async fromObject(t){return new this(t)}}w(Qs,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),w(Qs,"type","shadow"),tt.setClass(Qs,"shadow");const Bn=(i,t,e)=>Math.max(i,Math.min(t,e)),ex=[We,Lt,Xe,hs,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Wn,Hn],ii=[ue,Ve,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],sx={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Lt,originY:We,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:ue,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},ix=(i,t,e,s)=>-e*Math.cos(i/s*Br)+e+t,nx=()=>!1;class qc{constructor(t){let{startValue:e,byValue:s,duration:n=500,delay:r=0,easing:o=ix,onStart:a=Wo,onChange:l=Wo,onComplete:h=Wo,abort:u=nx,target:f}=t;w(this,"_state","pending"),w(this,"durationProgress",0),w(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=n,this.delay=r,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=h,this._abort=u,this.target=f,this.startValue=e,this.byValue=s,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Vo(t),this.delay):Vo(t)}tick(t){const e=(t||+new Date)-this.startTime,s=Math.min(e,this.duration);this.durationProgress=s/this.duration;const{value:n,valueProgress:r}=this.calculate(s);this.value=Object.freeze(n),this.valueProgress=r,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Vo(this.tick)))}register(){ia.push(this)}unregister(){ia.remove(this)}abort(){this._state="aborted",this.unregister()}}const rx=["startValue","endValue"];class ox extends qc{constructor(t){let{startValue:e=0,endValue:s=100}=t;super(S(S({},Jt(t,rx)),{},{startValue:e,byValue:s-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const ax=["startValue","endValue"];class lx extends qc{constructor(t){let{startValue:e=[0],endValue:s=[100]}=t;super(S(S({},Jt(t,ax)),{},{startValue:e,byValue:s.map((n,r)=>n-e[r])}))}calculate(t){const e=this.startValue.map((s,n)=>this.easing(t,s,this.byValue[n],this.duration,n));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const cx=["startValue","endValue","easing","onChange","onComplete","abort"],hx=(i,t,e,s)=>t+e*(1-Math.cos(i/s*Br)),kl=i=>i&&((t,e,s)=>i(new Nt(t).toRgba(),e,s));class ux extends qc{constructor(t){let{startValue:e,endValue:s,easing:n=hx,onChange:r,onComplete:o,abort:a}=t,l=Jt(t,cx);const h=new Nt(e).getSource(),u=new Nt(s).getSource();super(S(S({},l),{},{startValue:h,byValue:u.map((f,g)=>f-h[g]),easing:n,onChange:kl(r),onComplete:kl(o),abort:kl(a)}))}calculate(t){const[e,s,n,r]=this.startValue.map((a,l)=>this.easing(t,a,this.byValue[l],this.duration,l)),o=[...[e,s,n].map(Math.round),Bn(0,r,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function cp(i){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(i)?new lx(i):new ox(i);return t.start(),t}function fx(i){const t=new ux(i);return t.start(),t}class Zt{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some(e=>e.eq(t))}append(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return this.points=this.points.concat(e.filter(n=>!this.includes(n))),this}static isPointContained(t,e,s){let n=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(e.eq(s))return t.eq(e);if(e.x===s.x)return t.x===e.x&&(n||t.y>=Math.min(e.y,s.y)&&t.y<=Math.max(e.y,s.y));if(e.y===s.y)return t.y===e.y&&(n||t.x>=Math.min(e.x,s.x)&&t.x<=Math.max(e.x,s.x));{const r=oc(e,s),o=oc(e,t).divide(r);return n?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(t,e){const s=new k(t).setX(Math.min(t.x-1,...e.map(r=>r.x)));let n=0;for(let r=0;r<e.length;r++){const o=this.intersectSegmentSegment(e[r],e[(r+1)%e.length],t,s);if(o.includes(t))return!0;n+=+(o.status==="Intersection")}return n%2==1}static intersectLineLine(t,e,s,n){let r=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=e.x-t.x,l=e.y-t.y,h=n.x-s.x,u=n.y-s.y,f=t.x-s.x,g=t.y-s.y,m=h*g-u*f,v=a*g-l*f,b=u*a-h*l;if(b!==0){const C=m/b,O=v/b;return(r||0<=C&&C<=1)&&(o||0<=O&&O<=1)?new Zt("Intersection").append(new k(t.x+C*a,t.y+C*l)):new Zt}if(m===0||v===0){const C=r||o||Zt.isPointContained(t,s,n)||Zt.isPointContained(e,s,n)||Zt.isPointContained(s,t,e)||Zt.isPointContained(n,t,e);return new Zt(C?"Coincident":void 0)}return new Zt("Parallel")}static intersectSegmentLine(t,e,s,n){return Zt.intersectLineLine(t,e,s,n,!1,!0)}static intersectSegmentSegment(t,e,s,n){return Zt.intersectLineLine(t,e,s,n,!1,!1)}static intersectLinePolygon(t,e,s){let n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const r=new Zt,o=s.length;for(let a,l,h,u=0;u<o;u++){if(a=s[u],l=s[(u+1)%o],h=Zt.intersectLineLine(t,e,a,l,n,!1),h.status==="Coincident")return h;r.append(...h.points)}return r.points.length>0&&(r.status="Intersection"),r}static intersectSegmentPolygon(t,e,s){return Zt.intersectLinePolygon(t,e,s,!1)}static intersectPolygonPolygon(t,e){const s=new Zt,n=t.length,r=[];for(let o=0;o<n;o++){const a=t[o],l=t[(o+1)%n],h=Zt.intersectSegmentPolygon(a,l,e);h.status==="Coincident"?(r.push(h),s.append(a,l)):s.append(...h.points)}return r.length>0&&r.length===t.length?new Zt("Coincident"):(s.points.length>0&&(s.status="Intersection"),s)}static intersectPolygonRectangle(t,e,s){const n=e.min(s),r=e.max(s),o=new k(r.x,n.y),a=new k(n.x,r.y);return Zt.intersectPolygonPolygon(t,[n,o,r,a])}}class dx extends Xg{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?Ie(t,this.group.calcTransformMatrix()):t}setXY(t,e,s){this.group&&(t=Ie(t,bs(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,s)}getRelativeXY(){return new k(this.left,this.top)}setRelativeXY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,e,s)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:e,br:s,bl:n}=this.aCoords||(this.aCoords=this.calcACoords()),r=[t,e,s,n];if(this.group){const o=this.group.calcTransformMatrix();return r.map(a=>Ie(a,o))}return r}intersectsWithRect(t,e){return Zt.intersectPolygonRectangle(this.getCoords(),t,e).status==="Intersection"}intersectsWithObject(t){const e=Zt.intersectPolygonPolygon(this.getCoords(),t.getCoords());return e.status==="Intersection"||e.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every(e=>t.containsPoint(e))}isContainedWithinRect(t,e){const{left:s,top:n,width:r,height:o}=this.getBoundingRect();return s>=t.x&&s+r<=e.x&&n>=t.y&&n+o<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return Zt.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.getCoords().some(s=>s.x<=e.x&&s.x>=t.x&&s.y<=e.y&&s.y>=t.y)||!!this.intersectsWithRect(t,e)||this.containsPoint(t.midPointFrom(e))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return this.intersectsWithRect(t,e)?!0:this.getCoords().every(s=>(s.x>=e.x||s.x<=t.x)&&(s.y>=e.y||s.y<=t.y))&&this.containsPoint(t.midPointFrom(e))}getBoundingRect(){return Js(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(Xe,t),this._set(hs,t),this.setCoords()}scaleToWidth(t){const e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)}scaleToHeight(t){const e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?ei(Ug(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||Re.concat()}calcACoords(){const t=Vn({angle:this.angle}),{x:e,y:s}=this.getRelativeCenterPoint(),n=Nr(e,s),r=_e(n,t),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:Ie({x:-a,y:-l},r),tr:Ie({x:a,y:-l},r),bl:Ie({x:-a,y:l},r),br:Ie({x:a,y:l},r)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=[];return!t&&this.group&&(e=this.group.transformMatrixKey(t)),e.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,ae(this.originX),ae(this.originY)),e}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const s=this.transformMatrixKey(t),n=this.matrixCache;return n&&n.key.every((r,o)=>r===s[o])?n.value:(this.group&&(e=_e(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:s,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const s=this.getRelativeCenterPoint(),n={angle:this.angle,translateX:s.x,translateY:s.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},r=Bb(n);return this.ownMatrixCache={key:t,value:r},r}_getNonTransformedDimensions(){return new k(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=S({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),s=e.strokeWidth;let n=s,r=0;this.strokeUniform&&(n=0,r=s);const o=e.width+n,a=e.height+n;let l;return l=e.skewX===0&&e.skewY===0?new k(o*e.scaleX,a*e.scaleY):Uc(o,a,Oa(e)),l.scalarAdd(r)}translateToGivenOrigin(t,e,s,n,r){let o=t.x,a=t.y;const l=ae(n)-ae(e),h=ae(r)-ae(s);if(l||h){const u=this._getTransformedDimensions();o+=l*u.x,a+=h*u.y}return new k(o,a)}translateToCenterPoint(t,e,s){if(e===xt&&s===xt)return t;const n=this.translateToGivenOrigin(t,e,s,xt,xt);return this.angle?n.rotate(re(this.angle),t):n}translateToOriginPoint(t,e,s){const n=this.translateToGivenOrigin(t,xt,xt,e,s);return this.angle?n.rotate(re(this.angle),t):n}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?Ie(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new k(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,s){const n=this.translateToCenterPoint(t,e,s),r=this.translateToOriginPoint(n,this.originX,this.originY);this.set({left:r.x,top:r.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Lt,We)}}const gx=["type"],px=["extraParam"];let Ys=class Yo extends dx{static getDefaults(){return Yo.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){vi("warn","Setting type has no effect",t)}constructor(t){super(),w(this,"_cacheContext",null),Object.assign(this,Yo.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Ts(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,s=t.height,n=Pt.maxCacheSideLimit,r=Pt.minCacheSideLimit;if(e<=n&&s<=n&&e*s<=Pt.perfLimitSizeTotal)return e<r&&(t.width=r),s<r&&(t.height=r),t;const o=e/s,[a,l]=pr.limitDimsByArea(o),h=Bn(r,a,n),u=Bn(r,l,n);return e>h&&(t.zoomX/=e/h,t.width=h,t.capped=!0),s>u&&(t.zoomY/=s/u,t.height=u,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),s=e.x*t.x/this.scaleX,n=e.y*t.y/this.scaleY;return{width:Math.ceil(s+2),height:Math.ceil(n+2),zoomX:t.x,zoomY:t.y,x:s,y:n}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,{width:s,height:n,zoomX:r,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),h=s!==t.width||n!==t.height,u=this.zoomX!==r||this.zoomY!==o;if(!t||!e)return!1;if(h||u){s!==t.width||n!==t.height?(t.width=s,t.height=n):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height));const f=a/2,g=l/2;return this.cacheTranslationX=Math.round(t.width/2-f)+f,this.cacheTranslationY=Math.round(t.height/2-g)+g,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(r,o),this.zoomX=r,this.zoomY=o,!0}return!1}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,s=this.calcTransformMatrix(!e);t.transform(s[0],s[1],s[2],s[3],s[4],s[5])}getObjectScaling(){if(!this.group)return new k(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=na(this.calcTransformMatrix());return new k(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),s=this.getCanvasRetinaScaling();return t.scalarMultiply(e*s)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){t!==Xe&&t!==hs||(e=this._constrainScale(e)),t===Xe&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t!=="shadow"||!e||e instanceof Qs||(e=new Qs(e));const s=this[t]!==e;return this[t]=e,s&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||s&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t,!1,{}),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){if(t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:e,zoomY:s,cacheTranslationX:n,cacheTranslationY:r}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,t.forClipping,{zoomX:e,zoomY:s,cacheTranslationX:n,cacheTranslationY:r,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Ve&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e,s){t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",t.setTransform(1,0,0,1,0,0),t.drawImage(s,0,0),t.restore()}drawObject(t,e,s){const n=this.fill,r=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath,s),this.fill=n,this.stroke=r}createClipPathLayer(t,e){const s=us(e),n=s.getContext("2d");if(n.translate(e.cacheTranslationX,e.cacheTranslationY),n.scale(e.zoomX,e.zoomY),t._cacheCanvas=s,e.parentClipPaths.forEach(r=>{r.transform(n)}),e.parentClipPaths.push(t),t.absolutePositioned){const r=bs(this.calcTransformMatrix());n.transform(r[0],r[1],r[2],r[3],r[4],r[5])}return t.transform(n),t.drawObject(n,!0,e),s}_drawClipPath(t,e,s){if(!e)return;e._transformDone=!0;const n=this.createClipPathLayer(e,s);this.drawClipPathOnCache(t,e,n)}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const e=this._cacheCanvas,s=this._cacheContext;return!(!e||!s||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(e&&s&&!t&&(s.save(),s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,e.width,e.height),s.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const s=e.stroke;s&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,as(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?this._applyPatternForTransformedGradient(t,s):(t.strokeStyle=s.toLive(t),this._applyPatternGradientTransform(t,s)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:s}=e;s&&(as(s)?(t.fillStyle=s.toLive(t),this._applyPatternGradientTransform(t,s)):t.fillStyle=s)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&e.length!==0&&t.setLineDash(e)}_setShadow(t){if(!this.shadow)return;const e=this.shadow,s=this.canvas,n=this.getCanvasRetinaScaling(),[r,,,o]=(s==null?void 0:s.viewportTransform)||Re,a=r*n,l=o*n,h=e.nonScaling?new k(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*Pt.browserShadowBlurConstant*(a+l)*(h.x+h.y)/4,t.shadowOffsetX=e.offsetX*a*h.x,t.shadowOffsetY=e.offsetY*l*h.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!as(e))return{offsetX:0,offsetY:0};const s=e.gradientTransform||e.patternTransform,n=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,n,r):t.transform(1,0,0,1,n,r),s&&t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),{offsetX:n,offsetY:r}}_renderPaintInOrder(t){this.paintFirst===Ve?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var s;const n=this._limitCacheSize(this._getCacheCanvasDimensions()),r=this.getCanvasRetinaScaling(),o=n.x/this.scaleX/r,a=n.y/this.scaleY/r,l=us({width:Math.ceil(o),height:Math.ceil(a)}),h=l.getContext("2d");h&&(h.beginPath(),h.moveTo(0,0),h.lineTo(o,0),h.lineTo(o,a),h.lineTo(0,a),h.closePath(),h.translate(o/2,a/2),h.scale(n.zoomX/this.scaleX/r,n.zoomY/this.scaleY/r),this._applyPatternGradientTransform(h,e),h.fillStyle=e.toLive(t),h.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(r*this.scaleX/n.zoomX,r*this.scaleY/n.zoomY),t.strokeStyle=(s=h.createPattern(l,"no-repeat"))!==null&&s!==void 0?s:"")}_findCenterFromElement(){return new k(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(tt.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=tp(this),s=this.group,n=this.shadow,r=Math.abs,o=t.enableRetinaScaling?Bg():1,a=(t.multiplier||1)*o,l=t.canvasProvider||(D=>new Wr(D,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&Yb(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&Ub(this,this.getViewportTransform()),this.setCoords();const h=Ts(),u=this.getBoundingRect(),f=this.shadow,g=new k;if(f){const D=f.blur,L=f.nonScaling?new k(1,1):this.getObjectScaling();g.x=2*Math.round(r(f.offsetX)+D)*r(L.x),g.y=2*Math.round(r(f.offsetY)+D)*r(L.y)}const m=u.width+g.x,v=u.height+g.y;h.width=Math.ceil(m),h.height=Math.ceil(v);const b=l(h);t.format==="jpeg"&&(b.backgroundColor="#fff"),this.setPositionByOrigin(new k(b.width/2,b.height/2),xt,xt);const C=this.canvas;b._objects=[this],this.set("canvas",b),this.setCoords();const O=b.toCanvasElement(a||1,t);return this.set("canvas",C),this.shadow=n,s&&(this.group=s),this.set(e),this.setCoords(),b._objects=[],b.destroy(),O}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Yg(this.toCanvasElement(t),t.format||"png",t.quality||1)}toBlob(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return zg(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:s,originY:n}=this;if(e){const{x:r,y:o}=this.getRelativeCenterPoint();this.originX=xt,this.originY=xt,this.left=r,this.top=o}if(this.set("angle",t),e){const{x:r,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),s,n);this.left=r,this.top=o,this.originX=s,this.originY=n}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){ia.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Bs().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,e){return Object.entries(t).reduce((s,n)=>{let[r,o]=n;return s[r]=this._animate(r,o,e),s},{})}_animate(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=t.split("."),r=this.constructor.colorProperties.includes(n[n.length-1]),{abort:o,startValue:a,onChange:l,onComplete:h}=s,u=S(S({},s),{},{target:this,startValue:a??n.reduce((f,g)=>f[g],this),endValue:e,abort:o==null?void 0:o.bind(this),onChange:(f,g,m)=>{n.reduce((v,b,C)=>(C===n.length-1&&(v[b]=f),v[b]),this),l&&l(f,g,m)},onComplete:(f,g,m)=>{this.setCoords(),h&&h(f,g,m)}});return r?fx(u):cp(u)}isDescendantOf(t){const{parent:e,group:s}=this;return e===t||s===t||!!e&&e.isDescendantOf(t)||!!s&&s!==e&&s.isDescendantOf(t)}getAncestors(){const t=[];let e=this;do e=e.parent,e&&t.push(e);while(e);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const e=this.getAncestors(),s=t.getAncestors();if(e.length===0&&s.length>0&&this===s[s.length-1])return{fork:[],otherFork:[t,...s.slice(0,s.length-1)],common:[this]};for(let n,r=0;r<e.length;r++){if(n=e[r],n===t)return{fork:[this,...e.slice(0,r)],otherFork:[],common:e.slice(r)};for(let o=0;o<s.length;o++){if(this===s[o])return{fork:[],otherFork:[t,...s.slice(0,o)],common:[this,...e]};if(n===s[o])return{fork:[this,...e.slice(0,r)],otherFork:[t,...s.slice(0,o)],common:e.slice(r)}}}return{fork:[this,...e],otherFork:[t,...s],common:[]}}hasCommonAncestors(t){const e=this.findCommonAncestors(t);return e&&!!e.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const s=e.common[0]||this.canvas;if(!s)return;const n=e.fork.pop(),r=e.otherFork.pop(),o=s._objects.indexOf(n),a=s._objects.indexOf(r);return o>-1&&o>a}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Yo.customProperties,this.constructor.customProperties||[]);let e;const s=Pt.NUM_FRACTION_DIGITS,{clipPath:n,fill:r,stroke:o,shadow:a,strokeDashArray:l,left:h,top:u,originX:f,originY:g,width:m,height:v,strokeWidth:b,strokeLineCap:C,strokeDashOffset:O,strokeLineJoin:D,strokeUniform:L,strokeMiterLimit:P,scaleX:V,scaleY:it,angle:J,flipX:H,flipY:Z,opacity:lt,visible:St,backgroundColor:wt,fillRule:ut,paintFirst:Et,globalCompositeOperation:Gt,skewX:vt,skewY:nt}=this;n&&!n.excludeFromExport&&(e=n.toObject(t.concat("inverted","absolutePositioned")));const ot=R=>qt(R,s),Qt=S(S({},Xn(this,t)),{},{type:this.constructor.type,version:sc,originX:f,originY:g,left:ot(h),top:ot(u),width:ot(m),height:ot(v),fill:kf(r)?r.toObject():r,stroke:kf(o)?o.toObject():o,strokeWidth:ot(b),strokeDashArray:l&&l.concat(),strokeLineCap:C,strokeDashOffset:O,strokeLineJoin:D,strokeUniform:L,strokeMiterLimit:ot(P),scaleX:ot(V),scaleY:ot(it),angle:ot(J),flipX:H,flipY:Z,opacity:ot(lt),shadow:a&&a.toObject(),visible:St,backgroundColor:wt,fillRule:ut,paintFirst:Et,globalCompositeOperation:Gt,skewX:ot(vt),skewY:ot(nt)},e?{clipPath:e}:null);return this.includeDefaultValues?Qt:this._removeDefaultValues(Qt)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),s=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return zc(t,(n,r)=>{if(r===Lt||r===We||r==="type")return!0;const o=s[r];return n!==o&&!(Array.isArray(n)&&Array.isArray(o)&&n.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let e=Jt(t,gx),s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:n}=s,r=Jt(s,px);return Ea(e,r).then(o=>n?(delete o[n],new this(e[n],o)):new this(o))}static fromObject(t,e){return this._fromObject(t,e)}};w(Ys,"stateProperties",ex),w(Ys,"cacheProperties",ii),w(Ys,"ownDefaults",sx),w(Ys,"type","FabricObject"),w(Ys,"colorProperties",[ue,Ve,"backgroundColor"]),w(Ys,"customProperties",[]),tt.setClass(Ys),tt.setClass(Ys,"object");const Yn=(i,t,e)=>(s,n,r,o)=>{const a=t(s,n,r,o);return a&&ep(i,S(S({},ip(s,n,r,o)),e)),a};function zn(i){return(t,e,s,n)=>{const{target:r,originX:o,originY:a}=e,l=r.getRelativeCenterPoint(),h=r.translateToOriginPoint(l,o,a),u=i(t,e,s,n);return r.setPositionByOrigin(h,e.originX,e.originY),u}}const Yf=Yn(Er,zn((i,t,e,s)=>{const n=Gc(t,t.originX,t.originY,e,s);if(ae(t.originX)===ae(xt)||ae(t.originX)===ae(ne)&&n.x<0||ae(t.originX)===ae(Lt)&&n.x>0){const{target:r}=t,o=r.strokeWidth/(r.strokeUniform?r.scaleX:1),a=sp(t)?2:1,l=r.width,h=Math.abs(n.x*a/r.scaleX)-o;return r.set("width",Math.max(h,1)),l!==r.width}return!1}));function mx(i,t,e,s,n){s=s||{};const r=this.sizeX||s.cornerSize||n.cornerSize,o=this.sizeY||s.cornerSize||n.cornerSize,a=s.transparentCorners!==void 0?s.transparentCorners:n.transparentCorners,l=a?Ve:ue,h=!a&&(s.cornerStrokeColor||n.cornerStrokeColor);let u,f=t,g=e;i.save(),i.fillStyle=s.cornerColor||n.cornerColor||"",i.strokeStyle=s.cornerStrokeColor||n.cornerStrokeColor||"",r>o?(u=r,i.scale(1,o/r),g=e*r/o):o>r?(u=o,i.scale(r/o,1),f=t*o/r):u=r,i.beginPath(),i.arc(f,g,u/2,0,ta,!1),i[l](),h&&i.stroke(),i.restore()}function _x(i,t,e,s,n){s=s||{};const r=this.sizeX||s.cornerSize||n.cornerSize,o=this.sizeY||s.cornerSize||n.cornerSize,a=s.transparentCorners!==void 0?s.transparentCorners:n.transparentCorners,l=a?Ve:ue,h=!a&&(s.cornerStrokeColor||n.cornerStrokeColor),u=r/2,f=o/2;i.save(),i.fillStyle=s.cornerColor||n.cornerColor||"",i.strokeStyle=s.cornerStrokeColor||n.cornerStrokeColor||"",i.translate(t,e);const g=n.getTotalAngle();i.rotate(re(g)),i["".concat(l,"Rect")](-u,-f,r,o),h&&i.strokeRect(-u,-f,r,o),i.restore()}class ps{constructor(t){w(this,"visible",!0),w(this,"actionName",Ta),w(this,"angle",0),w(this,"x",0),w(this,"y",0),w(this,"offsetX",0),w(this,"offsetY",0),w(this,"sizeX",0),w(this,"sizeY",0),w(this,"touchSizeX",0),w(this,"touchSizeY",0),w(this,"cursorStyle","crosshair"),w(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e,s,n){var r;let{tl:o,tr:a,br:l,bl:h}=n;return((r=e.canvas)===null||r===void 0?void 0:r.getActiveObject())===e&&e.isControlVisible(t)&&Zt.isPointInPolygon(s,[o,a,l,h])}getActionHandler(t,e,s){return this.actionHandler}getMouseDownHandler(t,e,s){return this.mouseDownHandler}getMouseUpHandler(t,e,s){return this.mouseUpHandler}cursorStyleHandler(t,e,s){return e.cursorStyle}getActionName(t,e,s){return e.actionName}getVisibility(t,e){var s,n;return(s=(n=t._controlsVisibility)===null||n===void 0?void 0:n[e])!==null&&s!==void 0?s:this.visible}setVisibility(t,e,s){this.visible=t}positionHandler(t,e,s,n){return new k(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,s,n,r,o){const a=Xc([Nr(s,n),Vn({angle:t}),Yc((r?this.touchSizeX:this.sizeX)||e,(r?this.touchSizeY:this.sizeY)||e)]);return{tl:new k(-.5,-.5).transform(a),tr:new k(.5,-.5).transform(a),br:new k(.5,.5).transform(a),bl:new k(-.5,.5).transform(a)}}render(t,e,s,n,r){((n=n||{}).cornerStyle||r.cornerStyle)==="circle"?mx.call(this,t,e,s,n,r):_x.call(this,t,e,s,n,r)}}const vx=(i,t,e)=>e.lockRotation?oa:t.cursorStyle,yx=Yn(Wg,zn((i,t,e,s)=>{let{target:n,ex:r,ey:o,theta:a,originX:l,originY:h}=t;const u=n.translateToOriginPoint(n.getRelativeCenterPoint(),l,h);if(Cs(n,"lockRotation"))return!1;const f=Math.atan2(o-u.y,r-u.x),g=Math.atan2(s-u.y,e-u.x);let m=ei(g-f+a);if(n.snapAngle&&n.snapAngle>0){const b=n.snapAngle,C=n.snapThreshold||b,O=Math.ceil(m/b)*b,D=Math.floor(m/b)*b;Math.abs(m-D)<C?m=D:Math.abs(m-O)<C&&(m=O)}m<0&&(m=360+m),m%=360;const v=n.angle!==m;return n.angle=m,v}));function hp(i,t){const e=t.canvas,s=i[e.uniScaleKey];return e.uniformScaling&&!s||!e.uniformScaling&&s}function up(i,t,e){const s=Cs(i,"lockScalingX"),n=Cs(i,"lockScalingY");if(s&&n||!t&&(s||n)&&e||s&&t==="x"||n&&t==="y")return!0;const{width:r,height:o,strokeWidth:a}=i;return r===0&&a===0&&t!=="y"||o===0&&a===0&&t!=="x"}const bx=["e","se","s","sw","w","nw","n","ne","e"],nr=(i,t,e)=>{const s=hp(i,e);if(up(e,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",s))return oa;const n=np(e,t);return"".concat(bx[n],"-resize")};function Kc(i,t,e,s){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const r=t.target,o=n.by,a=hp(i,r);let l,h,u,f,g,m;if(up(r,o,a))return!1;if(t.gestureScale)h=t.scaleX*t.gestureScale,u=t.scaleY*t.gestureScale;else{if(l=Gc(t,t.originX,t.originY,e,s),g=o!=="y"?Math.sign(l.x||t.signX||1):1,m=o!=="x"?Math.sign(l.y||t.signY||1):1,t.signX||(t.signX=g),t.signY||(t.signY=m),Cs(r,"lockScalingFlip")&&(t.signX!==g||t.signY!==m))return!1;if(f=r._getTransformedDimensions(),a&&!o){const C=Math.abs(l.x)+Math.abs(l.y),{original:O}=t,D=C/(Math.abs(f.x*O.scaleX/r.scaleX)+Math.abs(f.y*O.scaleY/r.scaleY));h=O.scaleX*D,u=O.scaleY*D}else h=Math.abs(l.x*r.scaleX/f.x),u=Math.abs(l.y*r.scaleY/f.y);sp(t)&&(h*=2,u*=2),t.signX!==g&&o!=="y"&&(t.originX=Ff(t.originX),h*=-1,t.signX=g),t.signY!==m&&o!=="x"&&(t.originY=Ff(t.originY),u*=-1,t.signY=m)}const v=r.scaleX,b=r.scaleY;return o?(o==="x"&&r.set(Xe,h),o==="y"&&r.set(hs,u)):(!Cs(r,"lockScalingX")&&r.set(Xe,h),!Cs(r,"lockScalingY")&&r.set(hs,u)),v!==r.scaleX||b!==r.scaleY}const uo=Yn(Sa,zn((i,t,e,s)=>Kc(i,t,e,s))),xx=Yn(Sa,zn((i,t,e,s)=>Kc(i,t,e,s,{by:"x"}))),wx=Yn(Sa,zn((i,t,e,s)=>Kc(i,t,e,s,{by:"y"}))),Cx=["target","ex","ey","skewingSide"],Ml={x:{counterAxis:"y",scale:Xe,skew:Wn,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:hs,skew:Hn,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},Sx=["ns","nesw","ew","nwse"],Tx=(i,t,e)=>{if(t.x!==0&&Cs(e,"lockSkewingY")||t.y!==0&&Cs(e,"lockSkewingX"))return oa;const s=np(e,t)%4;return"".concat(Sx[s],"-resize")};function fp(i,t,e,s,n){const{target:r}=e,{counterAxis:o,origin:a,lockSkewing:l,skew:h,flip:u}=Ml[i];if(Cs(r,l))return!1;const{origin:f,flip:g}=Ml[o],m=ae(e[f])*(r[g]?-1:1),v=-Math.sign(m)*(r[u]?-1:1),b=.5*-((r[h]===0&&Gc(e,xt,xt,s,n)[i]>0||r[h]>0?1:-1)*v)+.5;return Yn(Hg,zn((O,D,L,P)=>function(V,it,J){let{target:H,ex:Z,ey:lt,skewingSide:St}=it,wt=Jt(it,Cx);const{skew:ut}=Ml[V],Et=J.subtract(new k(Z,lt)).divide(new k(H.scaleX,H.scaleY))[V],Gt=H[ut],vt=wt[ut],nt=Math.tan(re(vt)),ot=V==="y"?H._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:H._getTransformedDimensions({scaleX:1,scaleY:1}).y,Qt=2*Et*St/Math.max(ot,1)+nt,R=ei(Math.atan(Qt));H.set(ut,R);const ce=Gt!==H[ut];if(ce&&V==="y"){const{skewX:ee,scaleX:ve}=H,$t=H._getTransformedDimensions({skewY:Gt}),Se=H._getTransformedDimensions(),At=ee!==0?$t.x/Se.x:1;At!==1&&H.set(Xe,At*ve)}return ce}(i,D,new k(L,P))))(t,S(S({},e),{},{[a]:b,skewingSide:v}),s,n)}const Ox=(i,t,e,s)=>fp("x",i,t,e,s),Ex=(i,t,e,s)=>fp("y",i,t,e,s);function ka(i,t){return i[t.canvas.altActionKey]}const fo=(i,t,e)=>{const s=ka(i,e);return t.x===0?s?Wn:hs:t.y===0?s?Hn:Xe:""},Cn=(i,t,e)=>ka(i,e)?Tx(0,t,e):nr(i,t,e),zf=(i,t,e,s)=>ka(i,t.target)?Ex(i,t,e,s):xx(i,t,e,s),Uf=(i,t,e,s)=>ka(i,t.target)?Ox(i,t,e,s):wx(i,t,e,s),dp=()=>({ml:new ps({x:-.5,y:0,cursorStyleHandler:Cn,actionHandler:zf,getActionName:fo}),mr:new ps({x:.5,y:0,cursorStyleHandler:Cn,actionHandler:zf,getActionName:fo}),mb:new ps({x:0,y:.5,cursorStyleHandler:Cn,actionHandler:Uf,getActionName:fo}),mt:new ps({x:0,y:-.5,cursorStyleHandler:Cn,actionHandler:Uf,getActionName:fo}),tl:new ps({x:-.5,y:-.5,cursorStyleHandler:nr,actionHandler:uo}),tr:new ps({x:.5,y:-.5,cursorStyleHandler:nr,actionHandler:uo}),bl:new ps({x:-.5,y:.5,cursorStyleHandler:nr,actionHandler:uo}),br:new ps({x:.5,y:.5,cursorStyleHandler:nr,actionHandler:uo}),mtr:new ps({x:0,y:-.5,actionHandler:yx,cursorStyleHandler:vx,offsetY:-40,withConnection:!0,actionName:Hc})}),Ax=()=>({mr:new ps({x:.5,y:0,actionHandler:Yf,cursorStyleHandler:Cn,actionName:Er}),ml:new ps({x:-.5,y:0,actionHandler:Yf,cursorStyleHandler:Cn,actionName:Er})}),Dx=()=>S(S({},dp()),Ax());class Mr extends Ys{static getDefaults(){return S(S({},super.getDefaults()),Mr.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),Mr.ownDefaults),this.setOptions(t)}static createControls(){return{controls:dp()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform,s=e.target,n=e.action;if(this===s&&n&&n.startsWith(Ta))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const s=Object.entries(this.oCoords);for(let n=s.length-1;n>=0;n--){const[r,o]=s[n],a=this.controls[r];if(a.shouldActivate(r,this,t,e?o.touchCorner:o.corner))return this.__corner=r,{key:r,control:a,coord:this.oCoords[r]}}}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),s=Nr(e.x,e.y),n=Vn({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),r=_e(s,n),o=_e(t,r),a=_e(o,[1/t[0],0,0,1/t[3],0,0]),l=this.group?na(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const h=this._calculateCurrentDimensions(l),u={};return this.forEachControl((f,g)=>{const m=f.positionHandler(h,a,this,f);u[g]=Object.assign(m,this._calcCornerCoords(f,m))}),u}_calcCornerCoords(t,e){const s=this.getTotalAngle();return{corner:t.calcCornerCoords(s,this.cornerSize,e.x,e.y,!1,this),touchCorner:t.calcCornerCoords(s,this.touchCornerSize,e.x,e.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),s=this._calculateCurrentDimensions(),n=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/n[0],1/n[3]),t.rotate(re(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-s.x/2,-s.y/2,s.x,s.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=S({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},s);t.save(),t.strokeStyle=n.borderColor,this._setLineDash(t,n.borderDashArray),this.strokeBorders(t,e),n.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:s,hasControls:n}=this,r=S({hasBorders:s,hasControls:n},e),o=this.getViewportTransform(),a=r.hasBorders,l=r.hasControls,h=_e(o,this.calcTransformMatrix()),u=na(h);t.save(),t.translate(u.translateX,u.translateY),t.lineWidth=this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),t.rotate(re(this.group?u.angle:this.angle)),a&&this.drawBorders(t,u,e),l&&this.drawControls(t,e),t.restore()}drawBorders(t,e,s){let n;if(s&&s.forActiveSelection||this.group){const r=Uc(this.width,this.height,Oa(e)),o=this.isStrokeAccountedForInDimensions()?Vc:(this.strokeUniform?new k().scalarAdd(this.canvas?this.canvas.getZoom():1):new k(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);n=r.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else n=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,n,s)}drawControlsConnectingLines(t,e){let s=!1;t.beginPath(),this.forEachControl((n,r)=>{n.withConnection&&n.getVisibility(this,r)&&(s=!0,t.moveTo(n.x*e.x,n.y*e.y),t.lineTo(n.x*e.x+n.offsetX,n.y*e.y+n.offsetY))}),s&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const s=this.getCanvasRetinaScaling(),{cornerStrokeColor:n,cornerDashArray:r,cornerColor:o}=this,a=S({cornerStrokeColor:n,cornerDashArray:r,cornerColor:o},e);t.setTransform(s,0,0,s,0,0),t.strokeStyle=t.fillStyle=a.cornerColor,this.transparentCorners||(t.strokeStyle=a.cornerStrokeColor),this._setLineDash(t,a.cornerDashArray),this.forEachControl((l,h)=>{if(l.getVisibility(this,h)){const u=this.oCoords[h];l.render(t,u.x,u.y,a,this)}}),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach(e=>{let[s,n]=e;return this.setControlVisible(s,n)})}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const s=this.canvas.viewportTransform;e.save(),e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this.transform(e);const n=this.width+4,r=this.height+4;return e.clearRect(-n/2,-r/2,n,r),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function gp(i,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(s=>{s!=="constructor"&&Object.defineProperty(i.prototype,s,Object.getOwnPropertyDescriptor(e.prototype,s)||Object.create(null))})}),i}w(Mr,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class we extends Mr{}gp(we,[rp]),tt.setClass(we),tt.setClass(we,"object");const kx=(i,t,e,s)=>{const n=2*(s=Math.round(s))+1,{data:r}=i.getImageData(t-s,e-s,n,n);for(let o=3;o<r.length;o+=4)if(r[o]>0)return!1;return!0};class pp{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new k(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new k(1/this.options.scaleX,1/this.options.scaleY):new k(1,1)}createSideVector(t,e){const s=oc(t,e);return this.options.strokeUniform?s.multiply(this.scale):s}projectOrthogonally(t,e,s){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,s)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new k(t);return e.y+=e.x*Math.tan(re(this.options.skewY)),e.x+=e.y*Math.tan(re(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const Mx=new k;class Fn extends pp{static getOrthogonalRotationFactor(t,e){const s=e?lc(t,e):Zb(t);return Math.abs(s)<Br?-1:1}constructor(t,e,s,n){super(n),w(this,"AB",void 0),w(this,"AC",void 0),w(this,"alpha",void 0),w(this,"bisector",void 0),this.A=new k(t),this.B=new k(e),this.C=new k(s),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=lc(this.AB,this.AC),this.bisector=$c(ap(this.AB.eq(Mx)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(t,e),r=lp(n),o=Fn.getOrthogonalRotationFactor(r,this.bisector);return this.scaleUnitVector(r,s*o)}projectBevel(){const t=[];return(this.alpha%ta==0?[this.B]:[this.B,this.C]).forEach(e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))}),t}projectMiter(){const t=[],e=Math.abs(this.alpha),s=1/Math.sin(e/2),n=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*s),r=this.options.strokeUniform?ac(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return ac(n)/this.strokeProjectionMagnitude<=r&&t.push(this.applySkew(this.A.add(n))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const s=[],n=new k(Fn.getOrthogonalRotationFactor(this.bisector),Fn.getOrthogonalRotationFactor(new k(this.bisector.y,this.bisector.x)));return[new k(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n),new k(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n)].forEach(r=>{Hf(r,t,e)&&s.push(this.A.add(r))}),s}projectRoundWithSkew(t,e){const s=[],{skewX:n,skewY:r,scaleX:o,scaleY:a,strokeUniform:l}=this.options,h=new k(Math.tan(re(n)),Math.tan(re(r))),u=this.strokeProjectionMagnitude,f=l?u/a/Math.sqrt(1/a**2+1/o**2*h.y**2):u/Math.sqrt(1+h.y**2),g=new k(Math.sqrt(Math.max(u**2-f**2,0)),f),m=l?u/Math.sqrt(1+h.x**2*(1/a)**2/(1/o+1/o*h.x*h.y)**2):u/Math.sqrt(1+h.x**2/(1+h.x*h.y)**2),v=new k(m,Math.sqrt(Math.max(u**2-m**2,0)));return[v,v.scalarMultiply(-1),g,g.scalarMultiply(-1)].map(b=>this.applySkew(l?b.multiply(this.strokeUniformScalar):b)).forEach(b=>{Hf(b,t,e)&&s.push(this.applySkew(this.A).add(b))}),s}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%ta==0,s=this.applySkew(this.A),n=t[e?0:2].subtract(s),r=t[e?1:0].subtract(s),o=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=mr(n,o)>0,l=a?n:r,h=a?r:n;return this.isSkewed()?t.push(...this.projectRoundWithSkew(l,h)):t.push(...this.projectRoundNoSkew(l,h)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector}))}}class Gf extends pp{constructor(t,e,s){super(s),this.A=new k(t),this.T=new k(e)}calcOrthogonalProjection(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(t,e);return this.scaleUnitVector(lp(n),s)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new k(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new Fn(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new k(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),s=this.scaleUnitVector($c(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),n=this.A.add(s);t.push(n.add(e),n.subtract(e))}return t.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t}))}}const Px=function(i,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const s=[];if(i.length===0)return s;const n=i.reduce((r,o)=>(r[r.length-1].eq(o)||r.push(new k(o)),r),[new k(i[0])]);if(n.length===1)e=!0;else if(!e){const r=n[0],o=((a,l)=>{for(let h=a.length-1;h>=0;h--)if(l(a[h],h,a))return h;return-1})(n,a=>!a.eq(r));n.splice(o+1)}return n.forEach((r,o,a)=>{let l,h;o===0?(h=a[1],l=e?r:a[a.length-1]):o===a.length-1?(l=a[o-1],h=e?r:a[0]):(l=a[o-1],h=a[o+1]),e&&a.length===1?s.push(...new Gf(r,r,t).project()):!e||o!==0&&o!==a.length-1?s.push(...new Fn(r,l,h,t).project()):s.push(...new Gf(r,o===0?h:l,t).project())}),s},Jc=i=>{const t={};return Object.keys(i).forEach(e=>{t[e]={},Object.keys(i[e]).forEach(s=>{t[e][s]=S({},i[e][s])})}),t},jx=i=>i.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Qc=i=>{const t=[];for(let e,s=0;s<i.length;s++)(e=Fx(i,s))!==!1&&t.push(e);return t},Fx=(i,t)=>{const e=i.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return i.charAt(t);if(55296<=e&&e<=56319){if(i.length<=t+1)throw"High surrogate without following low surrogate";const n=i.charCodeAt(t+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return i.charAt(t)+i.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const s=i.charCodeAt(t-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1},Zc=function(i,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return i.fill!==t.fill||i.stroke!==t.stroke||i.strokeWidth!==t.strokeWidth||i.fontSize!==t.fontSize||i.fontFamily!==t.fontFamily||i.fontWeight!==t.fontWeight||i.fontStyle!==t.fontStyle||i.textBackgroundColor!==t.textBackgroundColor||i.deltaY!==t.deltaY||e&&(i.overline!==t.overline||i.underline!==t.underline||i.linethrough!==t.linethrough)},Lx=(i,t)=>{const e=t.split(`
`),s=[];let n=-1,r={};i=Jc(i);for(let o=0;o<e.length;o++){const a=Qc(e[o]);if(i[o])for(let l=0;l<a.length;l++){n++;const h=i[o][l];h&&Object.keys(h).length>0&&(Zc(r,h,!0)?s.push({start:n,end:n+1,style:h}):s[s.length-1].end++),r=h||{}}else n+=a.length,r={}}return s},Rx=(i,t)=>{if(!Array.isArray(i))return Jc(i);const e=t.split(Wc),s={};let n=-1,r=0;for(let o=0;o<e.length;o++){const a=Qc(e[o]);for(let l=0;l<a.length;l++)n++,i[r]&&i[r].start<=n&&n<i[r].end&&(s[o]=s[o]||{},s[o][l]=S({},i[r].style),n===i[r].end-1&&r++)}return s},Si=["display","transform",ue,"fill-opacity","fill-rule","opacity",Ve,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function $f(i,t){const e=i.nodeName,s=i.getAttribute("class"),n=i.getAttribute("id"),r="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+e,"i"),t=t.replace(o,""),n&&t.length&&(o=new RegExp("#"+n+r,"i"),t=t.replace(o,"")),s&&t.length){const a=s.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+r,"i"),t=t.replace(o,"")}return t.length===0}function Ix(i,t){let e=!0;const s=$f(i,t.pop());return s&&t.length&&(e=function(n,r){let o,a=!0;for(;n.parentElement&&n.parentElement.nodeType===1&&r.length;)a&&(o=r.pop()),a=$f(n=n.parentElement,o);return r.length===0}(i,t)),s&&e&&t.length===0}const Bx=i=>{var t;return(t=Jb[i])!==null&&t!==void 0?t:i},Nx=new RegExp("(".concat(Ji,")"),"gi"),Wx=i=>i.replace(Nx," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var qf,Kf,Jf,Qf,Zf,td,ed;const Le="(".concat(Ji,")"),Hx=String.raw(qf||(qf=Ci(["(skewX)(",")"],["(skewX)\\(","\\)"])),Le),Vx=String.raw(Kf||(Kf=Ci(["(skewY)(",")"],["(skewY)\\(","\\)"])),Le),Xx=String.raw(Jf||(Jf=Ci(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Le,Le,Le),Yx=String.raw(Qf||(Qf=Ci(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Le,Le),zx=String.raw(Zf||(Zf=Ci(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Le,Le),Ux=String.raw(td||(td=Ci(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Le,Le,Le,Le,Le,Le),th="(?:".concat(Ux,"|").concat(zx,"|").concat(Xx,"|").concat(Yx,"|").concat(Hx,"|").concat(Vx,")"),Gx="(?:".concat(th,"*)"),$x=String.raw(ed||(ed=Ci(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),Gx),qx=new RegExp($x),Kx=new RegExp(th),Jx=new RegExp(th,"g");function cc(i){const t=[];if(!(i=Wx(i).replace(/\s*([()])\s*/gi,"$1"))||i&&!qx.test(i))return[...Re];for(const e of i.matchAll(Jx)){const s=Kx.exec(e[0]);if(!s)continue;let n=Re;const r=s.filter(v=>!!v),[,o,...a]=r,[l,h,u,f,g,m]=a.map(v=>parseFloat(v));switch(o){case"translate":n=Nr(l,h);break;case Hc:n=Vn({angle:l},{x:h,y:u});break;case Ta:n=Yc(l,h);break;case Wn:n=$g(l);break;case Hn:n=qg(l);break;case"matrix":n=[l,h,u,f,g,m]}t.push(n)}return Xc(t)}function Qx(i,t,e,s){const n=Array.isArray(t);let r,o=t;if(i!==ue&&i!==Ve||t!==He){if(i==="strokeUniform")return t==="non-scaling-stroke";if(i==="strokeDashArray")o=t===He?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(i==="transformMatrix")o=e&&e.transformMatrix?_e(e.transformMatrix,cc(t)):cc(t);else if(i==="visible")o=t!==He&&t!=="hidden",e&&e.visible===!1&&(o=!1);else if(i==="opacity")o=parseFloat(t),e&&e.opacity!==void 0&&(o*=e.opacity);else if(i==="textAnchor")o=t==="start"?Lt:t==="end"?ne:xt;else if(i==="charSpacing")r=jn(t,s)/s*1e3;else if(i==="paintFirst"){const a=t.indexOf(ue),l=t.indexOf(Ve);o=ue,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=Ve)}else{if(i==="href"||i==="xlink:href"||i==="font"||i==="id")return t;if(i==="imageSmoothing")return t==="optimizeQuality";r=n?t.map(jn):jn(t,s)}}else o="";return!n&&isNaN(r)?o:r}function Zx(i,t){const e=i.match(Kb);if(!e)return;const s=e[1],n=e[3],r=e[4],o=e[5],a=e[6];s&&(t.fontStyle=s),n&&(t.fontWeight=isNaN(parseFloat(n))?n:parseFloat(n)),r&&(t.fontSize=jn(r)),a&&(t.fontFamily=a),o&&(t.lineHeight=o==="normal"?1:o)}function tw(i,t){i.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[s,n]=e.split(":");t[s.trim().toLowerCase()]=n.trim()})}function ew(i){const t={},e=i.getAttribute("style");return e&&(typeof e=="string"?tw(e,t):function(s,n){Object.entries(s).forEach(r=>{let[o,a]=r;a!==void 0&&(n[o.toLowerCase()]=a)})}(e,t)),t}const sw={stroke:"strokeOpacity",fill:"fillOpacity"};function ni(i,t,e){if(!i)return{};let s,n={},r=Nc;i.parentNode&&Wf.test(i.parentNode.nodeName)&&(n=ni(i.parentElement,t,e),n.fontSize&&(s=r=jn(n.fontSize)));const o=S(S(S({},t.reduce((h,u)=>{const f=i.getAttribute(u);return f&&(h[u]=f),h},{})),function(h){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f={};for(const g in u)Ix(h,g.split(" "))&&(f=S(S({},f),u[g]));return f}(i,e)),ew(i));o[Dl]&&i.setAttribute(Dl,o[Dl]),o[Al]&&(s=jn(o[Al],r),o[Al]="".concat(s));const a={};for(const h in o){const u=Bx(h),f=Qx(u,o[h],n,s);a[u]=f}a&&a.font&&Zx(a.font,a);const l=S(S({},n),a);return Wf.test(i.nodeName)?l:function(h){const u=we.getDefaults();return Object.entries(sw).forEach(f=>{let[g,m]=f;if(h[m]===void 0||h[g]==="")return;if(h[g]===void 0){if(!u[g])return;h[g]=u[g]}if(h[g].indexOf("url(")===0)return;const v=new Nt(h[g]);h[g]=v.setAlpha(qt(v.getAlpha()*h[m],2)).toRgba()}),h}(l)}const iw=["left","top","width","height","visible"],mp=["rx","ry"];class vs extends we{static getDefaults(){return S(S({},super.getDefaults()),vs.ownDefaults)}constructor(t){super(),Object.assign(this,vs.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:s}=this,n=-e/2,r=-s/2,o=this.rx?Math.min(this.rx,e/2):0,a=this.ry?Math.min(this.ry,s/2):0,l=o!==0||a!==0;t.beginPath(),t.moveTo(n+o,r),t.lineTo(n+e-o,r),l&&t.bezierCurveTo(n+e-ci*o,r,n+e,r+ci*a,n+e,r+a),t.lineTo(n+e,r+s-a),l&&t.bezierCurveTo(n+e,r+s-ci*a,n+e-ci*o,r+s,n+e-o,r+s),t.lineTo(n+o,r+s),l&&t.bezierCurveTo(n+ci*o,r+s,n,r+s-ci*a,n,r+s-a),t.lineTo(n,r+a),l&&t.bezierCurveTo(n,r+ci*a,n+ci*o,r,n+o,r),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...mp,...t])}_toSVG(){const{width:t,height:e,rx:s,ry:n}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(s,'" ry="').concat(n,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,s){const n=ni(t,this.ATTRIBUTE_NAMES,s),{left:r=0,top:o=0,width:a=0,height:l=0,visible:h=!0}=n,u=Jt(n,iw);return new this(S(S(S({},e),u),{},{left:r,top:o,width:a,height:l,visible:!!(h&&a&&l)}))}}w(vs,"type","Rect"),w(vs,"cacheProperties",[...ii,...mp]),w(vs,"ownDefaults",{rx:0,ry:0}),w(vs,"ATTRIBUTE_NAMES",[...Si,"x","y","rx","ry","width","height"]),tt.setClass(vs),tt.setSVGClass(vs);const qs="initialization",aa="added",eh="removed",la="imperative",_p=(i,t)=>{const{strokeUniform:e,strokeWidth:s,width:n,height:r,group:o}=t,a=o&&o!==i?Aa(o.calcTransformMatrix(),i.calcTransformMatrix()):null,l=a?t.getRelativeCenterPoint().transform(a):t.getRelativeCenterPoint(),h=!t.isStrokeAccountedForInDimensions(),u=e&&h?zb(new k(s,s),void 0,i.calcTransformMatrix()):Vc,f=!e&&h?s:0,g=Uc(n+f,r+f,Xc([a,t.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(g),l.add(g)]};class Ma{calcLayoutResult(t,e){if(this.shouldPerformLayout(t))return this.calcBoundingBox(e,t)}shouldPerformLayout(t){let{type:e,prevStrategy:s,strategy:n}=t;return e===qs||e===la||!!s&&n!==s}shouldLayoutClipPath(t){let{type:e,target:{clipPath:s}}=t;return e!==qs&&s&&!s.absolutePositioned}getInitialSize(t,e){return e.size}calcBoundingBox(t,e){const{type:s,target:n}=e;if(s===la&&e.overrides)return e.overrides;if(t.length===0)return;const{left:r,top:o,width:a,height:l}=Js(t.map(f=>_p(n,f)).reduce((f,g)=>f.concat(g),[])),h=new k(a,l),u=new k(r,o).add(h.scalarDivide(2));if(s===qs){const f=this.getInitialSize(e,{size:h,center:u});return{center:u,relativeCorrection:new k(0,0),size:f}}return{center:u.transform(n.calcOwnMatrix()),size:h}}}w(Ma,"type","strategy");class hc extends Ma{shouldPerformLayout(t){return!0}}w(hc,"type","fit-content"),tt.setClass(hc);const nw=["strategy"],rw=["target","strategy","bubbles","prevStrategy"],vp="layoutManager";class Pr{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new hc;w(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const e=S(S({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(e);const s=this.getLayoutResult(e);s&&this.commitLayout(e,s),this.onAfterLayout(e,s),this._prevLayoutStrategy=e.strategy}attachHandlers(t,e){const{target:s}=e;return[sa,Ng,Er,Wg,Sa,Hg,ea,Mb,Pb].map(n=>t.on(n,r=>this.performLayout(n===sa?{type:"object_modified",trigger:n,e:r,target:s}:{type:"object_modifying",trigger:n,e:r,target:s})))}subscribe(t,e){this.unsubscribe(t,e);const s=this.attachHandlers(t,e);this._subscriptions.set(t,s)}unsubscribe(t,e){(this._subscriptions.get(t)||[]).forEach(s=>s()),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach(e=>this.unsubscribe(e,t))}subscribeTargets(t){t.targets.forEach(e=>this.subscribe(e,t))}onBeforeLayout(t){const{target:e,type:s}=t,{canvas:n}=e;if(s===qs||s===aa?this.subscribeTargets(t):s===eh&&this.unsubscribeTargets(t),e.fire("layout:before",{context:t}),n&&n.fire("object:layout:before",{target:e,context:t}),s===la&&t.deep){const r=Jt(t,nw);e.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(S(S({},r),{},{bubbles:!1,target:o})))}}getLayoutResult(t){const{target:e,strategy:s,type:n}=t,r=s.calcLayoutResult(t,e.getObjects());if(!r)return;const o=n===qs?new k:e.getRelativeCenterPoint(),{center:a,correction:l=new k,relativeCorrection:h=new k}=r,u=o.subtract(a).add(l).transform(n===qs?Re:bs(e.calcOwnMatrix()),!0).add(h);return{result:r,prevCenter:o,nextCenter:a,offset:u}}commitLayout(t,e){const{target:s}=t,{result:{size:n},nextCenter:r}=e;var o,a;s.set({width:n.x,height:n.y}),this.layoutObjects(t,e),t.type===qs?s.set({left:(o=t.x)!==null&&o!==void 0?o:r.x+n.x*ae(s.originX),top:(a=t.y)!==null&&a!==void 0?a:r.y+n.y*ae(s.originY)}):(s.setPositionByOrigin(r,xt,xt),s.setCoords(),s.set("dirty",!0))}layoutObjects(t,e){const{target:s}=t;s.forEachObject(n=>{n.group===s&&this.layoutObject(t,e,n)}),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,e,s.clipPath)}layoutObject(t,e,s){let{offset:n}=e;s.set({left:s.left+n.x,top:s.top+n.y})}onAfterLayout(t,e){const{target:s,strategy:n,bubbles:r,prevStrategy:o}=t,a=Jt(t,rw),{canvas:l}=s;s.fire("layout:after",{context:t,result:e}),l&&l.fire("object:layout:after",{context:t,result:e,target:s});const h=s.parent;r&&h!=null&&h.layoutManager&&((a.path||(a.path=[])).push(s),h.layoutManager.performLayout(S(S({},a),{},{target:h}))),s.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach(e=>e.forEach(s=>s())),t.clear()}toObject(){return{type:vp,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}tt.setClass(Pr,vp);const ow=["type","objects","layoutManager"];class aw extends Pr{performLayout(){}}class $i extends Vg(we){static getDefaults(){return S(S({},super.getDefaults()),$i.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),w(this,"_activeObjects",[]),w(this,"__objectSelectionTracker",void 0),w(this,"__objectSelectionDisposer",void 0),Object.assign(this,$i.ownDefaults),this.setOptions(e),this.groupInit(t,e)}groupInit(t,e){var s;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(n=>{this.enterGroup(n,!1)}),this.layoutManager=(s=e.layoutManager)!==null&&s!==void 0?s:new Pr,this.layoutManager.performLayout({type:qs,target:this,targets:[...t],x:e.left,y:e.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(vi("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(vi("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter((e,s,n)=>this.canEnterGroup(e)&&n.indexOf(e)===s)}add(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];const n=this._filterObjectsBeforeEnteringGroup(e),r=super.add(...n);return this._onAfterObjectsChange(aa,n),r}insertAt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];const r=this._filterObjectsBeforeEnteringGroup(s),o=super.insertAt(t,...r);return this._onAfterObjectsChange(aa,r),o}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(eh,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this.layoutManager.performLayout({type:t,targets:e,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const s=this[t];return super._set(t,e),t==="canvas"&&s!==e&&(this._objects||[]).forEach(n=>{n._set(t,e)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,e){let{target:s}=e;const n=this._activeObjects;if(t)n.push(s),this._set("dirty",!0);else if(n.length>0){const r=n.indexOf(s);r>-1&&(n.splice(r,1),this._set("dirty",!0))}}_watchObject(t,e){t&&this._watchObject(!1,e),t?(e.on("selected",this.__objectSelectionTracker),e.on("deselected",this.__objectSelectionDisposer)):(e.off("selected",this.__objectSelectionTracker),e.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,e){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,e)}_enterGroup(t,e){e&&ra(t,_e(bs(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const s=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();s&&(s===t||t.isDescendantOf(s))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(ra(t,_e(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const s=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;s>-1&&this._activeObjects.splice(s,1)}shouldCache(){const t=we.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t,e,s){this._renderBackground(t);for(let r=0;r<this._objects.length;r++){var n;const o=this._objects[r];(n=this.canvas)!==null&&n!==void 0&&n.preserveObjectStacking&&o.group!==this?(t.save(),t.transform(...bs(this.calcTransformMatrix())),o.render(t),t.restore()):o.group===this&&o.render(t)}this._drawClipPath(t,this.clipPath,s)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(t=>t.setCoords())}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(S({target:this,type:la},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,e){const s=this.includeDefaultValues;return this._objects.filter(function(n){return!n.excludeFromExport}).map(function(n){const r=n.includeDefaultValues;n.includeDefaultValues=s;const o=n[t||"toObject"](e);return n.includeDefaultValues=r,o})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.layoutManager.toObject();return S(S(S({},super.toObject(["subTargetCheck","interactive",...t])),e.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:e}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(t=>{this._watchObject(!1,t),t.dispose()}),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=vs.prototype._toSVG.call(this),s=e.indexOf("COMMON_PARTS");e[s]='for="group" ';const n=e.join("");return t?t(n):n}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],s=this._createSVGBgRect(t);s&&e.push("		",s);for(let n=0;n<this._objects.length;n++)e.push("		",this._objects[n].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],s=this._createSVGBgRect(t);s&&e.push("	",s);for(let n=0;n<this._objects.length;n++)e.push("	",this._objects[n].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t,e){let{type:s,objects:n=[],layoutManager:r}=t,o=Jt(t,ow);return Promise.all([Ar(n,e),Ea(o,e)]).then(a=>{let[l,h]=a;const u=new this(l,S(S(S({},o),h),{},{layoutManager:new aw}));if(r){const f=tt.getClass(r.type),g=tt.getClass(r.strategy);u.layoutManager=new f(new g)}else u.layoutManager=new Pr;return u.layoutManager.subscribeTargets({type:qs,target:u,targets:u.getObjects()}),u.setCoords(),u})}}w($i,"type","Group"),w($i,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),tt.setClass($i);const lw=(i,t)=>Math.min(t.width/i.width,t.height/i.height),cw=(i,t)=>Math.max(t.width/i.width,t.height/i.height),uc="\\s*,?\\s*",sr="".concat(uc,"(").concat(Ji,")"),hw="".concat(sr).concat(sr).concat(sr).concat(uc,"([01])").concat(uc,"([01])").concat(sr).concat(sr),uw={m:"l",M:"L"},fw=(i,t,e,s,n,r,o,a,l,h,u)=>{const f=Zs(i),g=ti(i),m=Zs(t),v=ti(t),b=e*n*m-s*r*v+o,C=s*n*m+e*r*v+a;return["C",h+l*(-e*n*g-s*r*f),u+l*(-s*n*g+e*r*f),b+l*(e*n*v+s*r*m),C+l*(s*n*v-e*r*m),b,C]},sd=(i,t,e,s)=>{const n=Math.atan2(t,i),r=Math.atan2(s,e);return r>=n?r-n:2*Math.PI-(n-r)};function id(i,t,e,s,n,r,o,a){let l;if(Pt.cachesBoundsOfCurve&&(l=[...arguments].join(),pr.boundsOfCurveCache[l]))return pr.boundsOfCurveCache[l];const h=Math.sqrt,u=Math.abs,f=[],g=[[0,0],[0,0]];let m=6*i-12*e+6*n,v=-3*i+9*e-9*n+3*o,b=3*e-3*i;for(let P=0;P<2;++P){if(P>0&&(m=6*t-12*s+6*r,v=-3*t+9*s-9*r+3*a,b=3*s-3*t),u(v)<1e-12){if(u(m)<1e-12)continue;const Z=-b/m;0<Z&&Z<1&&f.push(Z);continue}const V=m*m-4*b*v;if(V<0)continue;const it=h(V),J=(-m+it)/(2*v);0<J&&J<1&&f.push(J);const H=(-m-it)/(2*v);0<H&&H<1&&f.push(H)}let C=f.length;const O=C,D=yp(i,t,e,s,n,r,o,a);for(;C--;){const{x:P,y:V}=D(f[C]);g[0][C]=P,g[1][C]=V}g[0][O]=i,g[1][O]=t,g[0][O+1]=o,g[1][O+1]=a;const L=[new k(Math.min(...g[0]),Math.min(...g[1])),new k(Math.max(...g[0]),Math.max(...g[1]))];return Pt.cachesBoundsOfCurve&&(pr.boundsOfCurveCache[l]=L),L}const dw=(i,t,e)=>{let[s,n,r,o,a,l,h,u]=e;const f=((g,m,v,b,C,O,D)=>{if(v===0||b===0)return[];let L=0,P=0,V=0;const it=Math.PI,J=D*Bc,H=ti(J),Z=Zs(J),lt=.5*(-Z*g-H*m),St=.5*(-Z*m+H*g),wt=v**2,ut=b**2,Et=St**2,Gt=lt**2,vt=wt*ut-wt*Et-ut*Gt;let nt=Math.abs(v),ot=Math.abs(b);if(vt<0){const Q=Math.sqrt(1-vt/(wt*ut));nt*=Q,ot*=Q}else V=(C===O?-1:1)*Math.sqrt(vt/(wt*Et+ut*Gt));const Qt=V*nt*St/ot,R=-V*ot*lt/nt,ce=Z*Qt-H*R+.5*g,ee=H*Qt+Z*R+.5*m;let ve=sd(1,0,(lt-Qt)/nt,(St-R)/ot),$t=sd((lt-Qt)/nt,(St-R)/ot,(-lt-Qt)/nt,(-St-R)/ot);O===0&&$t>0?$t-=2*it:O===1&&$t<0&&($t+=2*it);const Se=Math.ceil(Math.abs($t/it*2)),At=[],F=$t/Se,j=8/3*Math.sin(F/4)*Math.sin(F/4)/Math.sin(F/2);let U=ve+F;for(let Q=0;Q<Se;Q++)At[Q]=fw(ve,U,Z,H,nt,ot,ce,ee,j,L,P),L=At[Q][5],P=At[Q][6],ve=U,U+=F;return At})(h-i,u-t,n,r,a,l,o);for(let g=0,m=f.length;g<m;g++)f[g][1]+=i,f[g][2]+=t,f[g][3]+=i,f[g][4]+=t,f[g][5]+=i,f[g][6]+=t;return f},gw=i=>{let t=0,e=0,s=0,n=0;const r=[];let o,a=0,l=0;for(const h of i){const u=[...h];let f;switch(u[0]){case"l":u[1]+=t,u[2]+=e;case"L":t=u[1],e=u[2],f=["L",t,e];break;case"h":u[1]+=t;case"H":t=u[1],f=["L",t,e];break;case"v":u[1]+=e;case"V":e=u[1],f=["L",t,e];break;case"m":u[1]+=t,u[2]+=e;case"M":t=u[1],e=u[2],s=u[1],n=u[2],f=["M",t,e];break;case"c":u[1]+=t,u[2]+=e,u[3]+=t,u[4]+=e,u[5]+=t,u[6]+=e;case"C":a=u[3],l=u[4],t=u[5],e=u[6],f=["C",u[1],u[2],a,l,t,e];break;case"s":u[1]+=t,u[2]+=e,u[3]+=t,u[4]+=e;case"S":o==="C"?(a=2*t-a,l=2*e-l):(a=t,l=e),t=u[3],e=u[4],f=["C",a,l,u[1],u[2],t,e],a=f[3],l=f[4];break;case"q":u[1]+=t,u[2]+=e,u[3]+=t,u[4]+=e;case"Q":a=u[1],l=u[2],t=u[3],e=u[4],f=["Q",a,l,t,e];break;case"t":u[1]+=t,u[2]+=e;case"T":o==="Q"?(a=2*t-a,l=2*e-l):(a=t,l=e),t=u[1],e=u[2],f=["Q",a,l,t,e];break;case"a":u[6]+=t,u[7]+=e;case"A":dw(t,e,u).forEach(g=>r.push(g)),t=u[6],e=u[7];break;case"z":case"Z":t=s,e=n,f=["Z"]}f?(r.push(f),o=f[0]):o=""}return r},ca=(i,t,e,s)=>Math.sqrt((e-i)**2+(s-t)**2),yp=(i,t,e,s,n,r,o,a)=>l=>{const h=l**3,u=(m=>3*m**2*(1-m))(l),f=(m=>3*m*(1-m)**2)(l),g=(m=>(1-m)**3)(l);return new k(o*h+n*u+e*f+i*g,a*h+r*u+s*f+t*g)},bp=i=>i**2,xp=i=>2*i*(1-i),wp=i=>(1-i)**2,pw=(i,t,e,s,n,r,o,a)=>l=>{const h=bp(l),u=xp(l),f=wp(l),g=3*(f*(e-i)+u*(n-e)+h*(o-n)),m=3*(f*(s-t)+u*(r-s)+h*(a-r));return Math.atan2(m,g)},mw=(i,t,e,s,n,r)=>o=>{const a=bp(o),l=xp(o),h=wp(o);return new k(n*a+e*l+i*h,r*a+s*l+t*h)},_w=(i,t,e,s,n,r)=>o=>{const a=1-o,l=2*(a*(e-i)+o*(n-e)),h=2*(a*(s-t)+o*(r-s));return Math.atan2(h,l)},nd=(i,t,e)=>{let s=new k(t,e),n=0;for(let r=1;r<=100;r+=1){const o=i(r/100);n+=ca(s.x,s.y,o.x,o.y),s=o}return n},vw=(i,t)=>{let e,s=0,n=0,r={x:i.x,y:i.y},o=S({},r),a=.01,l=0;const h=i.iterator,u=i.angleFinder;for(;n<t&&a>1e-4;)o=h(s),l=s,e=ca(r.x,r.y,o.x,o.y),e+n>t?(s-=a,a/=2):(r=o,s+=a,n+=e);return S(S({},o),{},{angle:u(l)})},Cp=i=>{let t,e,s=0,n=0,r=0,o=0,a=0;const l=[];for(const h of i){const u={x:n,y:r,command:h[0],length:0};switch(h[0]){case"M":e=u,e.x=o=n=h[1],e.y=a=r=h[2];break;case"L":e=u,e.length=ca(n,r,h[1],h[2]),n=h[1],r=h[2];break;case"C":t=yp(n,r,h[1],h[2],h[3],h[4],h[5],h[6]),e=u,e.iterator=t,e.angleFinder=pw(n,r,h[1],h[2],h[3],h[4],h[5],h[6]),e.length=nd(t,n,r),n=h[5],r=h[6];break;case"Q":t=mw(n,r,h[1],h[2],h[3],h[4]),e=u,e.iterator=t,e.angleFinder=_w(n,r,h[1],h[2],h[3],h[4]),e.length=nd(t,n,r),n=h[3],r=h[4];break;case"Z":e=u,e.destX=o,e.destY=a,e.length=ca(n,r,o,a),n=o,r=a}s+=e.length,l.push(e)}return l.push({length:s,x:n,y:r}),l},yw=function(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cp(i),s=0;for(;t-e[s].length>0&&s<e.length-2;)t-=e[s].length,s++;const n=e[s],r=t/n.length,o=i[s];switch(n.command){case"M":return{x:n.x,y:n.y,angle:0};case"Z":return S(S({},new k(n.x,n.y).lerp(new k(n.destX,n.destY),r)),{},{angle:Math.atan2(n.destY-n.y,n.destX-n.x)});case"L":return S(S({},new k(n.x,n.y).lerp(new k(o[1],o[2]),r)),{},{angle:Math.atan2(o[2]-n.y,o[1]-n.x)});case"C":case"Q":return vw(n,t)}},bw=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),rd=new RegExp(hw,"g"),xw=new RegExp(Ji,"gi"),ww={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Cw=i=>{var t;const e=[],s=(t=i.match(bw))!==null&&t!==void 0?t:[];for(const n of s){const r=n[0];if(r==="z"||r==="Z"){e.push([r]);continue}const o=ww[r.toLowerCase()];let a=[];if(r==="a"||r==="A"){rd.lastIndex=0;for(let l=null;l=rd.exec(n);)a.push(...l.slice(1))}else a=n.match(xw)||[];for(let l=0;l<a.length;l+=o){const h=new Array(o),u=uw[r];h[0]=l>0&&u?u:r;for(let f=0;f<o;f++)h[f+1]=parseFloat(a[l+f]);e.push(h)}}return e},Sw=(i,t)=>i.map(e=>e.map((s,n)=>n===0||t===void 0?s:qt(s,t)).join(" ")).join(" ");function fc(i,t){const e=i.style;e&&t&&(typeof t=="string"?e.cssText+=";"+t:Object.entries(t).forEach(s=>{let[n,r]=s;return e.setProperty(n,r)}))}class Tw extends Zg{constructor(t){let{allowTouchScrolling:e=!1,containerClass:s=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),w(this,"upper",void 0),w(this,"container",void 0);const{el:n}=this.lower,r=this.createUpperCanvas();this.upper={el:r,ctx:r.getContext("2d")},this.applyCanvasStyle(n,{allowTouchScrolling:e}),this.applyCanvasStyle(r,{allowTouchScrolling:e,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(s),n.parentNode&&n.parentNode.replaceChild(o,n),o.append(n,r),this.container=o}createUpperCanvas(){const{el:t}=this.lower,e=Ts();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=Nn().createElement("div");return t.setAttribute("data-fabric","wrapper"),fc(t,{position:"relative"}),Pf(t),t}applyCanvasStyle(t,e){const{styles:s,allowTouchScrolling:n}=e;fc(t,S(S({},s),{},{"touch-action":n?"manipulation":He})),Pf(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:s,ctx:n}=this.upper;Qg(s,n,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),nc(this.upper.el,t),nc(this.container,t)}cleanupDOM(t){const e=this.container,{el:s}=this.lower,{el:n}=this.upper;super.cleanupDOM(t),e.removeChild(n),e.removeChild(s),e.parentNode&&e.parentNode.replaceChild(s,e)}dispose(){super.dispose(),Bs().dispose(this.upper.el),delete this.upper,delete this.container}}class Pa extends Wr{constructor(){super(...arguments),w(this,"targets",[]),w(this,"_hoveredTargets",[]),w(this,"_objectsToRender",void 0),w(this,"_currentTransform",null),w(this,"_groupSelector",null),w(this,"contextTopDirty",!1)}static getDefaults(){return S(S({},super.getDefaults()),Pa.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new Tw(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter(e=>!e.group&&e!==t).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),s=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=s,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,s){const n=this.targetFindTolerance,r=this.pixelFindContext;this.clearContext(r),r.save(),r.translate(-e+n,-s+n),r.transform(...this.viewportTransform);const o=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(r),t.selectionBackgroundColor=o,r.restore();const a=Math.round(n*this.getRetinaScaling());return kx(r,a,a,a)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find(s=>!!s&&t[s]===!0):t[e])}_shouldClearSelection(t,e){const s=this.getActiveObjects(),n=this._activeObject;return!!(!e||e&&n&&s.length>1&&s.indexOf(e)===-1&&n!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&n&&n!==e)}_shouldCenterTransform(t,e,s){if(!t)return;let n;return e===Ta||e===Xe||e===hs||e===Er?n=this.centeredScaling||t.centeredScaling:e===Hc&&(n=this.centeredRotation||t.centeredRotation),n?!s:s}_getOriginFromCorner(t,e){const s={x:t.originX,y:t.originY};return e&&(["ml","tl","bl"].includes(e)?s.x=ne:["mr","tr","br"].includes(e)&&(s.x=Lt),["tl","mt","tr"].includes(e)?s.y=ic:["bl","mb","br"].includes(e)&&(s.y=We)),s}_setupCurrentTransform(t,e,s){var n;const r=e.group?Pn(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:o="",control:a}=e.getActiveControl()||{},l=s&&a?(n=a.getActionHandler(t,e,a))===null||n===void 0?void 0:n.bind(a):$b,h=((m,v,b,C)=>{if(!v||!m)return"drag";const O=C.controls[v];return O.getActionName(b,O,C)})(s,o,t,e),u=t[this.centeredKey],f=this._shouldCenterTransform(e,h,u)?{x:xt,y:xt}:this._getOriginFromCorner(e,o),g={target:e,action:h,actionHandler:l,actionPerformed:!1,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:r.x-e.left,offsetY:r.y-e.top,originX:f.x,originY:f.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:re(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:u,original:S(S({},tp(e)),{},{originX:f.x,originY:f.y})};this._currentTransform=g,this.fire("before:transform",{e:t,transform:g})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:s,deltaX:n,deltaY:r}=this._groupSelector,o=new k(e,s).transform(this.viewportTransform),a=new k(e+n,s+r).transform(this.viewportTransform),l=this.selectionLineWidth/2;let h=Math.min(o.x,a.x),u=Math.min(o.y,a.y),f=Math.max(o.x,a.x),g=Math.max(o.y,a.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(h,u,f-h,g-u)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,h+=l,u+=l,f-=l,g-=l,we.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(h,u,f-h,g-u))}findTarget(t){if(this.skipTargetFind)return;const e=this.getViewportPoint(t),s=this._activeObject,n=this.getActiveObjects();if(this.targets=[],s&&n.length>=1){if(s.findControl(e,rc(t))||n.length>1&&this.searchPossibleTargets([s],e))return s;if(s===this.searchPossibleTargets([s],e)){if(this.preserveObjectStacking){const r=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&o&&o!==s?(this.targets=r,s):o}return s}}return this.searchPossibleTargets(this._objects,e)}_pointIsInObjectSelectionArea(t,e){let s=t.getCoords();const n=this.getZoom(),r=t.padding/n;if(r){const[o,a,l,h]=s,u=Math.atan2(a.y-o.y,a.x-o.x),f=Zs(u)*r,g=ti(u)*r,m=f+g,v=f-g;s=[new k(o.x-v,o.y-m),new k(a.x+m,a.y-v),new k(l.x+v,l.y+m),new k(h.x-m,h.y+v)]}return Zt.isPointInPolygon(e,s)}_checkTarget(t,e){return!!(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,Pn(e,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing||!this.isTargetTransparent(t,e.x,e.y)))}_searchPossibleTargets(t,e){let s=t.length;for(;s--;){const n=t[s];if(this._checkTarget(n,e)){if(Ho(n)&&n.subTargetCheck){const r=this._searchPossibleTargets(n._objects,e);r&&this.targets.push(r)}return n}}}searchPossibleTargets(t,e){const s=this._searchPossibleTargets(t,e);if(s&&Ho(s)&&s.interactive&&this.targets[0]){const n=this.targets;for(let r=n.length-1;r>0;r--){const o=n[r];if(!Ho(o)||!o.interactive)return o}return n[0]}return s}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const s=this.upperCanvasEl,n=s.getBoundingClientRect();let r=Hb(t),o=n.width||0,a=n.height||0;o&&a||(We in n&&ic in n&&(a=Math.abs(n.top-n.bottom)),ne in n&&Lt in n&&(o=Math.abs(n.right-n.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,e||(r=Pn(r,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(r.x/=l,r.y/=l);const h=o===0||a===0?new k(1,1):new k(s.width/o,s.height/a);return r.multiply(h)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Ts(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return Wi(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,e){let s=!1,n=!1;const r=this.getActiveObjects(),o=[],a=[];t.forEach(l=>{r.includes(l)||(s=!0,l.fire("deselected",{e,target:l}),a.push(l))}),r.forEach(l=>{t.includes(l)||(s=!0,l.fire("selected",{e,target:l}),o.push(l))}),t.length>0&&r.length>0?(n=!0,s&&this.fire("selection:updated",{e,selected:o,deselected:a})):r.length>0?(n=!0,this.fire("selection:created",{e,selected:o})):t.length>0&&(n=!0,this.fire("selection:cleared",{e,deselected:a})),n&&(this._objectsToRender=void 0)}setActiveObject(t,e){const s=this.getActiveObjects(),n=this._setActiveObject(t,e);return this._fireSelectionEvents(s,e),n}_setActiveObject(t,e){const s=this._activeObject;return s!==t&&!(!this._discardActiveObject(e,t)&&this._activeObject)&&!t.onSelect({e})&&(this._activeObject=t,Wi(t)&&s!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,e){const s=this._activeObject;return!!s&&!s.onDeselect({e:t,object:e})&&(this._currentTransform&&this._currentTransform.target===s&&this.endCurrentTransform(t),Wi(s)&&s===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),s=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[s]});const n=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),n}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,s=e.target,n={e:t,target:s,transform:e,action:e.action};s._scaling&&(s._scaling=!1),s.setCoords(),e.actionPerformed&&(this.fire("object:modified",n),s.fire(sa,n))}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeObject;Wi(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,s){const n=this._realizeGroupTransformOnObject(t),r=super._toObject(t,e,s);return t.set(n),r}_realizeGroupTransformOnObject(t){const{group:e}=t;if(e&&Wi(e)&&this._activeObject===e){const s=Xn(t,["angle","flipX","flipY",Lt,Xe,hs,Wn,Hn,We]);return Xb(t,e.calcOwnMatrix()),s}return{}}_setSVGObject(t,e,s){const n=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,s),e.set(n)}}w(Pa,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Ow{constructor(t){w(this,"targets",[]),w(this,"__disposer",void 0);const e=()=>{const{hiddenTextarea:n}=t.getActiveObject()||{};n&&n.focus()},s=t.upperCanvasEl;s.addEventListener("click",e),this.__disposer=()=>s.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach(t=>{t.isEditing&&t.exitEditing()})}add(t){this.targets.push(t)}remove(t){this.unregister(t),wn(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Ew=["target","oldTarget","fireCanvas","e"],$e={passive:!1},_n=(i,t)=>{const e=i.getViewportPoint(t),s=i.getScenePoint(t);return{viewportPoint:e,scenePoint:s,pointer:e,absolutePointer:s}},hi=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];return i.addEventListener(...e)},rs=function(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];return i.removeEventListener(...e)},Aw={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class dc extends Pa{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),w(this,"_isClick",void 0),w(this,"textEditingManager",new Ow(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(hi,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const s=this.upperCanvasEl,n=this._getEventPrefix();t(Jg(s),"resize",this._onResize),t(s,n+"down",this._onMouseDown),t(s,"".concat(n,"move"),this._onMouseMove,$e),t(s,"".concat(n,"out"),this._onMouseOut),t(s,"".concat(n,"enter"),this._onMouseEnter),t(s,"wheel",this._onMouseWheel),t(s,"contextmenu",this._onContextMenu),t(s,"click",this._onClick),t(s,"dblclick",this._onClick),t(s,"dragstart",this._onDragStart),t(s,"dragend",this._onDragEnd),t(s,"dragover",this._onDragOver),t(s,"dragenter",this._onDragEnter),t(s,"dragleave",this._onDragLeave),t(s,"drop",this._onDrop),this.enablePointerEvents||t(s,"touchstart",this._onTouchStart,$e)}removeListeners(){this.addOrRemove(rs,"remove");const t=this._getEventPrefix(),e=ys(this.upperCanvasEl);rs(e,"".concat(t,"up"),this._onMouseUp),rs(e,"touchend",this._onTouchEnd,$e),rs(e,"".concat(t,"move"),this._onMouseMove,$e),rs(e,"touchmove",this._onMouseMove,$e),clearTimeout(this._willAddMouseDown)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,s=S({e:t},_n(this,t));this.fire("mouse:out",S(S({},s),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",S({},s)),this._hoveredTargets.forEach(n=>{this.fire("mouse:out",S(S({},s),{},{target:n})),n&&n.fire("mouseout",S({},s))}),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",S({e:t},_n(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(e&&e.onDragStart(t)){this._dragSource=e;const s={e:t,target:e};return this.fire("dragstart",s),e.fire("dragstart",s),void hi(this.upperCanvasEl,"drag",this._onDragProgress)}jf(t)}_renderDragEffects(t,e,s){let n=!1;const r=this._dropTarget;r&&r!==e&&r!==s&&(r.clearContextTop(),n=!0),e==null||e.clearContextTop(),s!==e&&(s==null||s.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),e&&(o.save(),e.transform(o),e.renderDragSourceEffect(t),o.restore(),n=!0),s&&(o.save(),s.transform(o),s.renderDropTargetEffect(t),o.restore(),n=!0),o.restore(),n&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==He,s=e?this._activeObject:void 0,n={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:s};rs(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",n),this._dragSource&&this._dragSource.fire("dragend",n),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:s,targets:n}=this.findDragTargets(t),r=this._dragSource,o={e:t,target:s,subTargets:n,dragSource:r,canDrop:!1,dropTarget:void 0};let a;this.fire(e,o),this._fireEnterLeaveEvents(s,o),s&&(s.canDrop(t)&&(a=s),s.fire(e,o));for(let l=0;l<n.length;l++){const h=n[l];h.canDrop(t)&&(a=h),h.fire(e,o)}this._renderDragEffects(t,r,a),this._dropTarget=a}_onDragEnter(t){const{target:e,targets:s}=this.findDragTargets(t),n={e:t,target:e,subTargets:s,dragSource:this._dragSource};this.fire("dragenter",n),this._fireEnterLeaveEvents(e,n)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:s}=this.findDragTargets(t),n=this._basicEventHandler("drop:before",S({e:t,target:e,subTargets:s,dragSource:this._dragSource},_n(this,t)));n.didDrop=!1,n.dropTarget=void 0,this._basicEventHandler("drop",n),this.fire("drop:after",n)}_onContextMenu(t){const e=this.findTarget(t),s=this.targets||[],n=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:s});return this.stopContextMenu&&jf(t),this._basicEventHandler("contextmenu",n),!1}_onClick(t){const e=t.detail;e>3||e<2||(this._cacheTransformEventData(t),e==2&&t.type==="dblclick"&&this._handleEvent(t,"dblclick"),e==3&&this._handleEvent(t,"tripleclick"),this._resetTransformEventData())}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){let e=!this.allowTouchScrolling;const s=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),(this.isDrawingMode||s&&this._target===s)&&(e=!0),e&&t.preventDefault(),this._resetTransformEventData();const n=this.upperCanvasEl,r=this._getEventPrefix(),o=ys(n);hi(o,"touchend",this._onTouchEnd,$e),e&&hi(o,"touchmove",this._onMouseMove,$e),rs(n,"".concat(r,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,s=this._getEventPrefix();rs(e,"".concat(s,"move"),this._onMouseMove,$e);const n=ys(e);hi(n,"".concat(s,"up"),this._onMouseUp),hi(n,"".concat(s,"move"),this._onMouseMove,$e)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const e=this._getEventPrefix(),s=ys(this.upperCanvasEl);rs(s,"touchend",this._onTouchEnd,$e),rs(s,"touchmove",this._onMouseMove,$e),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{hi(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,s=this._getEventPrefix();if(this._isMainEvent(t)){const n=ys(this.upperCanvasEl);rs(n,"".concat(s,"up"),this._onMouseUp),rs(n,"".concat(s,"move"),this._onMouseMove,$e),hi(e,"".concat(s,"move"),this._onMouseMove,$e)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||!e.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t}__onMouseUp(t){var e;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const s=this._currentTransform,n=this._isClick,r=this._target,{button:o}=t;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let a,l,h=!1;if(s&&(this._finalizeCurrentTransform(t),h=s.actionPerformed),!n){const u=r===this._activeObject;this.handleSelection(t),h||(h=this._shouldRender(r)||!u&&r===this._activeObject)}if(r){const u=r.findControl(this.getViewportPoint(t),rc(t)),{key:f,control:g}=u||{};if(l=f,r.selectable&&r!==this._activeObject&&r.activeOn==="up")this.setActiveObject(r,t),h=!0;else if(g){const m=g.getMouseUpHandler(t,r,g);m&&(a=this.getScenePoint(t),m.call(g,t,s,a.x,a.y))}r.isMoving=!1}if(s&&(s.target!==r||s.corner!==l)){const u=s.target&&s.target.controls[s.corner],f=u&&u.getMouseUpHandler(t,s.target,u);a=a||this.getScenePoint(t),f&&f.call(u,t,s,a.x,a.y)}this._setCursorFromEvent(t,r),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,r&&(r.__corner=void 0),h?this.requestRenderAll():n||(e=this._activeObject)!==null&&e!==void 0&&e.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:s,subTargets:n=[]}=e;this.fire(t,e),s&&s.fire(t,e);for(let r=0;r<n.length;r++)n[r]!==s&&n[r].fire(t,e);return e}_handleEvent(t,e,s){const n=this._target,r=this.targets||[],o=S(S(S({e:t,target:n,subTargets:r},_n(this,t)),{},{transform:this._currentTransform},e==="up:before"||e==="up"?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{}),e==="down:before"||e==="down"?s:{});this.fire("mouse:".concat(e),o),n&&n.fire("mouse".concat(e),o);for(let a=0;a<r.length;a++)r[a]!==n&&r[a].fire("mouse".concat(e),o)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target,s=!!e&&e===this._activeObject;const{button:n}=t;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(t,"down",{alreadySelected:s}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let r=this._shouldRender(e),o=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,o=!0,r=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const a=this.getScenePoint(t);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(s=!!e&&e===this._activeObject,e){e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const a=e.findControl(this.getViewportPoint(t),rc(t));if(e===this._activeObject&&(a||!o)){this._setupCurrentTransform(t,e,s);const l=a?a.control:void 0,h=this.getScenePoint(t),u=l&&l.getMouseDownHandler(t,e,l);u&&u.call(l,t,this._currentTransform,h.x,h.y)}}r&&(this._objectsToRender=void 0),this._handleEvent(t,"down",{alreadySelected:s}),r&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=Pn(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const s=this.getScenePoint(t);e.deltaX=s.x-e.x,e.deltaY=s.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const s=this.findTarget(t);this._setCursorFromEvent(t,s),this._fireOverOutEvents(t,s)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const s=this._hoveredTarget,n=this._hoveredTargets,r=this.targets,o=Math.max(n.length,r.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:s,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e:t,target:r[a],oldTarget:n[a]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const s=this._draggedoverTarget,n=this._hoveredTargets,r=this.targets,o=Math.max(n.length,r.length);this.fireSyntheticInOutEvents("drag",S(S({},e),{},{target:t,oldTarget:s,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",S(S({},e),{},{target:r[a],oldTarget:n[a]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:s,oldTarget:n,fireCanvas:r,e:o}=e,a=Jt(e,Ew);const{targetIn:l,targetOut:h,canvasIn:u,canvasOut:f}=Aw[t],g=n!==s;if(n&&g){const m=S(S({},a),{},{e:o,target:n,nextTarget:s},_n(this,o));r&&this.fire(f,m),n.fire(h,m)}if(s&&g){const m=S(S({},a),{},{e:o,target:s,previousTarget:n},_n(this,o));r&&this.fire(u,m),s.fire(l,m)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getScenePoint(t),s=this._currentTransform,n=s.target,r=n.group?Pn(e,void 0,n.group.calcTransformMatrix()):e;s.shiftKey=t.shiftKey,s.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,s,r),s.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,s){const{action:n,actionHandler:r,target:o}=e,a=!!r&&r(t,e,s.x,s.y);a&&o.setCoords(),n==="drag"&&a&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||a}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let s=e.hoverCursor||this.hoverCursor;const n=Wi(this._activeObject)?this._activeObject:null,r=(!n||e.group!==n)&&e.findControl(this.getViewportPoint(t));if(r){const o=r.control;this.setCursor(o.cursorStyleHandler(t,o,e))}else e.subTargetCheck&&this.targets.concat().reverse().map(o=>{s=o.hoverCursor||s}),this.setCursor(s)}handleMultiSelection(t,e){const s=this._activeObject,n=Wi(s);if(s&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(s!==e||n)&&(n||!e.isDescendantOf(s)&&!s.isDescendantOf(e))&&!e.onSelect({e:t})&&!s.getActiveControl()){if(n){const r=s.getObjects();if(e===s){const o=this.getViewportPoint(t);if(!(e=this.searchPossibleTargets(r,o)||this.searchPossibleTargets(this._objects,o))||!e.selectable)return!1}e.group===s?(s.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],s.size()===1&&this._setActiveObject(s.item(0),t)):(s.multiSelectAdd(e),this._hoveredTarget=s,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(r,t)}else{s.isEditing&&s.exitEditing();const r=new(tt.getClass("ActiveSelection"))([],{canvas:this});r.multiSelectAdd(s,e),this._hoveredTarget=r,this._setActiveObject(r,t),this._fireSelectionEvents([s],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:s,deltaX:n,deltaY:r}=this._groupSelector,o=new k(e,s),a=o.add(new k(n,r)),l=o.min(a),h=o.max(a).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:h.x,height:h.y},{includeIntersecting:!this.selectionFullyContained}),f=o.eq(a)?u[0]?[u[0]]:[]:u.length>1?u.filter(g=>!g.onSelect({e:t})).reverse():u;if(f.length===1)this.setActiveObject(f[0],t);else if(f.length>1){const g=tt.getClass("ActiveSelection");this.setActiveObject(new g(f,{canvas:this}),t)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Sp={x1:0,y1:0,x2:0,y2:0},Dw=S(S({},Sp),{},{r1:0,r2:0}),Sn=(i,t)=>isNaN(i)&&typeof t=="number"?t:i,kw=/^(\d+\.\d+)%|(\d+)%$/;function Tp(i){return i&&kw.test(i)}function Op(i,t){const e=typeof i=="number"?i:typeof i=="string"?parseFloat(i)/(Tp(i)?100:1):NaN;return Bn(0,Sn(e,t),1)}const Mw=/\s*;\s*/,Pw=/\s*:\s*/;function jw(i,t){let e,s;const n=i.getAttribute("style");if(n){const o=n.split(Mw);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,h]=o[a].split(Pw).map(u=>u.trim());l==="stop-color"?e=h:l==="stop-opacity"&&(s=h)}}const r=new Nt(e||i.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Op(i.getAttribute("offset"),0),color:r.toRgb(),opacity:Sn(parseFloat(s||i.getAttribute("stop-opacity")||""),1)*r.getAlpha()*t}}function Fw(i,t){const e=[],s=i.getElementsByTagName("stop"),n=Op(t,1);for(let r=s.length;r--;)e.push(jw(s[r],n));return e}function Ep(i){return i.nodeName==="linearGradient"||i.nodeName==="LINEARGRADIENT"?"linear":"radial"}function Ap(i){return i.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function gs(i,t){return i.getAttribute(t)}function Lw(i,t){return function(e,s){let n,{width:r,height:o,gradientUnits:a}=s;return Object.keys(e).reduce((l,h)=>{const u=e[h];return u==="Infinity"?n=1:u==="-Infinity"?n=0:(n=typeof u=="string"?parseFloat(u):u,typeof u=="string"&&Tp(u)&&(n*=.01,a==="pixels"&&(h!=="x1"&&h!=="x2"&&h!=="r2"||(n*=r),h!=="y1"&&h!=="y2"||(n*=o)))),l[h]=n,l},{})}(Ep(i)==="linear"?function(e){return{x1:gs(e,"x1")||0,y1:gs(e,"y1")||0,x2:gs(e,"x2")||"100%",y2:gs(e,"y2")||0}}(i):function(e){return{x1:gs(e,"fx")||gs(e,"cx")||"50%",y1:gs(e,"fy")||gs(e,"cy")||"50%",r1:0,x2:gs(e,"cx")||"50%",y2:gs(e,"cy")||"50%",r2:gs(e,"r")||"50%"}}(i),S(S({},t),{},{gradientUnits:Ap(i)}))}class go{constructor(t){const{type:e="linear",gradientUnits:s="pixels",coords:n={},colorStops:r=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:h}=t||{};Object.assign(this,{type:e,gradientUnits:s,coords:S(S({},e==="radial"?Dw:Sp),n),colorStops:r,offsetX:o,offsetY:a,gradientTransform:l,id:h?"".concat(h,"_").concat(yi()):yi()})}addColorStop(t){for(const e in t){const s=new Nt(t[e]);this.colorStops.push({offset:parseFloat(e),color:s.toRgb(),opacity:s.getAlpha()})}return this}toObject(t){return S(S({},Xn(this,t)),{},{type:this.type,coords:S({},this.coords),colorStops:this.colorStops.map(e=>S({},e)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[],n=this.gradientTransform?this.gradientTransform.concat():Re.concat(),r=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(f=>S({},f)).sort((f,g)=>f.offset-g.offset);let a=-this.offsetX,l=-this.offsetY;var h;r==="objectBoundingBox"?(a/=t.width,l/=t.height):(a+=t.width/2,l+=t.height/2),(h=t)&&typeof h._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=t.pathOffset.x,l-=t.pathOffset.y),n[4]-=a,n[5]-=l;const u=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(r,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(Dr(n),'"'),""].join(" ");if(this.type==="linear"){const{x1:f,y1:g,x2:m,y2:v}=this.coords;s.push("<linearGradient ",u,' x1="',f,'" y1="',g,'" x2="',m,'" y2="',v,`">
`)}else if(this.type==="radial"){const{x1:f,y1:g,x2:m,y2:v,r1:b,r2:C}=this.coords,O=b>C;s.push("<radialGradient ",u,' cx="',O?f:m,'" cy="',O?g:v,'" r="',O?b:C,'" fx="',O?m:f,'" fy="',O?v:g,`">
`),O&&(o.reverse(),o.forEach(L=>{L.offset=1-L.offset}));const D=Math.min(b,C);if(D>0){const L=D/Math.max(b,C);o.forEach(P=>{P.offset+=L*(1-P.offset)})}}return o.forEach(f=>{let{color:g,offset:m,opacity:v}=f;s.push("<stop ",'offset="',100*m+"%",'" style="stop-color:',g,v!==void 0?";stop-opacity: "+v:";",`"/>
`)}),s.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),s.join("")}toLive(t){const{x1:e,y1:s,x2:n,y2:r,r1:o,r2:a}=this.coords,l=this.type==="linear"?t.createLinearGradient(e,s,n,r):t.createRadialGradient(e,s,o,n,r,a);return this.colorStops.forEach(h=>{let{color:u,opacity:f,offset:g}=h;l.addColorStop(g,f!==void 0?new Nt(u).setAlpha(f).toRgba():u)}),l}static async fromObject(t){const{colorStops:e,gradientTransform:s}=t;return new this(S(S({},t),{},{colorStops:e?e.map(n=>S({},n)):void 0,gradientTransform:s?[...s]:void 0}))}static fromElement(t,e,s){const n=Ap(t),r=e._findCenterFromElement();return new this(S({id:t.getAttribute("id")||void 0,type:Ep(t),coords:Lw(t,{width:s.viewBoxWidth||s.width,height:s.viewBoxHeight||s.height}),colorStops:Fw(t,s.opacity),gradientUnits:n,gradientTransform:cc(t.getAttribute("gradientTransform")||"")},n==="pixels"?{offsetX:e.width/2-r.x,offsetY:e.height/2-r.y}:{offsetX:0,offsetY:0}))}}w(go,"type","Gradient"),tt.setClass(go,"gradient"),tt.setClass(go,"linear"),tt.setClass(go,"radial");const Rw=["type","source","patternTransform"];class Pl{get type(){return"pattern"}set type(t){vi("warn","Setting type has no effect",t)}constructor(t){w(this,"repeat","repeat"),w(this,"offsetX",0),w(this,"offsetY",0),w(this,"crossOrigin",""),this.id=yi(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:s}=this;return S(S({},Xn(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:s,offsetX:qt(this.offsetX,Pt.NUM_FRACTION_DIGITS),offsetY:qt(this.offsetY,Pt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:s}=t;const{source:n,repeat:r,id:o}=this,a=Sn(this.offsetX/e,0),l=Sn(this.offsetY/s,0),h=r==="repeat-y"||r==="no-repeat"?1+Math.abs(a||0):Sn(n.width/e,0),u=r==="repeat-x"||r==="no-repeat"?1+Math.abs(l||0):Sn(n.height/s,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(h,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(n.width,'" height="').concat(n.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{type:s,source:n,patternTransform:r}=t,o=Jt(t,Rw);const a=await Xo(n,S(S({},e),{},{crossOrigin:o.crossOrigin}));return new this(S(S({},o),{},{patternTransform:r&&r.slice(0),source:a}))}}w(Pl,"type","Pattern"),tt.setClass(Pl),tt.setClass(Pl,"pattern");const Iw=["path","left","top"],Bw=["d"];class Hi extends we{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:s,left:n,top:r}=e,o=Jt(e,Iw);super(),Object.assign(this,Hi.ownDefaults),this.setOptions(o),this._setPath(t||[],!0),typeof n=="number"&&this.set(Lt,n),typeof r=="number"&&this.set(We,r)}_setPath(t,e){this.path=gw(Array.isArray(t)?t:Cw(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new k(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const e=-this.pathOffset.x,s=-this.pathOffset.y;t.beginPath();for(const n of this.path)switch(n[0]){case"L":t.lineTo(n[1]+e,n[2]+s);break;case"M":t.moveTo(n[1]+e,n[2]+s);break;case"C":t.bezierCurveTo(n[1]+e,n[2]+s,n[3]+e,n[4]+s,n[5]+e,n[6]+s);break;case"Q":t.quadraticCurveTo(n[1]+e,n[2]+s,n[3]+e,n[4]+s);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return S(S({},super.toObject(t)),{},{path:this.path.map(e=>e.slice())})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=Sw(this.path,Pt.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=Pt.NUM_FRACTION_DIGITS;return" translate(".concat(qt(-this.pathOffset.x,t),", ").concat(qt(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:s,pathOffset:n}=this._calcDimensions();this.set({width:e,height:s,pathOffset:n}),t&&this.setPositionByOrigin(n,xt,xt)}_calcBoundsFromPath(){const t=[];let e=0,s=0,n=0,r=0;for(const o of this.path)switch(o[0]){case"L":n=o[1],r=o[2],t.push({x:e,y:s},{x:n,y:r});break;case"M":n=o[1],r=o[2],e=n,s=r;break;case"C":t.push(...id(n,r,o[1],o[2],o[3],o[4],o[5],o[6])),n=o[5],r=o[6];break;case"Q":t.push(...id(n,r,o[1],o[2],o[1],o[2],o[3],o[4])),n=o[3],r=o[4];break;case"Z":n=e,r=s}return Js(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return S(S({},t),{},{pathOffset:new k(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,s){const n=ni(t,this.ATTRIBUTE_NAMES,s),{d:r}=n;return new this(r,S(S(S({},Jt(n,Bw)),e),{},{left:void 0,top:void 0}))}}w(Hi,"type","Path"),w(Hi,"cacheProperties",[...ii,"path","fillRule"]),w(Hi,"ATTRIBUTE_NAMES",[...Si,"d"]),tt.setClass(Hi),tt.setSVGClass(Hi);const Nw=["left","top","radius"],Dp=["radius","startAngle","endAngle","counterClockwise"];class js extends we{static getDefaults(){return S(S({},super.getDefaults()),js.ownDefaults)}constructor(t){super(),Object.assign(this,js.ownDefaults),this.setOptions(t)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,re(this.startAngle),re(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(Xe)}getRadiusY(){return this.get("radius")*this.get(hs)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Dp,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,s=re(this.startAngle),n=re(this.endAngle),r=Zs(s)*e,o=ti(s)*e,a=Zs(n)*e,l=ti(n)*e,h=t>180?1:0,u=this.counterClockwise?0:1;return['<path d="M '.concat(r," ").concat(o," A ").concat(e," ").concat(e," 0 ").concat(h," ").concat(u," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(t,e,s){const n=ni(t,this.ATTRIBUTE_NAMES,s),{left:r=0,top:o=0,radius:a=0}=n;return new this(S(S({},Jt(n,Nw)),{},{radius:a,left:r-a,top:o-a}))}static fromObject(t){return super._fromObject(t)}}w(js,"type","Circle"),w(js,"cacheProperties",[...ii,...Dp]),w(js,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),w(js,"ATTRIBUTE_NAMES",["cx","cy","r",...Si]),tt.setClass(js),tt.setSVGClass(js);const Ww=["x1","y1","x2","y2"],Hw=["x1","y1","x2","y2"],gc=["x1","x2","y1","y2"];class Vi extends we{constructor(){let[t,e,s,n]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Vi.ownDefaults),this.setOptions(r),this.x1=t,this.x2=s,this.y1=e,this.y2=n,this._setWidthHeight();const{left:o,top:a}=r;typeof o=="number"&&this.set(Lt,o),typeof a=="number"&&this.set(We,a)}_setWidthHeight(){const{x1:t,y1:e,x2:s,y2:n}=this;this.width=Math.abs(s-t),this.height=Math.abs(n-e);const{left:r,top:o,width:a,height:l}=Js([{x:t,y:e},{x:s,y:n}]),h=new k(r+a/2,o+l/2);this.setPositionByOrigin(h,xt,xt)}_set(t,e){return super._set(t,e),gc.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const s=t.strokeStyle;var n;as(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(n=this.stroke)!==null&&n!==void 0?n:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=s}_findCenterFromElement(){return new k((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return S(S({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:s,y2:n,width:r,height:o}=this,a=t<=e?-1:1,l=s<=n?-1:1;return{x1:a*r/2,x2:a*-r/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:t,x2:e,y1:s,y2:n}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(s,'" x2="').concat(e,'" y2="').concat(n,`" />
`)]}static async fromElement(t,e,s){const n=ni(t,this.ATTRIBUTE_NAMES,s),{x1:r=0,y1:o=0,x2:a=0,y2:l=0}=n;return new this([r,o,a,l],Jt(n,Ww))}static fromObject(t){let{x1:e,y1:s,x2:n,y2:r}=t,o=Jt(t,Hw);return this._fromObject(S(S({},o),{},{points:[e,s,n,r]}),{extraParam:"points"})}}w(Vi,"type","Line"),w(Vi,"cacheProperties",[...ii,...gc]),w(Vi,"ATTRIBUTE_NAMES",Si.concat(gc)),tt.setClass(Vi),tt.setSVGClass(Vi);class Xi extends we{static getDefaults(){return S(S({},super.getDefaults()),Xi.ownDefaults)}constructor(t){super(),Object.assign(this,Xi.ownDefaults),this.setOptions(t)}_render(t){const e=this.width/2,s=this.height/2;t.beginPath(),t.moveTo(-e,s),t.lineTo(0,-s),t.lineTo(e,s),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}w(Xi,"type","Triangle"),w(Xi,"ownDefaults",{width:100,height:100}),tt.setClass(Xi),tt.setSVGClass(Xi);const kp=["rx","ry"];class Us extends we{static getDefaults(){return S(S({},super.getDefaults()),Us.ownDefaults)}constructor(t){super(),Object.assign(this,Us.ownDefaults),this.setOptions(t)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get(Xe)}getRy(){return this.get("ry")*this.get(hs)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...kp,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,ta,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,s){const n=ni(t,this.ATTRIBUTE_NAMES,s);return n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,new this(n)}}function Vw(i){if(!i)return[];const t=i.replace(/,/g," ").trim().split(/\s+/),e=[];for(let s=0;s<t.length;s+=2)e.push({x:parseFloat(t[s]),y:parseFloat(t[s+1])});return e}w(Us,"type","Ellipse"),w(Us,"cacheProperties",[...ii,...kp]),w(Us,"ownDefaults",{rx:0,ry:0}),w(Us,"ATTRIBUTE_NAMES",[...Si,"cx","cy","rx","ry"]),tt.setClass(Us),tt.setSVGClass(Us);const Xw=["left","top"],Mp={exactBoundingBox:!1};class ms extends we{static getDefaults(){return S(S({},super.getDefaults()),ms.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),w(this,"strokeDiff",void 0),Object.assign(this,ms.ownDefaults),this.setOptions(e),this.points=t;const{left:s,top:n}=e;this.initialized=!0,this.setBoundingBox(!0),typeof s=="number"&&this.set(Lt,s),typeof n=="number"&&this.set(We,n)}isOpen(){return!0}_projectStrokeOnPoints(t){return Px(this.points,t,this.isOpen())}_calcDimensions(t){t=S({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map(h=>h.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new k,strokeOffset:new k,strokeDiff:new k};const s=Js(e),n=Oa(S(S({},t),{},{scaleX:1,scaleY:1})),r=Js(this.points.map(h=>Ie(h,n,!0))),o=new k(this.scaleX,this.scaleY);let a=s.left+s.width/2,l=s.top+s.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(re(this.skewX)),l-=a*Math.tan(re(this.skewY))),S(S({},s),{},{pathOffset:new k(a,l),strokeOffset:new k(r.left,r.top).subtract(new k(s.left,s.top)).multiply(o),strokeDiff:new k(s.width,s.height).subtract(new k(r.width,r.height)).multiply(o)})}_findCenterFromElement(){const t=Js(this.points);return new k(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:s,width:n,height:r,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:n,height:r,pathOffset:o,strokeOffset:a,strokeDiff:l}),t&&this.setPositionByOrigin(new k(e+n/2,s+r/2),xt,xt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new k(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(t).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var e,s;const{width:a,height:l}=this._calcDimensions(t);o=new k((e=t.width)!==null&&e!==void 0?e:a,(s=t.height)!==null&&s!==void 0?s:l)}else{var n,r;o=new k((n=t.width)!==null&&n!==void 0?n:this.width,(r=t.height)!==null&&r!==void 0?r:this.height)}return o.multiply(new k(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,e){const s=this.initialized&&this[t]!==e,n=super._set(t,e);return this.exactBoundingBox&&s&&((t===Xe||t===hs)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),n}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return S(S({},super.toObject(t)),{},{points:this.points.map(e=>{let{x:s,y:n}=e;return{x:s,y:n}})})}_toSVG(){const t=[],e=this.pathOffset.x,s=this.pathOffset.y,n=Pt.NUM_FRACTION_DIGITS;for(let r=0,o=this.points.length;r<o;r++)t.push(qt(this.points[r].x-e,n),",",qt(this.points[r].y-s,n)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,s=this.pathOffset.x,n=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-s,this.points[0].y-n);for(let r=0;r<e;r++){const o=this.points[r];t.lineTo(o.x-s,o.y-n)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,s){return new this(Vw(t.getAttribute("points")),S(S({},Jt(ni(t,this.ATTRIBUTE_NAMES,s),Xw)),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}w(ms,"ownDefaults",Mp),w(ms,"type","Polyline"),w(ms,"layoutProperties",[Wn,Hn,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),w(ms,"cacheProperties",[...ii,"points"]),w(ms,"ATTRIBUTE_NAMES",[...Si]),tt.setClass(ms),tt.setSVGClass(ms);class rr extends ms{isOpen(){return!1}}w(rr,"ownDefaults",Mp),w(rr,"type","Polygon"),tt.setClass(rr),tt.setSVGClass(rr);const Pp=["fontSize","fontWeight","fontFamily","fontStyle"],jp=["underline","overline","linethrough"],Fp=[...Pp,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Lp=[...Fp,...jp,"textBackgroundColor","direction"],Yw=[...Pp,...jp,Ve,"strokeWidth",ue,"deltaY","textBackgroundColor"],zw={_reNewline:Wc,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Lt,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Lt,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Fs="justify",ha="justify-left",_r="justify-right",vr="justify-center";class Rp extends we{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const e=t===void 0?this.styles:{line:this.styles[t]};for(const s in e)for(const n in e[s])for(const r in e[s][n])return!1;return!0}styleHas(t,e){if(!this.styles||e!==void 0&&!this.styles[e])return!1;const s=e===void 0?this.styles:{0:this.styles[e]};for(const n in s)for(const r in s[n])if(s[n][r][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let s,n,r=0,o=!0,a=0;for(const l in e){s=0;for(const h in e[l]){const u=e[l][h]||{};r++,u[t]!==void 0?(n?u[t]!==n&&(o=!1):n=u[t],u[t]===this[t]&&delete u[t]):o=!1,Object.keys(u).length!==0?s++:delete e[l][h]}s===0&&delete e[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&r===a&&(this[t]=n,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let s,n,r;for(n in e){for(r in s=e[n],s)delete s[r][t],Object.keys(s[r]).length===0&&delete s[r];Object.keys(s).length===0&&delete e[n]}}_extendStyles(t,e){const{lineIndex:s,charIndex:n}=this.get2DCursorLocation(t);this._getLineStyle(s)||this._setLineStyle(s);const r=zc(S(S({},this._getStyleDeclaration(s,n)),e),o=>o!==void 0);this._setStyleDeclaration(s,n,r)}getSelectionStyles(t,e,s){const n=[];for(let r=t;r<(e||t);r++)n.push(this.getStyleAtPosition(r,s));return n}getStyleAtPosition(t,e){const{lineIndex:s,charIndex:n}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(s,n):this._getStyleDeclaration(s,n)}setSelectionStyles(t,e,s){for(let n=e;n<(s||e);n++)this._extendStyles(n,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var s;const n=this.styles&&this.styles[t];return n&&(s=n[e])!==null&&s!==void 0?s:{}}getCompleteStyleDeclaration(t,e){return S(S({},Xn(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,s){this.styles[t][e]=s}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}w(Rp,"_styleProperties",Yw);const Uw=/  +/g,Gw=/"/g;function jl(i,t,e,s,n){return"		".concat(function(r,o){let{left:a,top:l,width:h,height:u}=o,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pt.NUM_FRACTION_DIGITS;const g=kr(ue,r,!1),[m,v,b,C]=[a,l,h,u].map(O=>qt(O,f));return"<rect ".concat(g,' x="').concat(m,'" y="').concat(v,'" width="').concat(b,'" height="').concat(C,'"></rect>')}(i,{left:t,top:e,width:s,height:n}),`
`)}const $w=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Fl;class je extends Rp{static getDefaults(){return S(S({},super.getDefaults()),je.ownDefaults)}constructor(t,e){super(),w(this,"__charBounds",[]),Object.assign(this,je.ownDefaults),this.setOptions(e),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=Cp(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Fs)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,s,n,r,o,a;for(let l=0,h=this._textLines.length;l<h;l++)if((this.textAlign===Fs||l!==h-1&&!this.isEndOfWrapping(l))&&(n=0,r=this._textLines[l],e=this.getLineWidth(l),e<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){s=a.length,t=(this.width-e)/s;for(let u=0;u<=r.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(r[u])?(o.width+=t,o.kernedWidth+=t,o.left+=n,n+=t):o.left+=n}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const s=e?this._unwrappedTextLines:this._textLines;let n;for(n=0;n<s.length;n++){if(t<=s[n].length)return{lineIndex:n,charIndex:t};t-=s[n].length+this.missingNewlineOffset(n,e)}return{lineIndex:n-1,charIndex:s[n-1].length<t?s[n-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===Ve?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,s){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case xt:t.textBaseline="middle";break;case"ascender":t.textBaseline=We;break;case"descender":t.textBaseline=ic}t.font=this._getFontDeclaration(e,s)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,s=this._textLines.length;e<s;e++){const n=this.getLineWidth(e);n>t&&(t=n)}return t}_renderTextLine(t,e,s,n,r,o){this._renderChars(t,e,s,n,r,o)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,s=this._getLeftOffset();let n=this._getTopOffset();for(let r=0,o=this._textLines.length;r<o;r++){const a=this.getHeightOfLine(r);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",r)){n+=a;continue}const l=this._textLines[r].length,h=this._getLineLeftOffset(r);let u,f,g=0,m=0,v=this.getValueOfPropertyAt(r,0,"textBackgroundColor");for(let b=0;b<l;b++){const C=this.__charBounds[r][b];f=this.getValueOfPropertyAt(r,b,"textBackgroundColor"),this.path?(t.save(),t.translate(C.renderLeft,C.renderTop),t.rotate(C.angle),t.fillStyle=f,f&&t.fillRect(-C.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),C.width,a/this.lineHeight),t.restore()):f!==v?(u=s+h+m,this.direction==="rtl"&&(u=this.width-u-g),t.fillStyle=v,v&&t.fillRect(u,n,g,a/this.lineHeight),m=C.left,g=C.width,v=f):g+=C.kernedWidth}f&&!this.path&&(u=s+h+m,this.direction==="rtl"&&(u=this.width-u-g),t.fillStyle=f,t.fillRect(u,n,g,a/this.lineHeight)),n+=a}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,s,n){const r=pr.getFontCache(e),o=this._getFontDeclaration(e),a=s+t,l=s&&o===this._getFontDeclaration(n),h=e.fontSize/this.CACHE_FONT_SIZE;let u,f,g,m;if(s&&r[s]!==void 0&&(g=r[s]),r[t]!==void 0&&(m=u=r[t]),l&&r[a]!==void 0&&(f=r[a],m=f-g),u===void 0||g===void 0||f===void 0){const v=function(){return Fl||(Fl=us({width:0,height:0}).getContext("2d")),Fl}();this._setTextStyles(v,e,!0),u===void 0&&(m=u=v.measureText(t).width,r[t]=u),g===void 0&&l&&s&&(g=v.measureText(s).width,r[s]=g),l&&f===void 0&&(f=v.measureText(a).width,r[a]=f,m=f-g)}return{width:u*h,kernedWidth:m*h}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,s,n=0;const r=this.pathSide===ne,o=this.path,a=this._textLines[t],l=a.length,h=new Array(l);this.__charBounds[t]=h;for(let u=0;u<l;u++){const f=a[u];s=this._getGraphemeBox(f,t,u,e),h[u]=s,n+=s.kernedWidth,e=f}if(h[l]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let u=0;const f=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case Lt:u=r?f-n:0;break;case xt:u=(f-n)/2;break;case ne:u=r?0:f-n}u+=this.pathStartOffset*(r?-1:1);for(let g=r?l-1:0;r?g>=0:g<l;r?g--:g++)s=h[g],u>f?u%=f:u<0&&(u+=f),this._setGraphemeOnPath(u,s),u+=s.kernedWidth}return{width:n,numOfSpaces:0}}_setGraphemeOnPath(t,e){const s=t+e.kernedWidth/2,n=this.path,r=yw(n.path,s,n.segmentsInfo);e.renderLeft=r.x-n.pathOffset.x,e.renderTop=r.y-n.pathOffset.y,e.angle=r.angle+(this.pathSide===ne?Math.PI:0)}_getGraphemeBox(t,e,s,n,r){const o=this.getCompleteStyleDeclaration(e,s),a=n?this.getCompleteStyleDeclaration(e,s-1):{},l=this._measureChar(t,o,n,a);let h,u=l.kernedWidth,f=l.width;this.charSpacing!==0&&(h=this._getWidthOfCharSpacing(),f+=h,u+=h);const g={width:f,left:0,height:o.fontSize,kernedWidth:u,deltaY:o.deltaY};if(s>0&&!r){const m=this.__charBounds[e][s-1];g.left=m.left+m.width+l.kernedWidth-l.width}return g}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let s=1,n=this._textLines[t].length;s<n;s++)e=Math.max(this.getHeightOfChar(t,s),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let s=0,n=this._textLines.length;s<n;s++)t=this.getHeightOfLine(s),e+=s===n-1?t/this.lineHeight:t;return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let s=0;const n=this._getLeftOffset(),r=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),h=l/this.lineHeight,u=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],n+u,r+s+h,o),s+=l}t.restore()}_renderTextFill(t){(this.fill||this.styleHas(ue))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,s,n,r,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(Fs),h=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!h,f=this.direction==="ltr",g=this.direction==="ltr"?1:-1,m=e.direction;let v,b,C,O,D,L="",P=0;if(e.save(),m!==this.direction&&(e.canvas.setAttribute("dir",f?"ltr":"rtl"),e.direction=f?"ltr":"rtl",e.textAlign=f?Lt:ne),r-=a*this._fontSizeFraction/this.lineHeight,u)return this._renderChar(t,e,o,0,s.join(""),n,r),void e.restore();for(let V=0,it=s.length-1;V<=it;V++)O=V===it||this.charSpacing||h,L+=s[V],C=this.__charBounds[o][V],P===0?(n+=g*(C.kernedWidth-C.width),P+=C.width):P+=C.kernedWidth,l&&!O&&this._reSpaceAndTab.test(s[V])&&(O=!0),O||(v=v||this.getCompleteStyleDeclaration(o,V),b=this.getCompleteStyleDeclaration(o,V+1),O=Zc(v,b,!1)),O&&(h?(e.save(),e.translate(C.renderLeft,C.renderTop),e.rotate(C.angle),this._renderChar(t,e,o,V,L,-P/2,0),e.restore()):(D=n,this._renderChar(t,e,o,V,L,D,r)),L="",v=b,n+=g*P,P=0);e.restore()}_applyPatternGradientTransformText(t){const e=this.width+this.strokeWidth,s=this.height+this.strokeWidth,n=us({width:e,height:s}),r=n.getContext("2d");return n.width=e,n.height=s,r.beginPath(),r.moveTo(0,0),r.lineTo(e,0),r.lineTo(e,s),r.lineTo(0,s),r.closePath(),r.translate(e/2,s/2),r.fillStyle=t.toLive(r),this._applyPatternGradientTransform(r,t),r.fill(),r.createPattern(n,"no-repeat")}handleFiller(t,e,s){let n,r;return as(s)?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?(n=-this.width/2,r=-this.height/2,t.translate(n,r),t[e]=this._applyPatternGradientTransformText(s),{offsetX:n,offsetY:r}):(t[e]=s.toLive(t),this._applyPatternGradientTransform(t,s)):(t[e]=s,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:s,strokeWidth:n}=e;return t.lineWidth=n,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",s)}_setFillStyles(t,e){let{fill:s}=e;return this.handleFiller(t,"fillStyle",s)}_renderChar(t,e,s,n,r,o,a){const l=this._getStyleDeclaration(s,n),h=this.getCompleteStyleDeclaration(s,n),u=t==="fillText"&&h.fill,f=t==="strokeText"&&h.stroke&&h.strokeWidth;if(f||u){if(e.save(),e.font=this._getFontDeclaration(h),l.textBackgroundColor&&this._removeShadow(e),l.deltaY&&(a+=l.deltaY),u){const g=this._setFillStyles(e,h);e.fillText(r,o-g.offsetX,a-g.offsetY)}if(f){const g=this._setStrokeStyles(e,h);e.strokeText(r,o-g.offsetX,a-g.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,s){const n=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),o=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),a={fontSize:r*s.size,deltaY:o+r*s.baseline};this.setSelectionStyles(a,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),s=this.width-e,n=this.textAlign,r=this.direction,o=this.isEndOfWrapping(t);let a=0;return n===Fs||n===vr&&!o||n===_r&&!o||n===ha&&!o?0:(n===xt&&(a=s/2),n===ne&&(a=s),n===vr&&(a=s/2),n===_r&&(a=s),r==="rtl"&&(n===ne||n===Fs||n===_r?a=0:n===Lt||n===ha?a=-s:n!==xt&&n!==vr||(a=-s/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,s){var n;return(n=this._getStyleDeclaration(t,e)[s])!==null&&n!==void 0?n:this[s]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let s=this._getTopOffset();const n=this._getLeftOffset(),r=this.path,o=this._getWidthOfCharSpacing(),a=this.offsets[e];for(let l=0,h=this._textLines.length;l<h;l++){const u=this.getHeightOfLine(l);if(!this[e]&&!this.styleHas(e,l)){s+=u;continue}const f=this._textLines[l],g=u/this.lineHeight,m=this._getLineLeftOffset(l);let v,b,C=0,O=0,D=this.getValueOfPropertyAt(l,0,e),L=this.getValueOfPropertyAt(l,0,ue);const P=s+g*(1-this._fontSizeFraction);let V=this.getHeightOfChar(l,0),it=this.getValueOfPropertyAt(l,0,"deltaY");for(let H=0,Z=f.length;H<Z;H++){const lt=this.__charBounds[l][H];v=this.getValueOfPropertyAt(l,H,e),b=this.getValueOfPropertyAt(l,H,ue);const St=this.getHeightOfChar(l,H),wt=this.getValueOfPropertyAt(l,H,"deltaY");if(r&&v&&b)t.save(),t.fillStyle=L,t.translate(lt.renderLeft,lt.renderTop),t.rotate(lt.angle),t.fillRect(-lt.kernedWidth/2,a*St+wt,lt.kernedWidth,this.fontSize/15),t.restore();else if((v!==D||b!==L||St!==V||wt!==it)&&O>0){let ut=n+m+C;this.direction==="rtl"&&(ut=this.width-ut-O),D&&L&&(t.fillStyle=L,t.fillRect(ut,P+a*V+it,O,this.fontSize/15)),C=lt.left,O=lt.width,D=v,L=b,V=St,it=wt}else O+=lt.kernedWidth}let J=n+m+C;this.direction==="rtl"&&(J=this.width-J-O),t.fillStyle=b,v&&b&&t.fillRect(J,P+a*V+it,O-o,this.fontSize/15),s+=u}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:s=this.fontWeight,fontSize:n=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;const o=t.includes("'")||t.includes('"')||t.includes(",")||je.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,s,"".concat(r?this.CACHE_FONT_SIZE:n,"px"),o].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return Qc(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),s=new Array(e.length),n=[`
`];let r=[];for(let o=0;o<e.length;o++)s[o]=this.graphemeSplit(e[o]),r=r.concat(s[o],n);return r.pop(),{_unwrappedLines:s,lines:e,graphemeText:r,graphemeLines:s}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return S(S({},super.toObject([...Lp,...t])),{},{styles:Lx(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:s}=this.constructor;super.set(t,e);let n=!1,r=!1;if(typeof t=="object")for(const o in t)o==="path"&&this.setPathInfo(),n=n||s.includes(o),r=r||o==="path";else n=s.includes(t),r=t==="path";return r&&this.setPathInfo(),n&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,s){const n=ni(t,je.ATTRIBUTE_NAMES,s),r=S(S({},e),n),{textAnchor:o=Lt,textDecoration:a="",dx:l=0,dy:h=0,top:u=0,left:f=0,fontSize:g=Nc,strokeWidth:m=1}=r,v=Jt(r,$w),b=new this((t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),S({left:f+l,top:u+h,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:g},v)),C=b.getScaledHeight()/b.height,O=((b.height+b.strokeWidth)*b.lineHeight-b.height)*C,D=b.getScaledHeight()+O;let L=0;return o===xt&&(L=b.getScaledWidth()/2),o===ne&&(L=b.getScaledWidth()),b.set({left:b.left-L,top:b.top-(D-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:m}),b}static fromObject(t){return this._fromObject(S(S({},t),{},{styles:Rx(t.styles||{},t.text)}),{extraParam:"text"})}}w(je,"textLayoutProperties",Fp),w(je,"cacheProperties",[...ii,...Lp]),w(je,"ownDefaults",zw),w(je,"type","Text"),w(je,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),w(je,"ATTRIBUTE_NAMES",Si.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),gp(je,[class extends rp{_toSVG(){const i=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(i.textTop,i.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(i){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:i,noStyle:!0,withShadow:!0}),e=this.path;return e?t+e._createBaseSVGMarkup(e._toSVG(),{reviver:i,withShadow:!0,additionalTransform:Dr(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(i){let{textBgRects:t,textSpans:e}=i;const s=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(Gw,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",s?'text-decoration="'.concat(s,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.join(""),`</text>
`]}_getSVGTextAndBg(i,t){const e=[],s=[];let n,r=i;this.backgroundColor&&s.push(...jl(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)n=this._getLineLeftOffset(o),this.direction==="rtl"&&(n+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(s,o,t+n,r),this._setSVGTextLineText(e,o,t+n,r),r+=this.getHeightOfLine(o);return{textSpans:e,textBgRects:s}}_createTextCharSpan(i,t,e,s,n){const r=Pt.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(t,i!==i.trim()||!!i.match(Uw)),a=o?'style="'.concat(o,'"'):"",l=t.deltaY,h=l?' dy="'.concat(qt(l,r),'" '):"",{angle:u,renderLeft:f,renderTop:g,width:m}=n;let v="";if(f!==void 0){const b=m/2;u&&(v=' rotate="'.concat(qt(ei(u),r),'"'));const C=Vn({angle:ei(u)});C[4]=f,C[5]=g;const O=new k(-b,0).transform(C);e=O.x,s=O.y}return'<tspan x="'.concat(qt(e,r),'" y="').concat(qt(s,r),'" ').concat(h).concat(v).concat(a,">").concat(jx(i),"</tspan>")}_setSVGTextLineText(i,t,e,s){const n=this.getHeightOfLine(t),r=this.textAlign.includes(Fs),o=this._textLines[t];let a,l,h,u,f,g="",m=0;s+=n*(1-this._fontSizeFraction)/this.lineHeight;for(let v=0,b=o.length-1;v<=b;v++)f=v===b||this.charSpacing||this.path,g+=o[v],h=this.__charBounds[t][v],m===0?(e+=h.kernedWidth-h.width,m+=h.width):m+=h.kernedWidth,r&&!f&&this._reSpaceAndTab.test(o[v])&&(f=!0),f||(a=a||this.getCompleteStyleDeclaration(t,v),l=this.getCompleteStyleDeclaration(t,v+1),f=Zc(a,l,!0)),f&&(u=this._getStyleDeclaration(t,v),i.push(this._createTextCharSpan(g,u,e,s,h)),g="",a=l,this.direction==="rtl"?e-=m:e+=m,m=0)}_setSVGTextLineBg(i,t,e,s){const n=this._textLines[t],r=this.getHeightOfLine(t)/this.lineHeight;let o,a=0,l=0,h=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let u=0;u<n.length;u++){const{left:f,width:g,kernedWidth:m}=this.__charBounds[t][u];o=this.getValueOfPropertyAt(t,u,"textBackgroundColor"),o!==h?(h&&i.push(...jl(h,e+l,s,a,r)),l=f,a=g,h=o):a+=m}o&&i.push(...jl(h,e+l,s,a,r))}_getSVGLineTopOffset(i){let t,e=0;for(t=0;t<i;t++)e+=this.getHeightOfLine(t);const s=this.getHeightOfLine(t);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*s/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(i){return"".concat(super.getSvgStyles(i)," white-space: pre;")}getSvgSpanStyles(i,t){const{fontFamily:e,strokeWidth:s,stroke:n,fill:r,fontSize:o,fontStyle:a,fontWeight:l,deltaY:h}=i,u=this.getSvgTextDecoration(i);return[n?kr(Ve,n):"",s?"stroke-width: ".concat(s,"; "):"",e?"font-family: ".concat(e.includes("'")||e.includes('"')?e:"'".concat(e,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",u&&"text-decoration: ".concat(u,"; "),r?kr(ue,r):"",h?"baseline-shift: ".concat(-h,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(i){return["overline","underline","line-through"].filter(t=>i[t.replace("-","")]).join(" ")}}]),tt.setClass(je),tt.setSVGClass(je);class qw{constructor(t){w(this,"target",void 0),w(this,"__mouseDownInPlace",!1),w(this,"__dragStartFired",!1),w(this,"__isDraggingOver",!1),w(this,"__dragStartSelection",void 0),w(this,"__dragImageDisposer",void 0),w(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach(s=>s()),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,s=e.getSelectionStartFromPointer(t);return e.isEditing&&s>=e.selectionStart&&s<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var s;let{selectionStart:n,selectionEnd:r}=e;const o=this.target,a=o.canvas,l=new k(o.flipX?-1:1,o.flipY?-1:1),h=o._getCursorBoundaries(n),u=new k(h.left+h.leftOffset,h.top+h.topOffset).multiply(l).transform(o.calcTransformMatrix()),f=a.getScenePoint(t).subtract(u),g=o.getCanvasRetinaScaling(),m=o.getBoundingRect(),v=u.subtract(new k(m.left,m.top)),b=a.viewportTransform,C=v.add(f).transform(b,!0),O=o.backgroundColor,D=Jc(o.styles);o.backgroundColor="";const L={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(L,0,n),o.setSelectionStyles(L,r,o.text.length),o.dirty=!0;const P=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=O,o.styles=D,o.dirty=!0,fc(P,{position:"fixed",left:"".concat(-P.width,"px"),border:He,width:"".concat(P.width/g,"px"),height:"".concat(P.height/g,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{P.remove()},ys(t.target||this.target.hiddenTextarea).body.appendChild(P),(s=t.dataTransfer)===null||s===void 0||s.setDragImage(P,C.x,C.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,s=this.isActive();if(s&&t.dataTransfer){const n=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},r=e._text.slice(n.selectionStart,n.selectionEnd).join(""),o=S({text:e.text,value:r},n);t.dataTransfer.setData("text/plain",r),t.dataTransfer.setData("application/fabric",JSON.stringify({value:r,styles:e.getSelectionStyles(n.selectionStart,n.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,o)}return e.abortCursorAnimation(),s}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),s=this.__dragStartSelection;return e<s.selectionStart||e>s.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const s=this.targetCanDrop(e);!this.__isDraggingOver&&s&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,s=this.targetCanDrop(e);!this.__isDraggingOver&&s?this.__isDraggingOver=!0:this.__isDraggingOver&&!s&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:s}=t,n=s.defaultPrevented;this.__isDraggingOver=!1,s.preventDefault();let r=(e=s.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(r&&!n){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(s);const{styles:h}=s.dataTransfer.types.includes("application/fabric")?JSON.parse(s.dataTransfer.getData("application/fabric")):{},u=r[Math.max(0,r.length-1)],f=0;if(this.__dragStartSelection){const g=this.__dragStartSelection.selectionStart,m=this.__dragStartSelection.selectionEnd;l>g&&l<=m?l=g:l>m&&(l-=m-g),o.removeChars(g,m),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(r=r.trimEnd()),t.didDrop=!0,t.dropTarget=o,o.insertChars(r,h,l),a.setActiveObject(o),o.enterEditing(s),o.selectionStart=Math.min(l+f,o._text.length),o.selectionEnd=Math.min(o.selectionStart+r.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(ea,{index:l+f,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var s;const n=this.target,r=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((s=e.dataTransfer)===null||s===void 0?void 0:s.dropEffect)||He;l===He?(n.selectionStart=o,n.selectionEnd=a,n._updateTextarea(),n.hiddenTextarea.focus()):(n.clearContextTop(),l==="move"&&(n.removeChars(o,a),n.selectionStart=n.selectionEnd=o,n.hiddenTextarea&&(n.hiddenTextarea.value=n.text),n._updateTextarea(),n.fire(ea,{index:o,action:"dragend"}),r.fire("text:changed",{target:n}),r.requestRenderAll()),n.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const od=/[ \n\.,;!\?\-]/;class Kw extends je{constructor(){super(...arguments),w(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:s,delay:n,onComplete:r}=t;return cp({startValue:this._currentCursorOpacity,endValue:e,duration:s,delay:n,onComplete:r,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach(e=>{e&&!e.isDone()&&(t=!0,e.abort())}),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(t=>!t||t.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,s=t-1;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)e++,s--;for(;/\S/.test(this._text[s])&&s>-1;)e++,s--;return t-e}findWordBoundaryRight(t){let e=0,s=t;if(this._reSpace.test(this._text[s]))for(;this._reSpace.test(this._text[s]);)e++,s++;for(;/\S/.test(this._text[s])&&s<this._text.length;)e++,s++;return t+e}findLineBoundaryLeft(t){let e=0,s=t-1;for(;!/\n/.test(this._text[s])&&s>-1;)e++,s--;return t-e}findLineBoundaryRight(t){let e=0,s=t;for(;!/\n/.test(this._text[s])&&s<this._text.length;)e++,s++;return t+e}searchWordBoundary(t,e){const s=this._text;let n=t>0&&this._reSpace.test(s[t])&&(e===-1||!Wc.test(s[t-1]))?t-1:t,r=s[n];for(;n>0&&n<s.length&&!od.test(r);)n+=e,r=s[n];return e===-1&&od.test(r)&&n++,n}selectWord(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const s=this.searchWordBoundary(t,-1),n=Math.max(s,this.searchWordBoundary(t,1));this.selectionStart=s,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){var e;t=(e=t)!==null&&e!==void 0?e:this.selectionStart;const s=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);this.selectionStart=s,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(t){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;ys(e).activeElement!==e&&e.focus();const s=this.getSelectionStartFromPointer(t),n=this.selectionStart,r=this.selectionEnd;(s===this.__selectionStartOnMouseDown&&n!==r||n!==s&&r!==s)&&(s>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=s):(this.selectionStart=s,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===r||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,s){const n=s.slice(0,t),r=this.graphemeSplit(n).length;if(t===e)return{selectionStart:r,selectionEnd:r};const o=s.slice(t,e);return{selectionStart:r,selectionEnd:r+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(t,e,s){const n=s.slice(0,t).join("").length;return t===e?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+s.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),s=this.get2DCursorLocation(t),n=s.lineIndex,r=s.charIndex,o=this.getValueOfPropertyAt(n,r,"fontSize")*this.lineHeight,a=e.leftOffset,l=this.getCanvasRetinaScaling(),h=this.canvas.upperCanvasEl,u=h.width/l,f=h.height/l,g=u-o,m=f-o,v=new k(e.left+a,e.top+e.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new k(h.clientWidth/u,h.clientHeight/f));return v.x<0&&(v.x=0),v.x>g&&(v.x=g),v.y<0&&(v.y=0),v.y>m&&(v.y=m),v.x+=this.canvas._offset.left,v.y+=this.canvas._offset.top,{left:"".concat(v.x,"px"),top:"".concat(v.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const t=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),t&&this.fire(sa),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:s,charIndex:n}=this.get2DCursorLocation(t,!0),{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e,!0);if(s!==r){if(this.styles[s])for(let a=n;a<this._unwrappedTextLines[s].length;a++)delete this.styles[s][a];if(this.styles[r])for(let a=o;a<this._unwrappedTextLines[r].length;a++){const l=this.styles[r][a];l&&(this.styles[s]||(this.styles[s]={}),this.styles[s][n+a-o]=l)}for(let a=s+1;a<=r;a++)delete this.styles[a];this.shiftLineStyles(r,s-r)}else if(this.styles[s]){const a=this.styles[s],l=o-n;for(let h=n;h<o;h++)delete a[h];for(const h in this.styles[s]){const u=parseInt(h,10);u>=o&&(a[u-l]=a[h],delete a[h])}}}shiftLineStyles(t,e){const s=Object.assign({},this.styles);for(const n in this.styles){const r=parseInt(n,10);r>t&&(this.styles[r+e]=s[r],s[r-e]||delete this.styles[r])}}insertNewlineStyleObject(t,e,s,n){const r={},o=this._unwrappedTextLines[t].length,a=o===e;let l=!1;s||(s=1),this.shiftLineStyles(t,s);const h=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const f in this.styles[t]){const g=parseInt(f,10);g>=e&&(l=!0,r[g-e]=this.styles[t][f],a&&e===0||delete this.styles[t][f])}let u=!1;for(l&&!a&&(this.styles[t+s]=r,u=!0),(u||o>e)&&s--;s>0;)n&&n[s-1]?this.styles[t+s]={0:S({},n[s-1])}:h?this.styles[t+s]={0:S({},h)}:delete this.styles[t+s],s--;this._forceClearCache=!0}insertCharStyleObject(t,e,s,n){this.styles||(this.styles={});const r=this.styles[t],o=r?S({},r):{};s||(s=1);for(const l in o){const h=parseInt(l,10);h>=e&&(r[h+s]=o[h],o[h-s]||delete r[h])}if(this._forceClearCache=!0,n){for(;s--;)Object.keys(n[s]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+s]=S({},n[s]));return}if(!r)return;const a=r[e?e-1:1];for(;a&&s--;)this.styles[t][e+s]=S({},a)}insertNewStyleBlock(t,e,s){const n=this.get2DCursorLocation(e,!0),r=[0];let o,a=0;for(let l=0;l<t.length;l++)t[l]===`
`?(a++,r[a]=0):r[a]++;for(r[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,r[0],s),s=s&&s.slice(r[0]+1)),a&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+r[0],a),o=1;o<a;o++)r[o]>0?this.insertCharStyleObject(n.lineIndex+o,0,r[o],s):s&&this.styles[n.lineIndex+o]&&s[0]&&(this.styles[n.lineIndex+o][0]=s[0]),s=s&&s.slice(r[o]+1);r[o]>0&&this.insertCharStyleObject(n.lineIndex+o,0,r[o],s)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:s;n>s&&this.removeStyleFromTo(s,n);const r=this.graphemeSplit(t);this.insertNewStyleBlock(r,s,e),this._text=[...this._text.slice(0,s),...r,...this._text.slice(n)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,s){s<=t?(e===t?this._selectionDirection=Lt:this._selectionDirection===ne&&(this._selectionDirection=Lt,this.selectionEnd=t),this.selectionStart=s):s>t&&s<e?this._selectionDirection===ne?this.selectionEnd=s:this.selectionStart=s:(e===t?this._selectionDirection=ne:this._selectionDirection===Lt&&(this._selectionDirection=ne,this.selectionStart=e),this.selectionEnd=s)}}class Jw extends Kw{initHiddenTextarea(){const t=this.canvas&&ys(this.canvas.getElement())||Nn(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return e.setAttribute(a,l)});const{top:s,left:n,fontSize:r}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(s,"; left: ").concat(n,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(r,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return e.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste,{value:s,selectionStart:n,selectionEnd:r}=this.hiddenTextarea;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(ea),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const a=this._splitTextIntoLines(s).graphemeText,l=this._text.length,h=a.length,u=this.selectionStart,f=this.selectionEnd,g=u!==f;let m,v,b,C,O=h-l;const D=this.fromStringToGraphemeSelection(n,r,s),L=u>D.selectionStart;g?(v=this._text.slice(u,f),O+=f-u):h<l&&(v=L?this._text.slice(f+O,f):this._text.slice(u,u-O));const P=a.slice(D.selectionEnd-O,D.selectionEnd);if(v&&v.length&&(P.length&&(m=this.getSelectionStyles(u,u+1,!1),m=P.map(()=>m[0])),g?(b=u,C=f):L?(b=f-v.length,C=f):(b=f,C=f+v.length),this.removeStyleFromTo(b,C)),P.length){const{copyPasteData:V}=Bs();e&&P.join("")===V.copiedText&&!Pt.disableStyleCopyPaste&&(m=V.copiedTextStyle),this.insertNewStyleBlock(P,u,m)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:s,selectionEnd:n}=e;this.compositionStart=s,this.compositionEnd=n,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=Bs();t.copiedText=this.getSelectedText(),Pt.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let s,n=this._getLineLeftOffset(t);return e>0&&(s=this.__charBounds[t][e-1],n+=s.left+s.width),n}getDownCursorOffset(t,e){const s=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(s),r=n.lineIndex;if(r===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-s;const o=n.charIndex,a=this._getWidthBeforeCursor(r,o),l=this._getIndexOnLine(r+1,a);return this._textLines[r].slice(o).length+l+1+this.missingNewlineOffset(r)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const s=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(s),r=n.lineIndex;if(r===0||t.metaKey||t.keyCode===33)return-s;const o=n.charIndex,a=this._getWidthBeforeCursor(r,o),l=this._getIndexOnLine(r-1,a),h=this._textLines[r].slice(0,o),u=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+l-h.length+(1-u)}_getIndexOnLine(t,e){const s=this._textLines[t];let n,r,o=this._getLineLeftOffset(t),a=0;for(let l=0,h=s.length;l<h;l++)if(n=this.__charBounds[t][l].width,o+=n,o>e){r=!0;const u=o-n,f=o,g=Math.abs(u-e);a=Math.abs(f-e)<g?l:l-1;break}return r||(a=s.length-1),a}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const s=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===ne);if(e.shiftKey?this.moveCursorWithShift(s):this.moveCursorWithoutShift(s),s!==0){const n=this.text.length;this.selectionStart=Bn(0,this.selectionStart,n),this.selectionEnd=Bn(0,this.selectionEnd,n),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===Lt?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,s){let n;if(t.altKey)n=this["findWordBoundary".concat(s)](this[e]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[e]+=s==="Left"?-1:1,!0;n=this["findLineBoundary".concat(s)](this[e])}return n!==void 0&&this[e]!==n&&(this[e]=n,!0)}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=Lt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===ne&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Lt,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const s="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[s](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===Lt&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=ne,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=ne,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}const ad=i=>!!i.button;class Qw extends Jw{constructor(){super(...arguments),w(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new qw(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}doubleClickHandler(t){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}tripleClickHandler(t){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(t.e)),this.renderCursorOrSelection())}_mouseDownHandler(t){let{e,alreadySelected:s}=t;this.canvas&&this.editable&&!ad(e)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),s&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=s||this.isEditing)))}mouseUpHandler(t){let{e,transform:s}=t;const n=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const r=this.canvas._activeObject;if(r&&r!==this)return}!this.editable||this.group&&!this.group.interactive||s&&s.actionPerformed||ad(e)||n||this.selected&&!this.getActiveControl()&&(this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),s=this.selectionStart,n=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(s,n,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getScenePoint(t).transform(bs(this.calcTransformMatrix())).add(new k(-this._getLeftOffset(),-this._getTopOffset()));let s=0,n=0,r=0;for(let h=0;h<this._textLines.length&&s<=e.y;h++)s+=this.getHeightOfLine(h),r=h,h>0&&(n+=this._textLines[h-1].length+this.missingNewlineOffset(h-1));let o=Math.abs(this._getLineLeftOffset(r));const a=this._textLines[r].length,l=this.__charBounds[r];for(let h=0;h<a;h++){const u=o+l[h].kernedWidth;if(e.x<=u){Math.abs(e.x-u)<=Math.abs(e.x-o)&&n++;break}o=u,n++}return Math.min(this.flipX?a-n:n,this._text.length)}}const po="moveCursorUp",mo="moveCursorDown",_o="moveCursorLeft",vo="moveCursorRight",yo="exitEditing",ld=(i,t)=>{const e=t.getRetinaScaling();i.setTransform(e,0,0,e,0,0);const s=t.viewportTransform;i.transform(s[0],s[1],s[2],s[3],s[4],s[5])},Zw=S({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:yo,27:yo,33:po,34:mo,35:vo,36:_o,37:_o,38:po,39:vo,40:mo},keysMapRtl:{9:yo,27:yo,33:po,34:mo,35:_o,36:vo,37:vo,38:po,39:_o,40:mo},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Ks extends Qw{static getDefaults(){return S(S({},super.getDefaults()),Ks.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,S(S({},Ks.ownDefaults),e)),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof dc&&this.canvas.textEditingManager.remove(this),e instanceof dc&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,s=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,s)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,s)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const s=super.toCanvasElement(t);return this.isEditing=e,s}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries(),s=this.findAncestorsWithClipPath(),n=s.length>0;let r,o=t;if(n){r=us(t.canvas),o=r.getContext("2d"),ld(o,this.canvas);const a=this.calcTransformMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,e):this.renderCursor(o,e),n)for(const a of s){const l=a.clipPath,h=us(t.canvas),u=h.getContext("2d");if(ld(u,this.canvas),!l.absolutePositioned){const f=a.calcTransformMatrix();u.transform(f[0],f[1],f[2],f[3],f[4],f[5])}l.transform(u),l.drawObject(u,!0,{}),this.drawClipPathOnCache(o,l,h)}n&&(t.setTransform(1,0,0,1,0,0),t.drawImage(r,0,0)),this.canvas.contextTopDirty=!0,t.restore()}findAncestorsWithClipPath(){const t=[];let e=this;for(;e;)e.clipPath&&t.push(e),e=e.parent;return t}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const s=this._getLeftOffset(),n=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t,e);return{left:s,top:n,leftOffset:r.left,topOffset:r.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,s=0;const{charIndex:n,lineIndex:r}=this.get2DCursorLocation(t);for(let h=0;h<r;h++)e+=this.getHeightOfLine(h);const o=this._getLineLeftOffset(r),a=this.__charBounds[r][n];a&&(s=a.left),this.charSpacing!==0&&n===this._textLines[r].length&&(s-=this._getWidthOfCharSpacing());const l={top:e,left:o+(s>0?s:0)};return this.direction==="rtl"&&(this.textAlign===ne||this.textAlign===Fs||this.textAlign===_r?l.left*=-1:this.textAlign===Lt||this.textAlign===ha?l.left=o-(s>0?s:0):this.textAlign!==xt&&this.textAlign!==vr||(l.left=o-(s>0?s:0))),l}renderCursorAt(t){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(t,!0),t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}getCursorRenderingData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(t);const s=this.get2DCursorLocation(t),n=s.lineIndex,r=s.charIndex>0?s.charIndex-1:0,o=this.getValueOfPropertyAt(n,r,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,h=this.getValueOfPropertyAt(n,r,"deltaY"),u=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(n,r,"fill"),opacity:this._currentCursorOpacity,left:e.left+e.leftOffset-l/2,top:u+e.top+h,width:l,height:o}}_renderCursor(t,e,s){const{color:n,opacity:r,left:o,top:a,width:l,height:h}=this.getCursorRenderingData(s,e);t.fillStyle=n,t.globalAlpha=r,t.fillRect(o,a,l,h)}renderSelection(t,e){const s={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,s,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,s){const n=e.selectionStart,r=e.selectionEnd,o=this.textAlign.includes(Fs),a=this.get2DCursorLocation(n),l=this.get2DCursorLocation(r),h=a.lineIndex,u=l.lineIndex,f=a.charIndex<0?0:a.charIndex,g=l.charIndex<0?0:l.charIndex;for(let m=h;m<=u;m++){const v=this._getLineLeftOffset(m)||0;let b=this.getHeightOfLine(m),C=0,O=0,D=0;if(m===h&&(O=this.__charBounds[h][f].left),m>=h&&m<u)D=o&&!this.isEndOfWrapping(m)?this.width:this.getLineWidth(m)||5;else if(m===u)if(g===0)D=this.__charBounds[u][g].left;else{const J=this._getWidthOfCharSpacing();D=this.__charBounds[u][g-1].left+this.__charBounds[u][g-1].width-J}C=b,(this.lineHeight<1||m===u&&this.lineHeight>1)&&(b/=this.lineHeight);let L=s.left+v+O,P=b,V=0;const it=D-O;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",P=1,V=b):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===ne||this.textAlign===Fs||this.textAlign===_r?L=this.width-L-it:this.textAlign===Lt||this.textAlign===ha?L=s.left+v-D:this.textAlign!==xt&&this.textAlign!==vr||(L=s.left+v-D)),t.fillRect(L,s.top+s.topOffset+V,it,P),s.topOffset+=C}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,ue)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}w(Ks,"ownDefaults",Zw),w(Ks,"type","IText"),tt.setClass(Ks),tt.setClass(Ks,"i-text");class Yi extends Ks{static getDefaults(){return S(S({},super.getDefaults()),Yi.ownDefaults)}constructor(t,e){super(t,S(S({},Yi.ownDefaults),e))}static createControls(){return{controls:Dx()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Fs)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,s=0,n=0;const r={};for(let o=0;o<t.graphemeLines.length;o++)t.graphemeText[n]===`
`&&o>0?(s=0,n++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[n])&&o>0&&(s++,n++),r[o]={line:e,offset:s},n+=t.graphemeLines[o].length,s+=t.graphemeLines[o].length;return r}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[e];s&&(e=s.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,s=0,n=t+1,r=!1;const o=this._styleMap[t],a=this._styleMap[t+1];o&&(t=o.line,s=o.offset),a&&(n=a.line,r=n===t,e=a.offset);const l=t===void 0?this.styles:{line:this.styles[t]};for(const h in l)for(const u in l[h]){const f=parseInt(u,10);if(f>=s&&(!r||f<e))for(const g in l[h][u])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const s=this._styleMap[t];if(!s)return{};t=s.line,e=s.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,s){const n=this._styleMap[t];super._setStyleDeclaration(n.line,n.offset+e,s)}_deleteStyleDeclaration(t,e){const s=this._styleMap[t];super._deleteStyleDeclaration(s.line,s.offset+e)}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];super._setLineStyle(e.line)}_wrapText(t,e){this.isWrapping=!0;const s=this.getGraphemeDataForRender(t),n=[];for(let r=0;r<s.wordsData.length;r++)n.push(...this._wrapLine(r,e,s));return this.isWrapping=!1,n}getGraphemeDataForRender(t){const e=this.splitByGrapheme,s=e?"":" ";let n=0;return{wordsData:t.map((r,o)=>{let a=0;const l=e?this.graphemeSplit(r):this.wordSplit(r);return l.length===0?[{word:[],width:0}]:l.map(h=>{const u=e?[h]:this.graphemeSplit(h),f=this._measureWord(u,o,a);return n=Math.max(f,n),a+=u.length+s.length,{word:u,width:f}})}),largestWordWidth:n}}_measureWord(t,e){let s,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=0;for(let o=0,a=t.length;o<a;o++)r+=this._getGraphemeBox(t[o],e,o+n,s,!0).kernedWidth,s=t[o];return r}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,s){let{largestWordWidth:n,wordsData:r}=s,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,h=[],u=l?"":" ";let f=0,g=[],m=0,v=0,b=!0;e-=o;const C=Math.max(e,n,this.dynamicMinWidth),O=r[t];let D;for(m=0,D=0;D<O.length;D++){const{word:L,width:P}=O[D];m+=L.length,f+=v+P-a,f>C&&!b?(h.push(g),g=[],f=P,b=!0):f+=a,b||l||g.push(u),g=g.concat(L),v=l?0:this._measureWord([u],t,m),m++,b=!1}return D&&h.push(g),n+o>this.dynamicMinWidth&&(this.dynamicMinWidth=n-a+o),h}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),s=this._wrapText(e.lines,this.width),n=new Array(s.length);for(let r=0;r<s.length;r++)n[r]=s[r].join("");return e.lines=n,e.graphemeLines=s,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const s=parseInt(e,10);if(this._textLines[s]){const n=this._styleMap[e].line;t.set("".concat(n),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}w(Yi,"type","Textbox"),w(Yi,"textLayoutProperties",[...Ks.textLayoutProperties,"width"]),w(Yi,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),tt.setClass(Yi);class cd extends Ma{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,e){const{target:s}=t,{clipPath:n,group:r}=s;if(!n||!this.shouldPerformLayout(t))return;const{width:o,height:a}=Js(_p(s,n)),l=new k(o,a);if(n.absolutePositioned)return{center:Pn(n.getRelativeCenterPoint(),void 0,r?r.calcTransformMatrix():void 0),size:l};{const h=n.getRelativeCenterPoint().transform(s.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:u=new k,correction:f=new k}=this.calcBoundingBox(e,t)||{};return{center:u.add(h),correction:f.subtract(h),size:l}}return{center:s.getRelativeCenterPoint().add(h),size:l}}}}w(cd,"type","clip-path"),tt.setClass(cd);class hd extends Ma{getInitialSize(t,e){let{target:s}=t,{size:n}=e;return new k(s.width||n.x,s.height||n.y)}}w(hd,"type","fixed"),tt.setClass(hd);class tC extends Pr{subscribeTargets(t){const e=t.target;t.targets.reduce((s,n)=>(n.parent&&s.add(n.parent),s),new Set).forEach(s=>{s.layoutManager.subscribeTargets({target:s,targets:[e]})})}unsubscribeTargets(t){const e=t.target,s=e.getObjects();t.targets.reduce((n,r)=>(r.parent&&n.add(r.parent),n),new Set).forEach(n=>{!s.some(r=>r.parent===n)&&n.layoutManager.unsubscribeTargets({target:n,targets:[e]})})}}class zi extends $i{static getDefaults(){return S(S({},super.getDefaults()),zi.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,zi.ownDefaults),this.setOptions(e);const{left:s,top:n,layoutManager:r}=e;this.groupInit(t,{left:s,top:n,layoutManager:r??new tC})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach(n=>{const r=this._objects.findIndex(a=>a.isInFrontOf(n)),o=r===-1?this.size():r;this.insertAt(o,n)})}canEnterGroup(t){return this.getObjects().some(e=>e.isDescendantOf(t)||t.isDescendantOf(e))?(vi("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,e){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,e)}exitGroup(t,e){this._exitGroup(t,e),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const s=new Set;e.forEach(n=>{const{parent:r}=n;r&&s.add(r)}),t===eh?s.forEach(n=>{n._onAfterObjectsChange(aa,e)}):s.forEach(n=>{n._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,s){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const n=S(S({hasControls:!1},s),{},{forActiveSelection:!0});for(let r=0;r<this._objects.length;r++)this._objects[r]._renderControls(t,n);super._renderControls(t,e),t.restore()}}w(zi,"type","ActiveSelection"),w(zi,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),tt.setClass(zi),tt.setClass(zi,"activeSelection");class eC{constructor(){w(this,"resources",{})}applyFilters(t,e,s,n,r){const o=r.getContext("2d");if(!o)return;o.drawImage(e,0,0,s,n);const a={sourceWidth:s,sourceHeight:n,imageData:o.getImageData(0,0,s,n),originalEl:e,originalImageData:o.getImageData(0,0,s,n),canvasEl:r,ctx:o,filterBackend:this};t.forEach(h=>{h.applyTo(a)});const{imageData:l}=a;return l.width===s&&l.height===n||(r.width=l.width,r.height=l.height),o.putImageData(l,0,0),a}}class Ip{constructor(){let{tileSize:t=Pt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};w(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),w(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e)}createWebGLCanvas(t,e){const s=us({width:t,height:e}),n=s.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});n&&(n.clearColor(0,0,0,0),this.canvas=s,this.gl=n)}applyFilters(t,e,s,n,r,o){const a=this.gl,l=r.getContext("2d");if(!a||!l)return;let h;o&&(h=this.getCachedTexture(o,e));const u={originalWidth:e.width||e.naturalWidth||0,originalHeight:e.height||e.naturalHeight||0,sourceWidth:s,sourceHeight:n,destinationWidth:s,destinationHeight:n,context:a,sourceTexture:this.createTexture(a,s,n,h?void 0:e),targetTexture:this.createTexture(a,s,n),originalTexture:h||this.createTexture(a,s,n,h?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},f=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,f),t.forEach(g=>{g&&g.applyTo(u)}),function(g){const m=g.targetCanvas,v=m.width,b=m.height,C=g.destinationWidth,O=g.destinationHeight;v===C&&b===O||(m.width=C,m.height=O)}(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(f),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,s,n,r){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:h,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:f,TEXTURE_MIN_FILTER:g,TEXTURE_WRAP_S:m,TEXTURE_WRAP_T:v}=t,b=t.createTexture();return t.bindTexture(a,b),t.texParameteri(a,f,r||o),t.texParameteri(a,g,r||o),t.texParameteri(a,m,u),t.texParameteri(a,v,u),n?t.texImage2D(a,0,l,l,h,n):t.texImage2D(a,0,l,e,s,0,l,h,null),b}getCachedTexture(t,e,s){const{textureCache:n}=this;if(n[t])return n[t];{const r=this.createTexture(this.gl,e.width,e.height,e,s);return r&&(n[t]=r),r}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const s=t.canvas,n=e.targetCanvas,r=n.getContext("2d");if(!r)return;r.translate(0,n.height),r.scale(1,-1);const o=s.height-n.height;r.drawImage(s,0,o,n.width,n.height,0,0,n.width,n.height)}copyGLTo2DPutImageData(t,e){const s=e.targetCanvas.getContext("2d"),n=e.destinationWidth,r=e.destinationHeight,o=n*r*4;if(!s)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,a);const h=new ImageData(l,n,r);s.putImageData(h,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const s=t.getExtension("WEBGL_debug_renderer_info");if(s){const n=t.getParameter(s.UNMASKED_RENDERER_WEBGL),r=t.getParameter(s.UNMASKED_VENDOR_WEBGL);n&&(e.renderer=n.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}let Ll;function sC(){const{WebGLProbe:i}=Bs();return i.queryWebGL(Ts()),Pt.enableGLFiltering&&i.isSupported(Pt.textureSize)?new Ip({tileSize:Pt.textureSize}):new eC}function Rl(){return!Ll&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Ll=sC()),Ll}const iC=["filters","resizeFilter","src","crossOrigin","type"],Bp=["cropX","cropY"];class os extends we{static getDefaults(){return S(S({},super.getDefaults()),os.ownDefaults)}constructor(t,e){super(),w(this,"_lastScaleX",1),w(this,"_lastScaleY",1),w(this,"_filterScalingX",1),w(this,"_filterScalingY",1),this.filters=[],Object.assign(this,os.ownDefaults),this.setOptions(e),this.cacheKey="texture".concat(yi()),this.setElement(typeof t=="string"?(this.canvas&&ys(this.canvas.getElement())||Nn()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){var e;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(s),(e=t.classList)===null||e===void 0||e.add(os.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=Rl(!1);e instanceof Ip&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(t=>{const e=this[t];e&&Bs().dispose(e),this[t]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,s=this.height/2;t.beginPath(),t.moveTo(-e,-s),t.lineTo(e,-s),t.lineTo(e,s),t.lineTo(-e,s),t.lineTo(-e,-s),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach(s=>{s&&e.push(s.toObject())}),S(S({},super.toObject([...Bp,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,s=-this.width/2,n=-this.height/2;let r=[],o=[],a="",l="";if(!e)return[];if(this.hasCrop()){const h=yi();r.push('<clipPath id="imageCrop_'+h+`">
`,'	<rect x="'+s+'" y="'+n+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+h+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(s-this.cropX,'" y="').concat(n-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const h=this.fill;this.fill=null,o=['	<rect x="'.concat(s,'" y="').concat(n,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=h}return r=this.paintFirst!==ue?r.concat(o,t):r.concat(t,o),r}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Xo(t,{crossOrigin:e,signal:s}).then(n=>{e!==void 0&&this.set({crossOrigin:e}),this.setElement(n)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,s=this.getTotalObjectScaling(),n=s.x,r=s.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||n>e&&r>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=r);const a=us(o),{width:l,height:h}=o;this._element=a,this._lastScaleX=t.scaleX=n,this._lastScaleY=t.scaleY=r,Rl().applyFilters([t],o,l,h,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter(r=>r&&!r.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,s=e.naturalWidth||e.width,n=e.naturalHeight||e.height;if(this._element===this._originalElement){const r=us({width:s,height:n});this._element=r,this._filteredEl=r}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,s,n),this._lastScaleX=1,this._lastScaleY=1);Rl().applyFilters(t,this._originalElement,s,n,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const s=this._filterScalingX,n=this._filterScalingY,r=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),h=e.naturalWidth||e.width,u=e.naturalHeight||e.height,f=a*s,g=l*n,m=Math.min(r*s,h-f),v=Math.min(o*n,u-g),b=-r/2,C=-o/2,O=Math.min(r,h/s-a),D=Math.min(o,u/n-l);e&&t.drawImage(e,f,g,m,v,b,C,O,D)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=this.getOriginalSize();this.width=t||s.width,this.height=e||s.height}parsePreserveAspectRatioAttribute(){const t=qb(this.preserveAspectRatio||""),e=this.width,s=this.height,n={width:e,height:s};let r,o=this._element.width,a=this._element.height,l=1,h=1,u=0,f=0,g=0,m=0;return!t||t.alignX===He&&t.alignY===He?(l=e/o,h=s/a):(t.meetOrSlice==="meet"&&(l=h=lw(this._element,n),r=(e-o*l)/2,t.alignX==="Min"&&(u=-r),t.alignX==="Max"&&(u=r),r=(s-a*h)/2,t.alignY==="Min"&&(f=-r),t.alignY==="Max"&&(f=r)),t.meetOrSlice==="slice"&&(l=h=cw(this._element,n),r=o-e/l,t.alignX==="Mid"&&(g=r/2),t.alignX==="Max"&&(g=r),r=a-s/h,t.alignY==="Mid"&&(m=r/2),t.alignY==="Max"&&(m=r),o=e/l,a=s/h)),{width:o,height:a,scaleX:l,scaleY:h,offsetLeft:u,offsetTop:f,cropX:g,cropY:m}}static fromObject(t,e){let{filters:s,resizeFilter:n,src:r,crossOrigin:o,type:a}=t,l=Jt(t,iC);return Promise.all([Xo(r,S(S({},e),{},{crossOrigin:o})),s&&Ar(s,e),n&&Ar([n],e),Ea(l,e)]).then(h=>{let[u,f=[],[g]=[],m={}]=h;return new this(u,S(S({},l),{},{src:r,filters:f,resizeFilter:g},m))})}static fromURL(t){let{crossOrigin:e=null,signal:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Xo(t,{crossOrigin:e,signal:s}).then(r=>new this(r,n))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;const n=ni(t,this.ATTRIBUTE_NAMES,s);return this.fromURL(n["xlink:href"]||n.href,e,n).catch(r=>(vi("log","Unable to parse Image",r),null))}}w(os,"type","Image"),w(os,"cacheProperties",[...ii,...Bp]),w(os,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),w(os,"CSS_CANVAS","canvas-img"),w(os,"ATTRIBUTE_NAMES",[...Si,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),tt.setClass(os),tt.setSVGClass(os);Da(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const ja=i=>i.webgl!==void 0,sh="precision highp float",nC=`
    `.concat(sh,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),rC=["type"],oC=["type"],aC=new RegExp(sh,"g");class fe{get type(){return this.constructor.type}constructor(){let t=Jt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rC);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return nC}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:n="highp"}}=Bs();n!=="highp"&&(e=e.replace(aC,sh.replace("highp",n)));const r=t.createShader(t.VERTEX_SHADER),o=t.createShader(t.FRAGMENT_SHADER),a=t.createProgram();if(!r||!o||!a)throw new Ls("Vertex, fragment shader or program creation error");if(t.shaderSource(r,s),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Ls("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(r)));if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Ls("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.attachShader(a,r),t.attachShader(a,o),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Ls('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(a)));const l=this.getUniformLocations(t,a)||{};return l.uStepW=t.getUniformLocation(a,"uStepW"),l.uStepH=t.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(t,a),uniformLocations:l}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){const s=this.constructor.uniformLocations,n={};for(let r=0;r<s.length;r++)n[s[r]]=t.getUniformLocation(e,s[r]);return n}sendAttributeData(t,e,s){const n=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const s=t.destinationWidth,n=t.destinationHeight;t.sourceWidth===s&&t.sourceHeight===n||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,s,n)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){return!1}applyTo(t){ja(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,s=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(s.program),this.sendAttributeData(e,s.attributeLocations,t.aPosition),e.uniform1f(s.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(s.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,s.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,s){t.activeTexture(s),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const{sourceWidth:e,sourceHeight:s}=t,n=us({width:e,height:s});t.helpLayer=n}}toObject(){const t=Object.keys(this.constructor.defaults||{});return S({type:this.type},t.reduce((e,s)=>(e[s]=this[s],e),{}))}toJSON(){return this.toObject()}static async fromObject(t,e){return new this(Jt(t,oC))}}w(fe,"type","BaseFilter"),w(fe,"uniformLocations",[]);const lC={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class bo extends fe{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(lC[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const s=new Nt(this.color).getSource(),n=this.alpha,r=s[0]*n,o=s[1]*n,a=s[2]*n,l=1-n;for(let h=0;h<e.length;h+=4){const u=e[h],f=e[h+1],g=e[h+2];let m,v,b;switch(this.mode){case"multiply":m=u*r/255,v=f*o/255,b=g*a/255;break;case"screen":m=255-(255-u)*(255-r)/255,v=255-(255-f)*(255-o)/255,b=255-(255-g)*(255-a)/255;break;case"add":m=u+r,v=f+o,b=g+a;break;case"difference":m=Math.abs(u-r),v=Math.abs(f-o),b=Math.abs(g-a);break;case"subtract":m=u-r,v=f-o,b=g-a;break;case"darken":m=Math.min(u,r),v=Math.min(f,o),b=Math.min(g,a);break;case"lighten":m=Math.max(u,r),v=Math.max(f,o),b=Math.max(g,a);break;case"overlay":m=r<128?2*u*r/255:255-2*(255-u)*(255-r)/255,v=o<128?2*f*o/255:255-2*(255-f)*(255-o)/255,b=a<128?2*g*a/255:255-2*(255-g)*(255-a)/255;break;case"exclusion":m=r+u-2*r*u/255,v=o+f-2*o*f/255,b=a+g-2*a*g/255;break;case"tint":m=r+u*l,v=o+f*l,b=a+g*l}e[h]=m,e[h+1]=v,e[h+2]=b}}sendUniformData(t,e){const s=new Nt(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,t.uniform4fv(e.uColor,s)}}w(bo,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),w(bo,"type","BlendColor"),w(bo,"uniformLocations",["uColor"]),tt.setClass(bo);const cC={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},hC=["type","image"];class xo extends fe{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return cC[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const e=t.context,s=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,s,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:s}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/s,1]}applyTo2d(t){let{imageData:{data:e,width:s,height:n},filterBackend:{resources:r}}=t;const o=this.image;r.blendImage||(r.blendImage=Ts());const a=r.blendImage,l=a.getContext("2d");a.width!==s||a.height!==n?(a.width=s,a.height=n):l.clearRect(0,0,s,n),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,s,n);const h=l.getImageData(0,0,s,n).data;for(let u=0;u<e.length;u+=4){const f=e[u],g=e[u+1],m=e[u+2],v=e[u+3],b=h[u],C=h[u+1],O=h[u+2],D=h[u+3];switch(this.mode){case"multiply":e[u]=f*b/255,e[u+1]=g*C/255,e[u+2]=m*O/255,e[u+3]=v*D/255;break;case"mask":e[u+3]=D}}}sendUniformData(t,e){const s=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,s)}toObject(){return S(S({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,e){let{type:s,image:n}=t,r=Jt(t,hC);return os.fromObject(n,e).then(o=>new this(S(S({},r),{},{image:o})))}}w(xo,"type","BlendImage"),w(xo,"defaults",{mode:"multiply",alpha:1}),w(xo,"uniformLocations",["uTransformMatrix","uImage"]),tt.setClass(xo);class wo extends fe{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(t){ja(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){t.imageData=this.simpleBlur(t)}simpleBlur(t){let{ctx:e,imageData:s,filterBackend:{resources:n}}=t;const{width:r,height:o}=s;n.blurLayer1||(n.blurLayer1=Ts(),n.blurLayer2=Ts());const a=n.blurLayer1,l=n.blurLayer2;a.width===r&&a.height===o||(l.width=a.width=r,l.height=a.height=o);const h=a.getContext("2d"),u=l.getContext("2d"),f=15,g=.06*this.blur*.5;let m,v,b,C;for(h.putImageData(s,0,0),u.clearRect(0,0,r,o),C=-15;C<=f;C++)m=(Math.random()-.5)/4,v=C/f,b=g*v*r+m,u.globalAlpha=1-Math.abs(v),u.drawImage(a,b,m),h.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);for(C=-15;C<=f;C++)m=(Math.random()-.5)/4,v=C/f,b=g*v*o+m,u.globalAlpha=1-Math.abs(v),u.drawImage(a,m,b),h.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);e.drawImage(a,0,0);const O=e.getImageData(0,0,a.width,a.height);return h.globalAlpha=1,h.clearRect(0,0,a.width,a.height),O}sendUniformData(t,e){const s=this.chooseRightDelta();t.uniform2fv(e.uDelta,s)}isNeutralState(){return this.blur===0}chooseRightDelta(){let t=1;const e=[0,0];this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio);const s=t*this.blur*.12;return this.horizontal?e[0]=s:e[1]=s,e}}w(wo,"type","Blur"),w(wo,"defaults",{blur:0}),w(wo,"uniformLocations",["uDelta"]),tt.setClass(wo);class Co extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const s=Math.round(255*this.brightness);for(let n=0;n<e.length;n+=4)e[n]+=s,e[n+1]+=s,e[n+2]+=s}isNeutralState(){return this.brightness===0}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}w(Co,"type","Brightness"),w(Co,"defaults",{brightness:0}),w(Co,"uniformLocations",["uBrightness"]),tt.setClass(Co);const Np={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Tn extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const e=t.imageData.data,s=this.matrix,n=this.colorsOnly;for(let r=0;r<e.length;r+=4){const o=e[r],a=e[r+1],l=e[r+2];if(e[r]=o*s[0]+a*s[1]+l*s[2]+255*s[4],e[r+1]=o*s[5]+a*s[6]+l*s[7]+255*s[9],e[r+2]=o*s[10]+a*s[11]+l*s[12]+255*s[14],!n){const h=e[r+3];e[r]+=h*s[3],e[r+1]+=h*s[8],e[r+2]+=h*s[13],e[r+3]=o*s[15]+a*s[16]+l*s[17]+h*s[18]+255*s[19]}}}sendUniformData(t,e){const s=this.matrix,n=[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]],r=[s[4],s[9],s[14],s[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,n),t.uniform4fv(e.uConstants,r)}toObject(){return S(S({},super.toObject()),{},{matrix:[...this.matrix]})}}function Zi(i,t){var e;const s=(w(e=class extends Tn{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",i),w(e,"defaults",{colorsOnly:!1,matrix:t}),e);return tt.setClass(s,i),s}w(Tn,"type","ColorMatrix"),w(Tn,"defaults",Np),w(Tn,"uniformLocations",["uColorMatrix","uConstants"]),tt.setClass(Tn);Zi("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Zi("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Zi("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Zi("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Zi("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Zi("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Zi("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class ud extends fe{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){ja(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach(e=>{e.applyTo(t)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(t=>t.toObject())}}isNeutralState(){return!this.subFilters.some(t=>!t.isNeutralState())}static fromObject(t,e){return Promise.all((t.subFilters||[]).map(s=>tt.getClass(s.type).fromObject(s,e))).then(s=>new this({subFilters:s}))}}w(ud,"type","Composed"),tt.setClass(ud);class So extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:e}}=t;const s=Math.floor(255*this.contrast),n=259*(s+255)/(255*(259-s));for(let r=0;r<e.length;r+=4)e[r]=n*(e[r]-128)+128,e[r+1]=n*(e[r+1]-128)+128,e[r+2]=n*(e[r+2]-128)+128}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}w(So,"type","Contrast"),w(So,"defaults",{contrast:0}),w(So,"uniformLocations",["uContrast"]),tt.setClass(So);const uC={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class To extends fe{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return uC[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,s=e.data,n=this.matrix,r=Math.round(Math.sqrt(n.length)),o=Math.floor(r/2),a=e.width,l=e.height,h=t.ctx.createImageData(a,l),u=h.data,f=this.opaque?1:0;let g,m,v,b,C,O,D,L,P,V,it,J,H;for(it=0;it<l;it++)for(V=0;V<a;V++){for(C=4*(it*a+V),g=0,m=0,v=0,b=0,H=0;H<r;H++)for(J=0;J<r;J++)D=it+H-o,O=V+J-o,D<0||D>=l||O<0||O>=a||(L=4*(D*a+O),P=n[H*r+J],g+=s[L]*P,m+=s[L+1]*P,v+=s[L+2]*P,f||(b+=s[L+3]*P));u[C]=g,u[C+1]=m,u[C+2]=v,u[C+3]=f?s[C+3]:b}t.imageData=h}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return S(S({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}w(To,"type","Convolute"),w(To,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),w(To,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),tt.setClass(To);const Wp="Gamma";class Oo extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:e}}=t;const s=this.gamma,n=1/s[0],r=1/s[1],o=1/s[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,n),a.g[l]=255*Math.pow(l/255,r),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<e.length;l+=4)e[l]=a.r[e[l]],e[l+1]=a.g[e[l+1]],e[l+2]=a.b[e[l+2]]}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:Wp,gamma:this.gamma.concat()}}}w(Oo,"type",Wp),w(Oo,"defaults",{gamma:[1,1,1]}),w(Oo,"uniformLocations",["uGamma"]),tt.setClass(Oo);const fC={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Eo extends fe{applyTo2d(t){let{imageData:{data:e}}=t;for(let s,n=0;n<e.length;n+=4){const r=e[n],o=e[n+1],a=e[n+2];switch(this.mode){case"average":s=(r+o+a)/3;break;case"lightness":s=(Math.min(r,o,a)+Math.max(r,o,a))/2;break;case"luminosity":s=.21*r+.72*o+.07*a}e[n+2]=e[n+1]=e[n]=s}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return fC[this.mode]}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}w(Eo,"type","Grayscale"),w(Eo,"defaults",{mode:"average"}),w(Eo,"uniformLocations",["uMode"]),tt.setClass(Eo);const dC=S(S({},Np),{},{rotation:0});class Il extends Tn{calculateMatrix(){const t=this.rotation*Math.PI,e=Zs(t),s=ti(t),n=1/3,r=Math.sqrt(n)*s,o=1-e;this.matrix=[e+o/3,n*o-r,n*o+r,0,0,n*o+r,e+n*o,n*o-r,0,0,n*o-r,n*o+r,e+n*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}w(Il,"type","HueRotation"),w(Il,"defaults",dC),tt.setClass(Il);class Ao extends fe{applyTo2d(t){let{imageData:{data:e}}=t;for(let s=0;s<e.length;s+=4)e[s]=255-e[s],e[s+1]=255-e[s+1],e[s+2]=255-e[s+2],this.alpha&&(e[s+3]=255-e[s+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}w(Ao,"type","Invert"),w(Ao,"defaults",{alpha:!1,invert:!0}),w(Ao,"uniformLocations",["uInvert","uAlpha"]),tt.setClass(Ao);class Do extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const s=this.noise;for(let n=0;n<e.length;n+=4){const r=(.5-Math.random())*s;e[n]+=r,e[n+1]+=r,e[n+2]+=r}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}isNeutralState(){return this.noise===0}}w(Do,"type","Noise"),w(Do,"defaults",{noise:0}),w(Do,"uniformLocations",["uNoise","uSeed"]),tt.setClass(Do);class ko extends fe{applyTo2d(t){let{imageData:{data:e,width:s,height:n}}=t;for(let r=0;r<n;r+=this.blocksize)for(let o=0;o<s;o+=this.blocksize){const a=4*r*s+4*o,l=e[a],h=e[a+1],u=e[a+2],f=e[a+3];for(let g=r;g<Math.min(r+this.blocksize,n);g++)for(let m=o;m<Math.min(o+this.blocksize,s);m++){const v=4*g*s+4*m;e[v]=l,e[v+1]=h,e[v+2]=u,e[v+3]=f}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}w(ko,"type","Pixelate"),w(ko,"defaults",{blocksize:4}),w(ko,"uniformLocations",["uBlocksize"]),tt.setClass(ko);class Mo extends fe{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:e}}=t;const s=255*this.distance,n=new Nt(this.color).getSource(),r=[n[0]-s,n[1]-s,n[2]-s],o=[n[0]+s,n[1]+s,n[2]+s];for(let a=0;a<e.length;a+=4){const l=e[a],h=e[a+1],u=e[a+2];l>r[0]&&h>r[1]&&u>r[2]&&l<o[0]&&h<o[1]&&u<o[2]&&(e[a+3]=0)}}sendUniformData(t,e){const s=new Nt(this.color).getSource(),n=this.distance,r=[0+s[0]/255-n,0+s[1]/255-n,0+s[2]/255-n,1],o=[s[0]/255+n,s[1]/255+n,s[2]/255+n,1];t.uniform4fv(e.uLow,r),t.uniform4fv(e.uHigh,o)}}w(Mo,"type","RemoveColor"),w(Mo,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),w(Mo,"uniformLocations",["uLow","uHigh"]),tt.setClass(Mo);class Po extends fe{sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,s=this.getFilterWindow(),n=new Array(s);for(let r=1;r<=s;r++)n[r-1]=t(r*e);return n}generateShader(t){const e=new Array(t);for(let s=1;s<=t;s++)e[s-1]="".concat(s,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map((s,n)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(s,") * uTaps[").concat(n,"] + texture2D(uTexture, vTexCoord - ").concat(s,") * uTaps[").concat(n,`];
              sum += 2.0 * uTaps[`).concat(n,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){ja(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;const s=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(s)/s}}applyTo2d(t){const e=t.imageData,s=this.scaleX,n=this.scaleY;this.rcpScaleX=1/s,this.rcpScaleY=1/n;const r=e.width,o=e.height,a=Math.round(r*s),l=Math.round(o*n);let h;h=this.resizeType==="sliceHack"?this.sliceByTwo(t,r,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(t,r,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(t,r,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(t,r,o,a,l):new ImageData(a,l),t.imageData=h}sliceByTwo(t,e,s,n,r){const o=t.imageData,a=.5;let l=!1,h=!1,u=e*a,f=s*a;const g=t.filterBackend.resources;let m=0,v=0;const b=e;let C=0;g.sliceByTwo||(g.sliceByTwo=Ts());const O=g.sliceByTwo;(O.width<1.5*e||O.height<s)&&(O.width=1.5*e,O.height=s);const D=O.getContext("2d");for(D.clearRect(0,0,1.5*e,s),D.putImageData(o,0,0),n=Math.floor(n),r=Math.floor(r);!l||!h;)e=u,s=f,n<Math.floor(u*a)?u=Math.floor(u*a):(u=n,l=!0),r<Math.floor(f*a)?f=Math.floor(f*a):(f=r,h=!0),D.drawImage(O,m,v,e,s,b,C,u,f),m=b,v=C,C+=f;return D.getImageData(m,v,n,r)}lanczosResize(t,e,s,n,r){const o=t.imageData.data,a=t.ctx.createImageData(n,r),l=a.data,h=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,f=this.rcpScaleY,g=2/this.rcpScaleX,m=2/this.rcpScaleY,v=Math.ceil(u*this.lanczosLobes/2),b=Math.ceil(f*this.lanczosLobes/2),C={},O={x:0,y:0},D={x:0,y:0};return function L(P){let V,it,J,H,Z,lt,St,wt,ut,Et,Gt;for(O.x=(P+.5)*u,D.x=Math.floor(O.x),V=0;V<r;V++){for(O.y=(V+.5)*f,D.y=Math.floor(O.y),Z=0,lt=0,St=0,wt=0,ut=0,it=D.x-v;it<=D.x+v;it++)if(!(it<0||it>=e)){Et=Math.floor(1e3*Math.abs(it-O.x)),C[Et]||(C[Et]={});for(let vt=D.y-b;vt<=D.y+b;vt++)vt<0||vt>=s||(Gt=Math.floor(1e3*Math.abs(vt-O.y)),C[Et][Gt]||(C[Et][Gt]=h(Math.sqrt(Math.pow(Et*g,2)+Math.pow(Gt*m,2))/1e3)),J=C[Et][Gt],J>0&&(H=4*(vt*e+it),Z+=J,lt+=J*o[H],St+=J*o[H+1],wt+=J*o[H+2],ut+=J*o[H+3]))}H=4*(V*n+P),l[H]=lt/Z,l[H+1]=St/Z,l[H+2]=wt/Z,l[H+3]=ut/Z}return++P<n?L(P):a}(0)}bilinearFiltering(t,e,s,n,r){let o,a,l,h,u,f,g,m,v,b,C,O,D,L=0;const P=this.rcpScaleX,V=this.rcpScaleY,it=4*(e-1),J=t.imageData.data,H=t.ctx.createImageData(n,r),Z=H.data;for(g=0;g<r;g++)for(m=0;m<n;m++)for(u=Math.floor(P*m),f=Math.floor(V*g),v=P*m-u,b=V*g-f,D=4*(f*e+u),C=0;C<4;C++)o=J[D+C],a=J[D+4+C],l=J[D+it+C],h=J[D+it+4+C],O=o*(1-v)*(1-b)+a*v*(1-b)+l*b*(1-v)+h*v*b,Z[L++]=O;return H}hermiteFastResize(t,e,s,n,r){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),h=Math.ceil(a/2),u=t.imageData.data,f=t.ctx.createImageData(n,r),g=f.data;for(let m=0;m<r;m++)for(let v=0;v<n;v++){const b=4*(v+m*n);let C=0,O=0,D=0,L=0,P=0,V=0,it=0;const J=(m+.5)*a;for(let H=Math.floor(m*a);H<(m+1)*a;H++){const Z=Math.abs(J-(H+.5))/h,lt=(v+.5)*o,St=Z*Z;for(let wt=Math.floor(v*o);wt<(v+1)*o;wt++){let ut=Math.abs(lt-(wt+.5))/l;const Et=Math.sqrt(St+ut*ut);Et>1&&Et<-1||(C=2*Et*Et*Et-3*Et*Et+1,C>0&&(ut=4*(wt+H*e),it+=C*u[ut+3],D+=C,u[ut+3]<255&&(C=C*u[ut+3]/250),L+=C*u[ut],P+=C*u[ut+1],V+=C*u[ut+2],O+=C))}}g[b]=L/O,g[b+1]=P/O,g[b+2]=V/O,g[b+3]=it/D}return f}}w(Po,"type","Resize"),w(Po,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),w(Po,"uniformLocations",["uDelta","uTaps"]),tt.setClass(Po);class jo extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const s=-this.saturation;for(let n=0;n<e.length;n+=4){const r=e[n],o=e[n+1],a=e[n+2],l=Math.max(r,o,a);e[n]+=l!==r?(l-r)*s:0,e[n+1]+=l!==o?(l-o)*s:0,e[n+2]+=l!==a?(l-a)*s:0}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}w(jo,"type","Saturation"),w(jo,"defaults",{saturation:0}),w(jo,"uniformLocations",["uSaturation"]),tt.setClass(jo);class Fo extends fe{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const s=-this.vibrance;for(let n=0;n<e.length;n+=4){const r=e[n],o=e[n+1],a=e[n+2],l=Math.max(r,o,a),h=(r+o+a)/3,u=2*Math.abs(l-h)/255*s;e[n]+=l!==r?(l-r)*u:0,e[n+1]+=l!==o?(l-o)*u:0,e[n+2]+=l!==a?(l-a)*u:0}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}w(Fo,"type","Vibrance"),w(Fo,"defaults",{vibrance:0}),w(Fo,"uniformLocations",["uVibrance"]),tt.setClass(Fo);/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Hp;const Fa=i=>Hp=i,Vp=Symbol();function pc(i){return i&&typeof i=="object"&&Object.prototype.toString.call(i)==="[object Object]"&&typeof i.toJSON!="function"}var yr;(function(i){i.direct="direct",i.patchObject="patch object",i.patchFunction="patch function"})(yr||(yr={}));function gC(){const i=Td(!0),t=i.run(()=>Fr({}));let e=[],s=[];const n=_i({install(r){Fa(n),n._a=r,r.provide(Vp,n),r.config.globalProperties.$pinia=n,s.forEach(o=>e.push(o)),s=[]},use(r){return this._a?e.push(r):s.push(r),this},_p:e,_a:null,_e:i,_s:new Map,state:t});return n}const Xp=()=>{};function fd(i,t,e,s=Xp){i.push(t);const n=()=>{const r=i.indexOf(t);r>-1&&(i.splice(r,1),s())};return!e&&Od()&&av(n),n}function vn(i,...t){i.slice().forEach(e=>{e(...t)})}const pC=i=>i(),dd=Symbol(),Bl=Symbol();function mc(i,t){i instanceof Map&&t instanceof Map?t.forEach((e,s)=>i.set(s,e)):i instanceof Set&&t instanceof Set&&t.forEach(i.add,i);for(const e in t){if(!t.hasOwnProperty(e))continue;const s=t[e],n=i[e];pc(n)&&pc(s)&&i.hasOwnProperty(e)&&!oe(s)&&!mi(s)?i[e]=mc(n,s):i[e]=s}return i}const mC=Symbol();function _C(i){return!pc(i)||!Object.prototype.hasOwnProperty.call(i,mC)}const{assign:ui}=Object;function vC(i){return!!(oe(i)&&i.effect)}function yC(i,t,e,s){const{state:n,actions:r,getters:o}=t,a=e.state.value[i];let l;function h(){a||(e.state.value[i]=n?n():{});const u=kv(e.state.value[i]);return ui(u,r,Object.keys(o||{}).reduce((f,g)=>(f[g]=_i(Be(()=>{Fa(e);const m=e._s.get(i);return o[g].call(m,m)})),f),{}))}return l=Yp(i,h,t,e,s,!0),l}function Yp(i,t,e={},s,n,r){let o;const a=ui({actions:{}},e),l={deep:!0};let h,u,f=[],g=[],m;const v=s.state.value[i];!r&&!v&&(s.state.value[i]={}),Fr({});let b;function C(H){let Z;h=u=!1,typeof H=="function"?(H(s.state.value[i]),Z={type:yr.patchFunction,storeId:i,events:m}):(mc(s.state.value[i],H),Z={type:yr.patchObject,payload:H,storeId:i,events:m});const lt=b=Symbol();Dc().then(()=>{b===lt&&(h=!0)}),u=!0,vn(f,Z,s.state.value[i])}const O=r?function(){const{state:Z}=e,lt=Z?Z():{};this.$patch(St=>{ui(St,lt)})}:Xp;function D(){o.stop(),f=[],g=[],s._s.delete(i)}const L=(H,Z="")=>{if(dd in H)return H[Bl]=Z,H;const lt=function(){Fa(s);const St=Array.from(arguments),wt=[],ut=[];function Et(nt){wt.push(nt)}function Gt(nt){ut.push(nt)}vn(g,{args:St,name:lt[Bl],store:V,after:Et,onError:Gt});let vt;try{vt=H.apply(this&&this.$id===i?this:V,St)}catch(nt){throw vn(ut,nt),nt}return vt instanceof Promise?vt.then(nt=>(vn(wt,nt),nt)).catch(nt=>(vn(ut,nt),Promise.reject(nt))):(vn(wt,vt),vt)};return lt[dd]=!0,lt[Bl]=Z,lt},P={_p:s,$id:i,$onAction:fd.bind(null,g),$patch:C,$reset:O,$subscribe(H,Z={}){const lt=fd(f,H,Z.detached,()=>St()),St=o.run(()=>kn(()=>s.state.value[i],wt=>{(Z.flush==="sync"?u:h)&&H({storeId:i,type:yr.direct,events:m},wt)},ui({},l,Z)));return lt},$dispose:D},V=jr(P);s._s.set(i,V);const J=(s._a&&s._a.runWithContext||pC)(()=>s._e.run(()=>(o=Td()).run(()=>t({action:L}))));for(const H in J){const Z=J[H];if(oe(Z)&&!vC(Z)||mi(Z))r||(v&&_C(Z)&&(oe(Z)?Z.value=v[H]:mc(Z,v[H])),s.state.value[i][H]=Z);else if(typeof Z=="function"){const lt=L(Z,H);J[H]=lt,a.actions[H]=Z}}return ui(V,J),ui(Dt(V),J),Object.defineProperty(V,"$state",{get:()=>s.state.value[i],set:H=>{C(Z=>{ui(Z,H)})}}),s._p.forEach(H=>{ui(V,o.run(()=>H({store:V,app:s._a,pinia:s,options:a})))}),v&&r&&e.hydrate&&e.hydrate(V.$state,v),h=!0,u=!0,V}/*! #__NO_SIDE_EFFECTS__ */function bC(i,t,e){let s;const n=typeof t=="function";s=n?e:t;function r(o,a){const l=dy();return o=o||(l?ws(Vp,null):null),o&&Fa(o),o=Hp,o._s.has(i)||(n?Yp(i,t,s,o):yC(i,s,o)),o._s.get(i)}return r.$id=i,r}const Hr=bC("shapeStore",{state:()=>({shapes:[],selectedId:null}),actions:{addShape(i){this.shapes.push(i)},updateShape(i,t){var n;const e=this.shapes.find(r=>r.id===i);if(!e||!e.ref)return;Object.assign(e,t);const s=e.ref;t.x!==void 0&&s.set("left",t.x),t.y!==void 0&&s.set("top",t.y),t.fill!==void 0&&s.set("fill",t.fill),t.width!==void 0&&s.set("width",t.width),t.height!==void 0&&s.set("height",t.height),t.radius!==void 0&&s.set("radius",t.radius),t.points!==void 0&&(s.set({points:t.points}),s.dirty=!0,s._calcDimensions(),e.points=t.points),s.setCoords(),(n=s.canvas)==null||n.renderAll()},setSelectedId(i){this.selectedId=i}}}),Nl={selectable:!0,evented:!0,hasControls:!0,hasBorders:!0,lockScalingFlip:!0,lockScalingX:!1,lockScalingY:!1,cornerColor:"blue",cornerSize:8,transparentCorners:!1};function gd(i,t,e){t.on("modified",()=>{const s={x:t.left,y:t.top};t.type==="rect"?(s.width=t.width*t.scaleX,s.height=t.height*t.scaleY,t.set({scaleX:1,scaleY:1,width:s.width,height:s.height})):t.type==="circle"&&(s.radius=t.radius*t.scaleX,t.set({scaleX:1,scaleY:1,radius:s.radius})),t.setCoords(),e.updateShape(i,s)})}function xC(i){return{handleSelection:s=>{var o;const n=((o=s.selected)==null?void 0:o[0])||s.target;if(!n)return;const r=i.shapes.find(a=>a.ref===n);r&&i.setSelectedId(r.id)},clearSelection:()=>{i.setSelectedId(null)}}}let wC=1,CC=1,SC=1;function TC(i){const t=Hr(),e=0,s=0,n="#ffcc00";return{addRect:()=>{var u,f,g;const l=`rect_${wC++}`,h=new vs({left:e,top:s,width:80,height:50,fill:n,...Nl});gd(l,h,t),(u=i.value)==null||u.add(h),t.addShape({id:l,type:"rect",x:e,y:s,fill:n,width:80,height:50,ref:_i(h)}),(f=i.value)==null||f.setActiveObject(h),(g=i.value)==null||g.renderAll()},addCircle:()=>{var u,f,g;const l=`circle_${CC++}`,h=new js({left:e,top:s,radius:50,fill:n,...Nl});gd(l,h,t),(u=i.value)==null||u.add(h),t.addShape({id:l,type:"circle",x:e,y:s,fill:n,radius:50,ref:_i(h)}),(f=i.value)==null||f.setActiveObject(h),(g=i.value)==null||g.renderAll()},addPolygon:()=>{var f,g,m;const l=`polygon_${SC++}`,h=[{x:15,y:20},{x:80,y:15},{x:150,y:30},{x:125,y:250},{x:95,y:200},{x:75,y:150},{x:75,y:250},{x:45,y:250},{x:30,y:245},{x:0,y:250},{x:-10,y:190},{x:5,y:100}],u=new rr(h,{left:100,top:100,fill:"#ffcc00",stroke:null,strokeWidth:0,objectCaching:!1,cornerColor:"blue",originX:"center",originY:"center",...Nl});u.scale(2),u.setCoords(),(f=i.value)==null||f.add(u),(g=i.value)==null||g.setActiveObject(u),(m=i.value)==null||m.renderAll(),t.addShape({id:l,type:"polygon",x:u.left,y:u.top,fill:"#ffcc00",points:h,ref:_i(u)})}}}function OC(i){return{exportToJson:()=>{if(!i.value)return;const e=i.value.toJSON(),s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});console.log("資料："+e);const n=URL.createObjectURL(s),r=document.createElement("a");r.href=n,r.download="canvas-export.json",r.click(),setTimeout(()=>URL.revokeObjectURL(n),100),console.log("canvas.value",i.value)}}}const EC={class:"navbar navbar-expand-lg bg-body-tertiary"},AC={class:"container-fluid"},DC={class:"collapse navbar-collapse",id:"navbarNavAltMarkup"},kC={class:"navbar-nav"},MC={__name:"Toolbar",setup(i){const t=ws("canvas"),{exportToJson:e}=OC(t),{addRect:s,addCircle:n}=TC(t);return(r,o)=>(ye(),Je("nav",EC,[mt("div",AC,[o[7]||(o[7]=mt("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},[mt("span",{class:"navbar-toggler-icon"})],-1)),mt("div",DC,[mt("div",kC,[mt("button",{type:"button",class:"btn btn-outline-primary me-2",onClick:o[0]||(o[0]=(...a)=>Ke(s)&&Ke(s)(...a))},o[3]||(o[3]=[mt("i",{class:"fa-regular fa-square me-1"},null,-1),Bo("矩形 ")])),mt("button",{type:"button",class:"btn btn-outline-primary me-2",onClick:o[1]||(o[1]=(...a)=>Ke(n)&&Ke(n)(...a))},o[4]||(o[4]=[mt("i",{class:"fa-regular fa-circle me-1"},null,-1),Bo("圓形 ")])),o[6]||(o[6]=Iy('<button type="button" class="btn btn-outline-primary me-2"><i class="fa-solid fa-xmark me-1"></i>尚未建置 </button><button type="button" class="btn btn-outline-primary me-2"><i class="fa-solid fa-xmark me-1"></i>尚未建置 </button><button type="button" class="btn btn-outline-primary me-2"><i class="fa-solid fa-xmark me-1"></i>尚未建置 </button><button type="button" class="btn btn-outline-primary me-2"><i class="fa-solid fa-xmark me-1"></i>尚未建置 </button>',4)),mt("button",{type:"button",class:"btn btn-outline-primary",onClick:o[2]||(o[2]=(...a)=>Ke(e)&&Ke(e)(...a))},o[5]||(o[5]=[mt("i",{class:"fa-solid fa-file-export me-1"},null,-1),Bo("匯出圖面 ")]))])])])]))}},PC={class:"mb-3"},jC={class:"mb-2"},FC={class:"mb-2"},LC={class:"mb-2"},RC={__name:"CommonShapeEditor",props:{shape:Object},emits:["update"],setup(i,{emit:t}){const e=i,s=t,n=()=>{s("update",{x:e.shape.x,y:e.shape.y,fill:e.shape.fill})};return(r,o)=>(ye(),Je("div",PC,[mt("div",jC,[o[3]||(o[3]=mt("label",{class:"form-label"},"X 座標",-1)),Dn(mt("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":o[0]||(o[0]=a=>i.shape.x=a),onInput:n},null,544),[[Mn,i.shape.x,void 0,{number:!0}]])]),mt("div",FC,[o[4]||(o[4]=mt("label",{class:"form-label"},"Y 座標",-1)),Dn(mt("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":o[1]||(o[1]=a=>i.shape.y=a),onInput:n},null,544),[[Mn,i.shape.y,void 0,{number:!0}]])]),mt("div",LC,[o[5]||(o[5]=mt("label",{class:"form-label"},"填色",-1)),Dn(mt("input",{type:"color",class:"form-control form-control-color","onUpdate:modelValue":o[2]||(o[2]=a=>i.shape.fill=a),onInput:n},null,544),[[Mn,i.shape.fill]])])]))}},IC=Ir(RC,[["__scopeId","data-v-c26933d4"]]),BC={class:"mt-3"},NC={class:"mb-2"},WC={class:"mb-2"},HC={__name:"RectEditor",props:{shape:Object},setup(i){const t=i,e=Hr(),s=()=>{e.updateShape(t.shape.id,{width:t.shape.width,height:t.shape.height})};return(n,r)=>(ye(),Je("div",BC,[mt("div",NC,[r[2]||(r[2]=mt("label",{class:"form-label"},"寬度",-1)),Dn(mt("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":r[0]||(r[0]=o=>i.shape.width=o),onInput:s},null,544),[[Mn,i.shape.width,void 0,{number:!0}]])]),mt("div",WC,[r[3]||(r[3]=mt("label",{class:"form-label"},"高度",-1)),Dn(mt("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":r[1]||(r[1]=o=>i.shape.height=o),onInput:s},null,544),[[Mn,i.shape.height,void 0,{number:!0}]])])]))}},VC={class:"mt-3"},XC={class:"mb-2"},YC={__name:"CircleEditor",props:{shape:Object},setup(i){const t=i,e=Hr(),s=()=>{e.updateShape(t.shape.id,{radius:t.shape.radius})};return(n,r)=>(ye(),Je("div",VC,[mt("div",XC,[r[1]||(r[1]=mt("label",{class:"form-label"},"半徑",-1)),Dn(mt("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":r[0]||(r[0]=o=>i.shape.radius=o),onInput:s},null,544),[[Mn,i.shape.radius,void 0,{number:!0}]])])]))}},zC={class:"list-group mb-3"},UC=["onClick"],GC={key:1,class:"text-muted"},$C={__name:"ShapeEditor",setup(i){const t=Hr(),e=Be({get:()=>t.selectedId,set:o=>t.setSelectedId(o)}),s=Be(()=>t.shapes.find(o=>o.id===e.value)),n=o=>{e.value=o;const a=t.shapes.find(l=>l.id===o);a!=null&&a.ref&&a.ref.canvas&&(a.ref.canvas.setActiveObject(a.ref),a.ref.canvas.renderAll())},r=o=>{s.value&&t.updateShape(s.value.id,o)};return kn(()=>t.shapes,o=>{!e.value&&o.length>0&&(e.value=o[0].id)},{immediate:!0,deep:!0}),(o,a)=>{var l;return ye(),Je("div",null,[mt("div",zC,[(ye(!0),Je(_s,null,ny(Ke(t).shapes,h=>(ye(),Je("button",{key:h.id,class:ma(["list-group-item list-group-item-action",{active:e.value===h.id}]),onClick:u=>n(h.id)},Hl(h.type)+" - "+Hl(h.id),11,UC))),128))]),(ye(),Je("div",{key:(l=s.value)==null?void 0:l.id},[s.value?(ye(),Je(_s,{key:0},[ge(IC,{shape:s.value,onUpdate:r},null,8,["shape"]),s.value.type==="rect"?(ye(),Kl(HC,{key:0,shape:s.value},null,8,["shape"])):Uu("",!0),s.value.type==="circle"?(ye(),Kl(YC,{key:1,shape:s.value},null,8,["shape"])):Uu("",!0)],64)):(ye(),Je("div",GC,"請選擇一個圖形進行編輯"))]))])}}},qC=Ir($C,[["__scopeId","data-v-c654d485"]]);function KC(i){const t=Fr(null),e=Hr(),{handleSelection:s,clearSelection:n}=xC(e),r=()=>{if(!document.getElementById("hmi-canvas")&&wrapperEl){console.warn("⚠️ 找不到 #hmi-canvas");return}const l=i.value.clientWidth,h=i.value.clientHeight;t.value=_i(new dc("hmi-canvas",{backgroundColor:"#dedede",selection:!0})),t.value.setWidth(l),t.value.setHeight(h),t.value.renderAll(),t.value.on("selection:created",s),t.value.on("selection:updated",s),t.value.on("selection:cleared",n)},o=()=>{var a;(a=t.value)==null||a.dispose(),console.log("[Canvas] 已釋放")};return tg(()=>{r(),window.addEventListener("resize",()=>{var a;return(a=t.value)==null?void 0:a.renderAll()})}),Pc(()=>{o(),window.removeEventListener("resize",()=>{var a;return(a=t.value)==null?void 0:a.renderAll()})}),{canvas:t}}const JC={class:"container-fluid vh-100 overflow-hidden p-3"},QC={class:"row h-100"},ZC={class:"col-7 d-flex flex-column h-100"},tS={class:"card shadow-sm mb-2"},eS={class:"card-body p-2"},sS={class:"card shadow-sm flex-grow-1 overflow-hidden"},iS={class:"card-body p-2 overflow-hidden"},nS={class:"col-5 d-flex flex-column h-100"},rS={class:"card shadow-sm flex-grow-1 overflow-hidden"},oS={class:"card-body overflow-auto"},aS={__name:"CanvasView",setup(i){const t=Fr(null),{canvas:e}=KC(t);return ur("canvas",_i(e)),(s,n)=>(ye(),Je("div",JC,[mt("div",QC,[mt("div",ZC,[mt("div",tS,[mt("div",eS,[ge(MC)])]),mt("div",sS,[mt("div",iS,[mt("div",{class:"canvas-wrapper h-100",ref_key:"canvasWrapperRef",ref:t},n[0]||(n[0]=[mt("canvas",{id:"hmi-canvas"},null,-1)]),512)])])]),mt("div",nS,[mt("div",rS,[mt("div",oS,[n[1]||(n[1]=mt("h5",{class:"card-title mb-3"},"⚙️ 圖形編輯器",-1)),ge(qC)])])])])]))}},lS=Ir(aS,[["__scopeId","data-v-74a476c1"]]),cS={};function hS(i,t){return ye(),Je("div")}const uS=Ir(cS,[["render",hS]]),fS=[{path:"/",redirect:"/canvas"},{path:"/canvas",component:lS},{path:"/simulate",component:uS}],dS=Tb({history:tb(""),routes:fS});var zo={exports:{}};/*!
  * Bootstrap v5.3.5 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var gS=zo.exports,pd;function pS(){return pd||(pd=1,function(i,t){(function(e,s){i.exports=s()})(gS,function(){const e=new Map,s={set(p,c,d){e.has(p)||e.set(p,new Map);const _=e.get(p);_.has(c)||_.size===0?_.set(c,d):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(_.keys())[0]}.`)},get:(p,c)=>e.has(p)&&e.get(p).get(c)||null,remove(p,c){if(!e.has(p))return;const d=e.get(p);d.delete(c),d.size===0&&e.delete(p)}},n="transitionend",r=p=>(p&&window.CSS&&window.CSS.escape&&(p=p.replace(/#([^\s"#']+)/g,(c,d)=>`#${CSS.escape(d)}`)),p),o=p=>{p.dispatchEvent(new Event(n))},a=p=>!(!p||typeof p!="object")&&(p.jquery!==void 0&&(p=p[0]),p.nodeType!==void 0),l=p=>a(p)?p.jquery?p[0]:p:typeof p=="string"&&p.length>0?document.querySelector(r(p)):null,h=p=>{if(!a(p)||p.getClientRects().length===0)return!1;const c=getComputedStyle(p).getPropertyValue("visibility")==="visible",d=p.closest("details:not([open])");if(!d)return c;if(d!==p){const _=p.closest("summary");if(_&&_.parentNode!==d||_===null)return!1}return c},u=p=>!p||p.nodeType!==Node.ELEMENT_NODE||!!p.classList.contains("disabled")||(p.disabled!==void 0?p.disabled:p.hasAttribute("disabled")&&p.getAttribute("disabled")!=="false"),f=p=>{if(!document.documentElement.attachShadow)return null;if(typeof p.getRootNode=="function"){const c=p.getRootNode();return c instanceof ShadowRoot?c:null}return p instanceof ShadowRoot?p:p.parentNode?f(p.parentNode):null},g=()=>{},m=p=>{p.offsetHeight},v=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,b=[],C=()=>document.documentElement.dir==="rtl",O=p=>{var c;c=()=>{const d=v();if(d){const _=p.NAME,T=d.fn[_];d.fn[_]=p.jQueryInterface,d.fn[_].Constructor=p,d.fn[_].noConflict=()=>(d.fn[_]=T,p.jQueryInterface)}},document.readyState==="loading"?(b.length||document.addEventListener("DOMContentLoaded",()=>{for(const d of b)d()}),b.push(c)):c()},D=(p,c=[],d=p)=>typeof p=="function"?p.call(...c):d,L=(p,c,d=!0)=>{if(!d)return void D(p);const _=(M=>{if(!M)return 0;let{transitionDuration:W,transitionDelay:z}=window.getComputedStyle(M);const et=Number.parseFloat(W),st=Number.parseFloat(z);return et||st?(W=W.split(",")[0],z=z.split(",")[0],1e3*(Number.parseFloat(W)+Number.parseFloat(z))):0})(c)+5;let T=!1;const E=({target:M})=>{M===c&&(T=!0,c.removeEventListener(n,E),D(p))};c.addEventListener(n,E),setTimeout(()=>{T||o(c)},_)},P=(p,c,d,_)=>{const T=p.length;let E=p.indexOf(c);return E===-1?!d&&_?p[T-1]:p[0]:(E+=d?1:-1,_&&(E=(E+T)%T),p[Math.max(0,Math.min(E,T-1))])},V=/[^.]*(?=\..*)\.|.*/,it=/\..*/,J=/::\d+$/,H={};let Z=1;const lt={mouseenter:"mouseover",mouseleave:"mouseout"},St=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function wt(p,c){return c&&`${c}::${Z++}`||p.uidEvent||Z++}function ut(p){const c=wt(p);return p.uidEvent=c,H[c]=H[c]||{},H[c]}function Et(p,c,d=null){return Object.values(p).find(_=>_.callable===c&&_.delegationSelector===d)}function Gt(p,c,d){const _=typeof c=="string",T=_?d:c||d;let E=Qt(p);return St.has(E)||(E=p),[_,T,E]}function vt(p,c,d,_,T){if(typeof c!="string"||!p)return;let[E,M,W]=Gt(c,d,_);c in lt&&(M=(gt=>function(ft){if(!ft.relatedTarget||ft.relatedTarget!==ft.delegateTarget&&!ft.delegateTarget.contains(ft.relatedTarget))return gt.call(this,ft)})(M));const z=ut(p),et=z[W]||(z[W]={}),st=Et(et,M,E?d:null);if(st)return void(st.oneOff=st.oneOff&&T);const q=wt(M,c.replace(V,"")),yt=E?function(ht,gt,ft){return function pt(Ht){const zt=ht.querySelectorAll(gt);for(let{target:Ct}=Ht;Ct&&Ct!==this;Ct=Ct.parentNode)for(const Mt of zt)if(Mt===Ct)return ce(Ht,{delegateTarget:Ct}),pt.oneOff&&R.off(ht,Ht.type,gt,ft),ft.apply(Ct,[Ht])}}(p,d,M):function(ht,gt){return function ft(pt){return ce(pt,{delegateTarget:ht}),ft.oneOff&&R.off(ht,pt.type,gt),gt.apply(ht,[pt])}}(p,M);yt.delegationSelector=E?d:null,yt.callable=M,yt.oneOff=T,yt.uidEvent=q,et[q]=yt,p.addEventListener(W,yt,E)}function nt(p,c,d,_,T){const E=Et(c[d],_,T);E&&(p.removeEventListener(d,E,!!T),delete c[d][E.uidEvent])}function ot(p,c,d,_){const T=c[d]||{};for(const[E,M]of Object.entries(T))E.includes(_)&&nt(p,c,d,M.callable,M.delegationSelector)}function Qt(p){return p=p.replace(it,""),lt[p]||p}const R={on(p,c,d,_){vt(p,c,d,_,!1)},one(p,c,d,_){vt(p,c,d,_,!0)},off(p,c,d,_){if(typeof c!="string"||!p)return;const[T,E,M]=Gt(c,d,_),W=M!==c,z=ut(p),et=z[M]||{},st=c.startsWith(".");if(E===void 0){if(st)for(const q of Object.keys(z))ot(p,z,q,c.slice(1));for(const[q,yt]of Object.entries(et)){const ht=q.replace(J,"");W&&!c.includes(ht)||nt(p,z,M,yt.callable,yt.delegationSelector)}}else{if(!Object.keys(et).length)return;nt(p,z,M,E,T?d:null)}},trigger(p,c,d){if(typeof c!="string"||!p)return null;const _=v();let T=null,E=!0,M=!0,W=!1;c!==Qt(c)&&_&&(T=_.Event(c,d),_(p).trigger(T),E=!T.isPropagationStopped(),M=!T.isImmediatePropagationStopped(),W=T.isDefaultPrevented());const z=ce(new Event(c,{bubbles:E,cancelable:!0}),d);return W&&z.preventDefault(),M&&p.dispatchEvent(z),z.defaultPrevented&&T&&T.preventDefault(),z}};function ce(p,c={}){for(const[d,_]of Object.entries(c))try{p[d]=_}catch{Object.defineProperty(p,d,{configurable:!0,get:()=>_})}return p}function ee(p){if(p==="true")return!0;if(p==="false")return!1;if(p===Number(p).toString())return Number(p);if(p===""||p==="null")return null;if(typeof p!="string")return p;try{return JSON.parse(decodeURIComponent(p))}catch{return p}}function ve(p){return p.replace(/[A-Z]/g,c=>`-${c.toLowerCase()}`)}const $t={setDataAttribute(p,c,d){p.setAttribute(`data-bs-${ve(c)}`,d)},removeDataAttribute(p,c){p.removeAttribute(`data-bs-${ve(c)}`)},getDataAttributes(p){if(!p)return{};const c={},d=Object.keys(p.dataset).filter(_=>_.startsWith("bs")&&!_.startsWith("bsConfig"));for(const _ of d){let T=_.replace(/^bs/,"");T=T.charAt(0).toLowerCase()+T.slice(1),c[T]=ee(p.dataset[_])}return c},getDataAttribute:(p,c)=>ee(p.getAttribute(`data-bs-${ve(c)}`))};class Se{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(c){return c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c}_mergeConfigObj(c,d){const _=a(d)?$t.getDataAttribute(d,"config"):{};return{...this.constructor.Default,...typeof _=="object"?_:{},...a(d)?$t.getDataAttributes(d):{},...typeof c=="object"?c:{}}}_typeCheckConfig(c,d=this.constructor.DefaultType){for(const[T,E]of Object.entries(d)){const M=c[T],W=a(M)?"element":(_=M)==null?`${_}`:Object.prototype.toString.call(_).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(E).test(W))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${T}" provided type "${W}" but expected type "${E}".`)}var _}}class At extends Se{constructor(c,d){super(),(c=l(c))&&(this._element=c,this._config=this._getConfig(d),s.set(this._element,this.constructor.DATA_KEY,this))}dispose(){s.remove(this._element,this.constructor.DATA_KEY),R.off(this._element,this.constructor.EVENT_KEY);for(const c of Object.getOwnPropertyNames(this))this[c]=null}_queueCallback(c,d,_=!0){L(c,d,_)}_getConfig(c){return c=this._mergeConfigObj(c,this._element),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}static getInstance(c){return s.get(l(c),this.DATA_KEY)}static getOrCreateInstance(c,d={}){return this.getInstance(c)||new this(c,typeof d=="object"?d:null)}static get VERSION(){return"5.3.5"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(c){return`${c}${this.EVENT_KEY}`}}const F=p=>{let c=p.getAttribute("data-bs-target");if(!c||c==="#"){let d=p.getAttribute("href");if(!d||!d.includes("#")&&!d.startsWith("."))return null;d.includes("#")&&!d.startsWith("#")&&(d=`#${d.split("#")[1]}`),c=d&&d!=="#"?d.trim():null}return c?c.split(",").map(d=>r(d)).join(","):null},j={find:(p,c=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(c,p)),findOne:(p,c=document.documentElement)=>Element.prototype.querySelector.call(c,p),children:(p,c)=>[].concat(...p.children).filter(d=>d.matches(c)),parents(p,c){const d=[];let _=p.parentNode.closest(c);for(;_;)d.push(_),_=_.parentNode.closest(c);return d},prev(p,c){let d=p.previousElementSibling;for(;d;){if(d.matches(c))return[d];d=d.previousElementSibling}return[]},next(p,c){let d=p.nextElementSibling;for(;d;){if(d.matches(c))return[d];d=d.nextElementSibling}return[]},focusableChildren(p){const c=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(d=>`${d}:not([tabindex^="-"])`).join(",");return this.find(c,p).filter(d=>!u(d)&&h(d))},getSelectorFromElement(p){const c=F(p);return c&&j.findOne(c)?c:null},getElementFromSelector(p){const c=F(p);return c?j.findOne(c):null},getMultipleElementsFromSelector(p){const c=F(p);return c?j.find(c):[]}},U=(p,c="hide")=>{const d=`click.dismiss${p.EVENT_KEY}`,_=p.NAME;R.on(document,d,`[data-bs-dismiss="${_}"]`,function(T){if(["A","AREA"].includes(this.tagName)&&T.preventDefault(),u(this))return;const E=j.getElementFromSelector(this)||this.closest(`.${_}`);p.getOrCreateInstance(E)[c]()})},Q=".bs.alert",Rt=`close${Q}`,y=`closed${Q}`;class x extends At{static get NAME(){return"alert"}close(){if(R.trigger(this._element,Rt).defaultPrevented)return;this._element.classList.remove("show");const c=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,c)}_destroyElement(){this._element.remove(),R.trigger(this._element,y),this.dispose()}static jQueryInterface(c){return this.each(function(){const d=x.getOrCreateInstance(this);if(typeof c=="string"){if(d[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);d[c](this)}})}}U(x,"close"),O(x);const A='[data-bs-toggle="button"]';class I extends At{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(c){return this.each(function(){const d=I.getOrCreateInstance(this);c==="toggle"&&d[c]()})}}R.on(document,"click.bs.button.data-api",A,p=>{p.preventDefault();const c=p.target.closest(A);I.getOrCreateInstance(c).toggle()}),O(I);const B=".bs.swipe",N=`touchstart${B}`,$=`touchmove${B}`,G=`touchend${B}`,Y=`pointerdown${B}`,X=`pointerup${B}`,ct={endCallback:null,leftCallback:null,rightCallback:null},K={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class rt extends Se{constructor(c,d){super(),this._element=c,c&&rt.isSupported()&&(this._config=this._getConfig(d),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return ct}static get DefaultType(){return K}static get NAME(){return"swipe"}dispose(){R.off(this._element,B)}_start(c){this._supportPointerEvents?this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX):this._deltaX=c.touches[0].clientX}_end(c){this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX-this._deltaX),this._handleSwipe(),D(this._config.endCallback)}_move(c){this._deltaX=c.touches&&c.touches.length>1?0:c.touches[0].clientX-this._deltaX}_handleSwipe(){const c=Math.abs(this._deltaX);if(c<=40)return;const d=c/this._deltaX;this._deltaX=0,d&&D(d>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(R.on(this._element,Y,c=>this._start(c)),R.on(this._element,X,c=>this._end(c)),this._element.classList.add("pointer-event")):(R.on(this._element,N,c=>this._start(c)),R.on(this._element,$,c=>this._move(c)),R.on(this._element,G,c=>this._end(c)))}_eventIsPointerPenTouch(c){return this._supportPointerEvents&&(c.pointerType==="pen"||c.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const at=".bs.carousel",Tt=".data-api",Wt="ArrowLeft",kt="ArrowRight",he="next",se="prev",pe="left",Te="right",Ti=`slide${at}`,tn=`slid${at}`,Oe=`keydown${at}`,Ze=`mouseenter${at}`,Vr=`mouseleave${at}`,zp=`dragstart${at}`,Up=`load${at}${Tt}`,Gp=`click${at}${Tt}`,ih="carousel",Xr="active",nh=".active",rh=".carousel-item",$p=nh+rh,qp={[Wt]:Te,[kt]:pe},Kp={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Jp={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class en extends At{constructor(c,d){super(c,d),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=j.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ih&&this.cycle()}static get Default(){return Kp}static get DefaultType(){return Jp}static get NAME(){return"carousel"}next(){this._slide(he)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(se)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?R.one(this._element,tn,()=>this.cycle()):this.cycle())}to(c){const d=this._getItems();if(c>d.length-1||c<0)return;if(this._isSliding)return void R.one(this._element,tn,()=>this.to(c));const _=this._getItemIndex(this._getActive());if(_===c)return;const T=c>_?he:se;this._slide(T,d[c])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(c){return c.defaultInterval=c.interval,c}_addEventListeners(){this._config.keyboard&&R.on(this._element,Oe,c=>this._keydown(c)),this._config.pause==="hover"&&(R.on(this._element,Ze,()=>this.pause()),R.on(this._element,Vr,()=>this._maybeEnableCycle())),this._config.touch&&rt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const d of j.find(".carousel-item img",this._element))R.on(d,zp,_=>_.preventDefault());const c={leftCallback:()=>this._slide(this._directionToOrder(pe)),rightCallback:()=>this._slide(this._directionToOrder(Te)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new rt(this._element,c)}_keydown(c){if(/input|textarea/i.test(c.target.tagName))return;const d=qp[c.key];d&&(c.preventDefault(),this._slide(this._directionToOrder(d)))}_getItemIndex(c){return this._getItems().indexOf(c)}_setActiveIndicatorElement(c){if(!this._indicatorsElement)return;const d=j.findOne(nh,this._indicatorsElement);d.classList.remove(Xr),d.removeAttribute("aria-current");const _=j.findOne(`[data-bs-slide-to="${c}"]`,this._indicatorsElement);_&&(_.classList.add(Xr),_.setAttribute("aria-current","true"))}_updateInterval(){const c=this._activeElement||this._getActive();if(!c)return;const d=Number.parseInt(c.getAttribute("data-bs-interval"),10);this._config.interval=d||this._config.defaultInterval}_slide(c,d=null){if(this._isSliding)return;const _=this._getActive(),T=c===he,E=d||P(this._getItems(),_,T,this._config.wrap);if(E===_)return;const M=this._getItemIndex(E),W=q=>R.trigger(this._element,q,{relatedTarget:E,direction:this._orderToDirection(c),from:this._getItemIndex(_),to:M});if(W(Ti).defaultPrevented||!_||!E)return;const z=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(M),this._activeElement=E;const et=T?"carousel-item-start":"carousel-item-end",st=T?"carousel-item-next":"carousel-item-prev";E.classList.add(st),m(E),_.classList.add(et),E.classList.add(et),this._queueCallback(()=>{E.classList.remove(et,st),E.classList.add(Xr),_.classList.remove(Xr,st,et),this._isSliding=!1,W(tn)},_,this._isAnimated()),z&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return j.findOne($p,this._element)}_getItems(){return j.find(rh,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(c){return C()?c===pe?se:he:c===pe?he:se}_orderToDirection(c){return C()?c===se?pe:Te:c===se?Te:pe}static jQueryInterface(c){return this.each(function(){const d=en.getOrCreateInstance(this,c);if(typeof c!="number"){if(typeof c=="string"){if(d[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);d[c]()}}else d.to(c)})}}R.on(document,Gp,"[data-bs-slide], [data-bs-slide-to]",function(p){const c=j.getElementFromSelector(this);if(!c||!c.classList.contains(ih))return;p.preventDefault();const d=en.getOrCreateInstance(c),_=this.getAttribute("data-bs-slide-to");return _?(d.to(_),void d._maybeEnableCycle()):$t.getDataAttribute(this,"slide")==="next"?(d.next(),void d._maybeEnableCycle()):(d.prev(),void d._maybeEnableCycle())}),R.on(window,Up,()=>{const p=j.find('[data-bs-ride="carousel"]');for(const c of p)en.getOrCreateInstance(c)}),O(en);const Un=".bs.collapse",Qp=`show${Un}`,Zp=`shown${Un}`,tm=`hide${Un}`,em=`hidden${Un}`,sm=`click${Un}.data-api`,La="show",sn="collapse",Yr="collapsing",im=`:scope .${sn} .${sn}`,Ra='[data-bs-toggle="collapse"]',nm={parent:null,toggle:!0},rm={parent:"(null|element)",toggle:"boolean"};class nn extends At{constructor(c,d){super(c,d),this._isTransitioning=!1,this._triggerArray=[];const _=j.find(Ra);for(const T of _){const E=j.getSelectorFromElement(T),M=j.find(E).filter(W=>W===this._element);E!==null&&M.length&&this._triggerArray.push(T)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return nm}static get DefaultType(){return rm}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let c=[];if(this._config.parent&&(c=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(T=>T!==this._element).map(T=>nn.getOrCreateInstance(T,{toggle:!1}))),c.length&&c[0]._isTransitioning||R.trigger(this._element,Qp).defaultPrevented)return;for(const T of c)T.hide();const d=this._getDimension();this._element.classList.remove(sn),this._element.classList.add(Yr),this._element.style[d]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const _=`scroll${d[0].toUpperCase()+d.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Yr),this._element.classList.add(sn,La),this._element.style[d]="",R.trigger(this._element,Zp)},this._element,!0),this._element.style[d]=`${this._element[_]}px`}hide(){if(this._isTransitioning||!this._isShown()||R.trigger(this._element,tm).defaultPrevented)return;const c=this._getDimension();this._element.style[c]=`${this._element.getBoundingClientRect()[c]}px`,m(this._element),this._element.classList.add(Yr),this._element.classList.remove(sn,La);for(const d of this._triggerArray){const _=j.getElementFromSelector(d);_&&!this._isShown(_)&&this._addAriaAndCollapsedClass([d],!1)}this._isTransitioning=!0,this._element.style[c]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Yr),this._element.classList.add(sn),R.trigger(this._element,em)},this._element,!0)}_isShown(c=this._element){return c.classList.contains(La)}_configAfterMerge(c){return c.toggle=!!c.toggle,c.parent=l(c.parent),c}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const c=this._getFirstLevelChildren(Ra);for(const d of c){const _=j.getElementFromSelector(d);_&&this._addAriaAndCollapsedClass([d],this._isShown(_))}}_getFirstLevelChildren(c){const d=j.find(im,this._config.parent);return j.find(c,this._config.parent).filter(_=>!d.includes(_))}_addAriaAndCollapsedClass(c,d){if(c.length)for(const _ of c)_.classList.toggle("collapsed",!d),_.setAttribute("aria-expanded",d)}static jQueryInterface(c){const d={};return typeof c=="string"&&/show|hide/.test(c)&&(d.toggle=!1),this.each(function(){const _=nn.getOrCreateInstance(this,d);if(typeof c=="string"){if(_[c]===void 0)throw new TypeError(`No method named "${c}"`);_[c]()}})}}R.on(document,sm,Ra,function(p){(p.target.tagName==="A"||p.delegateTarget&&p.delegateTarget.tagName==="A")&&p.preventDefault();for(const c of j.getMultipleElementsFromSelector(this))nn.getOrCreateInstance(c,{toggle:!1}).toggle()}),O(nn);var Ee="top",Ye="bottom",ze="right",Ae="left",zr="auto",rn=[Ee,Ye,ze,Ae],Oi="start",on="end",oh="clippingParents",Ia="viewport",an="popper",ah="reference",Ba=rn.reduce(function(p,c){return p.concat([c+"-"+Oi,c+"-"+on])},[]),Na=[].concat(rn,[zr]).reduce(function(p,c){return p.concat([c,c+"-"+Oi,c+"-"+on])},[]),lh="beforeRead",ch="read",hh="afterRead",uh="beforeMain",fh="main",dh="afterMain",gh="beforeWrite",ph="write",mh="afterWrite",_h=[lh,ch,hh,uh,fh,dh,gh,ph,mh];function Os(p){return p?(p.nodeName||"").toLowerCase():null}function Ue(p){if(p==null)return window;if(p.toString()!=="[object Window]"){var c=p.ownerDocument;return c&&c.defaultView||window}return p}function Ei(p){return p instanceof Ue(p).Element||p instanceof Element}function ts(p){return p instanceof Ue(p).HTMLElement||p instanceof HTMLElement}function Wa(p){return typeof ShadowRoot<"u"&&(p instanceof Ue(p).ShadowRoot||p instanceof ShadowRoot)}const Ha={name:"applyStyles",enabled:!0,phase:"write",fn:function(p){var c=p.state;Object.keys(c.elements).forEach(function(d){var _=c.styles[d]||{},T=c.attributes[d]||{},E=c.elements[d];ts(E)&&Os(E)&&(Object.assign(E.style,_),Object.keys(T).forEach(function(M){var W=T[M];W===!1?E.removeAttribute(M):E.setAttribute(M,W===!0?"":W)}))})},effect:function(p){var c=p.state,d={popper:{position:c.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(c.elements.popper.style,d.popper),c.styles=d,c.elements.arrow&&Object.assign(c.elements.arrow.style,d.arrow),function(){Object.keys(c.elements).forEach(function(_){var T=c.elements[_],E=c.attributes[_]||{},M=Object.keys(c.styles.hasOwnProperty(_)?c.styles[_]:d[_]).reduce(function(W,z){return W[z]="",W},{});ts(T)&&Os(T)&&(Object.assign(T.style,M),Object.keys(E).forEach(function(W){T.removeAttribute(W)}))})}},requires:["computeStyles"]};function Es(p){return p.split("-")[0]}var Ai=Math.max,Ur=Math.min,ln=Math.round;function Va(){var p=navigator.userAgentData;return p!=null&&p.brands&&Array.isArray(p.brands)?p.brands.map(function(c){return c.brand+"/"+c.version}).join(" "):navigator.userAgent}function vh(){return!/^((?!chrome|android).)*safari/i.test(Va())}function cn(p,c,d){c===void 0&&(c=!1),d===void 0&&(d=!1);var _=p.getBoundingClientRect(),T=1,E=1;c&&ts(p)&&(T=p.offsetWidth>0&&ln(_.width)/p.offsetWidth||1,E=p.offsetHeight>0&&ln(_.height)/p.offsetHeight||1);var M=(Ei(p)?Ue(p):window).visualViewport,W=!vh()&&d,z=(_.left+(W&&M?M.offsetLeft:0))/T,et=(_.top+(W&&M?M.offsetTop:0))/E,st=_.width/T,q=_.height/E;return{width:st,height:q,top:et,right:z+st,bottom:et+q,left:z,x:z,y:et}}function Xa(p){var c=cn(p),d=p.offsetWidth,_=p.offsetHeight;return Math.abs(c.width-d)<=1&&(d=c.width),Math.abs(c.height-_)<=1&&(_=c.height),{x:p.offsetLeft,y:p.offsetTop,width:d,height:_}}function yh(p,c){var d=c.getRootNode&&c.getRootNode();if(p.contains(c))return!0;if(d&&Wa(d)){var _=c;do{if(_&&p.isSameNode(_))return!0;_=_.parentNode||_.host}while(_)}return!1}function Ns(p){return Ue(p).getComputedStyle(p)}function om(p){return["table","td","th"].indexOf(Os(p))>=0}function ri(p){return((Ei(p)?p.ownerDocument:p.document)||window.document).documentElement}function Gr(p){return Os(p)==="html"?p:p.assignedSlot||p.parentNode||(Wa(p)?p.host:null)||ri(p)}function bh(p){return ts(p)&&Ns(p).position!=="fixed"?p.offsetParent:null}function Gn(p){for(var c=Ue(p),d=bh(p);d&&om(d)&&Ns(d).position==="static";)d=bh(d);return d&&(Os(d)==="html"||Os(d)==="body"&&Ns(d).position==="static")?c:d||function(_){var T=/firefox/i.test(Va());if(/Trident/i.test(Va())&&ts(_)&&Ns(_).position==="fixed")return null;var E=Gr(_);for(Wa(E)&&(E=E.host);ts(E)&&["html","body"].indexOf(Os(E))<0;){var M=Ns(E);if(M.transform!=="none"||M.perspective!=="none"||M.contain==="paint"||["transform","perspective"].indexOf(M.willChange)!==-1||T&&M.willChange==="filter"||T&&M.filter&&M.filter!=="none")return E;E=E.parentNode}return null}(p)||c}function Ya(p){return["top","bottom"].indexOf(p)>=0?"x":"y"}function $n(p,c,d){return Ai(p,Ur(c,d))}function xh(p){return Object.assign({},{top:0,right:0,bottom:0,left:0},p)}function wh(p,c){return c.reduce(function(d,_){return d[_]=p,d},{})}const Ch={name:"arrow",enabled:!0,phase:"main",fn:function(p){var c,d=p.state,_=p.name,T=p.options,E=d.elements.arrow,M=d.modifiersData.popperOffsets,W=Es(d.placement),z=Ya(W),et=[Ae,ze].indexOf(W)>=0?"height":"width";if(E&&M){var st=function(Vt,Bt){return xh(typeof(Vt=typeof Vt=="function"?Vt(Object.assign({},Bt.rects,{placement:Bt.placement})):Vt)!="number"?Vt:wh(Vt,rn))}(T.padding,d),q=Xa(E),yt=z==="y"?Ee:Ae,ht=z==="y"?Ye:ze,gt=d.rects.reference[et]+d.rects.reference[z]-M[z]-d.rects.popper[et],ft=M[z]-d.rects.reference[z],pt=Gn(E),Ht=pt?z==="y"?pt.clientHeight||0:pt.clientWidth||0:0,zt=gt/2-ft/2,Ct=st[yt],Mt=Ht-q[et]-st[ht],bt=Ht/2-q[et]/2+zt,Ot=$n(Ct,bt,Mt),It=z;d.modifiersData[_]=((c={})[It]=Ot,c.centerOffset=Ot-bt,c)}},effect:function(p){var c=p.state,d=p.options.element,_=d===void 0?"[data-popper-arrow]":d;_!=null&&(typeof _!="string"||(_=c.elements.popper.querySelector(_)))&&yh(c.elements.popper,_)&&(c.elements.arrow=_)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hn(p){return p.split("-")[1]}var am={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Sh(p){var c,d=p.popper,_=p.popperRect,T=p.placement,E=p.variation,M=p.offsets,W=p.position,z=p.gpuAcceleration,et=p.adaptive,st=p.roundOffsets,q=p.isFixed,yt=M.x,ht=yt===void 0?0:yt,gt=M.y,ft=gt===void 0?0:gt,pt=typeof st=="function"?st({x:ht,y:ft}):{x:ht,y:ft};ht=pt.x,ft=pt.y;var Ht=M.hasOwnProperty("x"),zt=M.hasOwnProperty("y"),Ct=Ae,Mt=Ee,bt=window;if(et){var Ot=Gn(d),It="clientHeight",Vt="clientWidth";Ot===Ue(d)&&Ns(Ot=ri(d)).position!=="static"&&W==="absolute"&&(It="scrollHeight",Vt="scrollWidth"),(T===Ee||(T===Ae||T===ze)&&E===on)&&(Mt=Ye,ft-=(q&&Ot===bt&&bt.visualViewport?bt.visualViewport.height:Ot[It])-_.height,ft*=z?1:-1),T!==Ae&&(T!==Ee&&T!==Ye||E!==on)||(Ct=ze,ht-=(q&&Ot===bt&&bt.visualViewport?bt.visualViewport.width:Ot[Vt])-_.width,ht*=z?1:-1)}var Bt,ie=Object.assign({position:W},et&&am),Ge=st===!0?function(ds,De){var ss=ds.x,is=ds.y,te=De.devicePixelRatio||1;return{x:ln(ss*te)/te||0,y:ln(is*te)/te||0}}({x:ht,y:ft},Ue(d)):{x:ht,y:ft};return ht=Ge.x,ft=Ge.y,z?Object.assign({},ie,((Bt={})[Mt]=zt?"0":"",Bt[Ct]=Ht?"0":"",Bt.transform=(bt.devicePixelRatio||1)<=1?"translate("+ht+"px, "+ft+"px)":"translate3d("+ht+"px, "+ft+"px, 0)",Bt)):Object.assign({},ie,((c={})[Mt]=zt?ft+"px":"",c[Ct]=Ht?ht+"px":"",c.transform="",c))}const za={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(p){var c=p.state,d=p.options,_=d.gpuAcceleration,T=_===void 0||_,E=d.adaptive,M=E===void 0||E,W=d.roundOffsets,z=W===void 0||W,et={placement:Es(c.placement),variation:hn(c.placement),popper:c.elements.popper,popperRect:c.rects.popper,gpuAcceleration:T,isFixed:c.options.strategy==="fixed"};c.modifiersData.popperOffsets!=null&&(c.styles.popper=Object.assign({},c.styles.popper,Sh(Object.assign({},et,{offsets:c.modifiersData.popperOffsets,position:c.options.strategy,adaptive:M,roundOffsets:z})))),c.modifiersData.arrow!=null&&(c.styles.arrow=Object.assign({},c.styles.arrow,Sh(Object.assign({},et,{offsets:c.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:z})))),c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-placement":c.placement})},data:{}};var $r={passive:!0};const Ua={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(p){var c=p.state,d=p.instance,_=p.options,T=_.scroll,E=T===void 0||T,M=_.resize,W=M===void 0||M,z=Ue(c.elements.popper),et=[].concat(c.scrollParents.reference,c.scrollParents.popper);return E&&et.forEach(function(st){st.addEventListener("scroll",d.update,$r)}),W&&z.addEventListener("resize",d.update,$r),function(){E&&et.forEach(function(st){st.removeEventListener("scroll",d.update,$r)}),W&&z.removeEventListener("resize",d.update,$r)}},data:{}};var lm={left:"right",right:"left",bottom:"top",top:"bottom"};function qr(p){return p.replace(/left|right|bottom|top/g,function(c){return lm[c]})}var cm={start:"end",end:"start"};function Th(p){return p.replace(/start|end/g,function(c){return cm[c]})}function Ga(p){var c=Ue(p);return{scrollLeft:c.pageXOffset,scrollTop:c.pageYOffset}}function $a(p){return cn(ri(p)).left+Ga(p).scrollLeft}function qa(p){var c=Ns(p),d=c.overflow,_=c.overflowX,T=c.overflowY;return/auto|scroll|overlay|hidden/.test(d+T+_)}function Oh(p){return["html","body","#document"].indexOf(Os(p))>=0?p.ownerDocument.body:ts(p)&&qa(p)?p:Oh(Gr(p))}function qn(p,c){var d;c===void 0&&(c=[]);var _=Oh(p),T=_===((d=p.ownerDocument)==null?void 0:d.body),E=Ue(_),M=T?[E].concat(E.visualViewport||[],qa(_)?_:[]):_,W=c.concat(M);return T?W:W.concat(qn(Gr(M)))}function Ka(p){return Object.assign({},p,{left:p.x,top:p.y,right:p.x+p.width,bottom:p.y+p.height})}function Eh(p,c,d){return c===Ia?Ka(function(_,T){var E=Ue(_),M=ri(_),W=E.visualViewport,z=M.clientWidth,et=M.clientHeight,st=0,q=0;if(W){z=W.width,et=W.height;var yt=vh();(yt||!yt&&T==="fixed")&&(st=W.offsetLeft,q=W.offsetTop)}return{width:z,height:et,x:st+$a(_),y:q}}(p,d)):Ei(c)?function(_,T){var E=cn(_,!1,T==="fixed");return E.top=E.top+_.clientTop,E.left=E.left+_.clientLeft,E.bottom=E.top+_.clientHeight,E.right=E.left+_.clientWidth,E.width=_.clientWidth,E.height=_.clientHeight,E.x=E.left,E.y=E.top,E}(c,d):Ka(function(_){var T,E=ri(_),M=Ga(_),W=(T=_.ownerDocument)==null?void 0:T.body,z=Ai(E.scrollWidth,E.clientWidth,W?W.scrollWidth:0,W?W.clientWidth:0),et=Ai(E.scrollHeight,E.clientHeight,W?W.scrollHeight:0,W?W.clientHeight:0),st=-M.scrollLeft+$a(_),q=-M.scrollTop;return Ns(W||E).direction==="rtl"&&(st+=Ai(E.clientWidth,W?W.clientWidth:0)-z),{width:z,height:et,x:st,y:q}}(ri(p)))}function Ah(p){var c,d=p.reference,_=p.element,T=p.placement,E=T?Es(T):null,M=T?hn(T):null,W=d.x+d.width/2-_.width/2,z=d.y+d.height/2-_.height/2;switch(E){case Ee:c={x:W,y:d.y-_.height};break;case Ye:c={x:W,y:d.y+d.height};break;case ze:c={x:d.x+d.width,y:z};break;case Ae:c={x:d.x-_.width,y:z};break;default:c={x:d.x,y:d.y}}var et=E?Ya(E):null;if(et!=null){var st=et==="y"?"height":"width";switch(M){case Oi:c[et]=c[et]-(d[st]/2-_[st]/2);break;case on:c[et]=c[et]+(d[st]/2-_[st]/2)}}return c}function un(p,c){c===void 0&&(c={});var d=c,_=d.placement,T=_===void 0?p.placement:_,E=d.strategy,M=E===void 0?p.strategy:E,W=d.boundary,z=W===void 0?oh:W,et=d.rootBoundary,st=et===void 0?Ia:et,q=d.elementContext,yt=q===void 0?an:q,ht=d.altBoundary,gt=ht!==void 0&&ht,ft=d.padding,pt=ft===void 0?0:ft,Ht=xh(typeof pt!="number"?pt:wh(pt,rn)),zt=yt===an?ah:an,Ct=p.rects.popper,Mt=p.elements[gt?zt:yt],bt=function(De,ss,is,te){var As=ss==="clippingParents"?function(Xt){var ke=qn(Gr(Xt)),ns=["absolute","fixed"].indexOf(Ns(Xt).position)>=0&&ts(Xt)?Gn(Xt):Xt;return Ei(ns)?ke.filter(function(ai){return Ei(ai)&&yh(ai,ns)&&Os(ai)!=="body"}):[]}(De):[].concat(ss),Ds=[].concat(As,[is]),gn=Ds[0],de=Ds.reduce(function(Xt,ke){var ns=Eh(De,ke,te);return Xt.top=Ai(ns.top,Xt.top),Xt.right=Ur(ns.right,Xt.right),Xt.bottom=Ur(ns.bottom,Xt.bottom),Xt.left=Ai(ns.left,Xt.left),Xt},Eh(De,gn,te));return de.width=de.right-de.left,de.height=de.bottom-de.top,de.x=de.left,de.y=de.top,de}(Ei(Mt)?Mt:Mt.contextElement||ri(p.elements.popper),z,st,M),Ot=cn(p.elements.reference),It=Ah({reference:Ot,element:Ct,placement:T}),Vt=Ka(Object.assign({},Ct,It)),Bt=yt===an?Vt:Ot,ie={top:bt.top-Bt.top+Ht.top,bottom:Bt.bottom-bt.bottom+Ht.bottom,left:bt.left-Bt.left+Ht.left,right:Bt.right-bt.right+Ht.right},Ge=p.modifiersData.offset;if(yt===an&&Ge){var ds=Ge[T];Object.keys(ie).forEach(function(De){var ss=[ze,Ye].indexOf(De)>=0?1:-1,is=[Ee,Ye].indexOf(De)>=0?"y":"x";ie[De]+=ds[is]*ss})}return ie}function hm(p,c){c===void 0&&(c={});var d=c,_=d.placement,T=d.boundary,E=d.rootBoundary,M=d.padding,W=d.flipVariations,z=d.allowedAutoPlacements,et=z===void 0?Na:z,st=hn(_),q=st?W?Ba:Ba.filter(function(gt){return hn(gt)===st}):rn,yt=q.filter(function(gt){return et.indexOf(gt)>=0});yt.length===0&&(yt=q);var ht=yt.reduce(function(gt,ft){return gt[ft]=un(p,{placement:ft,boundary:T,rootBoundary:E,padding:M})[Es(ft)],gt},{});return Object.keys(ht).sort(function(gt,ft){return ht[gt]-ht[ft]})}const Dh={name:"flip",enabled:!0,phase:"main",fn:function(p){var c=p.state,d=p.options,_=p.name;if(!c.modifiersData[_]._skip){for(var T=d.mainAxis,E=T===void 0||T,M=d.altAxis,W=M===void 0||M,z=d.fallbackPlacements,et=d.padding,st=d.boundary,q=d.rootBoundary,yt=d.altBoundary,ht=d.flipVariations,gt=ht===void 0||ht,ft=d.allowedAutoPlacements,pt=c.options.placement,Ht=Es(pt),zt=z||(Ht!==pt&&gt?function(Xt){if(Es(Xt)===zr)return[];var ke=qr(Xt);return[Th(Xt),ke,Th(ke)]}(pt):[qr(pt)]),Ct=[pt].concat(zt).reduce(function(Xt,ke){return Xt.concat(Es(ke)===zr?hm(c,{placement:ke,boundary:st,rootBoundary:q,padding:et,flipVariations:gt,allowedAutoPlacements:ft}):ke)},[]),Mt=c.rects.reference,bt=c.rects.popper,Ot=new Map,It=!0,Vt=Ct[0],Bt=0;Bt<Ct.length;Bt++){var ie=Ct[Bt],Ge=Es(ie),ds=hn(ie)===Oi,De=[Ee,Ye].indexOf(Ge)>=0,ss=De?"width":"height",is=un(c,{placement:ie,boundary:st,rootBoundary:q,altBoundary:yt,padding:et}),te=De?ds?ze:Ae:ds?Ye:Ee;Mt[ss]>bt[ss]&&(te=qr(te));var As=qr(te),Ds=[];if(E&&Ds.push(is[Ge]<=0),W&&Ds.push(is[te]<=0,is[As]<=0),Ds.every(function(Xt){return Xt})){Vt=ie,It=!1;break}Ot.set(ie,Ds)}if(It)for(var gn=function(Xt){var ke=Ct.find(function(ns){var ai=Ot.get(ns);if(ai)return ai.slice(0,Xt).every(function(no){return no})});if(ke)return Vt=ke,"break"},de=gt?3:1;de>0&&gn(de)!=="break";de--);c.placement!==Vt&&(c.modifiersData[_]._skip=!0,c.placement=Vt,c.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function kh(p,c,d){return d===void 0&&(d={x:0,y:0}),{top:p.top-c.height-d.y,right:p.right-c.width+d.x,bottom:p.bottom-c.height+d.y,left:p.left-c.width-d.x}}function Mh(p){return[Ee,ze,Ye,Ae].some(function(c){return p[c]>=0})}const Ph={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(p){var c=p.state,d=p.name,_=c.rects.reference,T=c.rects.popper,E=c.modifiersData.preventOverflow,M=un(c,{elementContext:"reference"}),W=un(c,{altBoundary:!0}),z=kh(M,_),et=kh(W,T,E),st=Mh(z),q=Mh(et);c.modifiersData[d]={referenceClippingOffsets:z,popperEscapeOffsets:et,isReferenceHidden:st,hasPopperEscaped:q},c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-reference-hidden":st,"data-popper-escaped":q})}},jh={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(p){var c=p.state,d=p.options,_=p.name,T=d.offset,E=T===void 0?[0,0]:T,M=Na.reduce(function(st,q){return st[q]=function(yt,ht,gt){var ft=Es(yt),pt=[Ae,Ee].indexOf(ft)>=0?-1:1,Ht=typeof gt=="function"?gt(Object.assign({},ht,{placement:yt})):gt,zt=Ht[0],Ct=Ht[1];return zt=zt||0,Ct=(Ct||0)*pt,[Ae,ze].indexOf(ft)>=0?{x:Ct,y:zt}:{x:zt,y:Ct}}(q,c.rects,E),st},{}),W=M[c.placement],z=W.x,et=W.y;c.modifiersData.popperOffsets!=null&&(c.modifiersData.popperOffsets.x+=z,c.modifiersData.popperOffsets.y+=et),c.modifiersData[_]=M}},Ja={name:"popperOffsets",enabled:!0,phase:"read",fn:function(p){var c=p.state,d=p.name;c.modifiersData[d]=Ah({reference:c.rects.reference,element:c.rects.popper,placement:c.placement})},data:{}},Fh={name:"preventOverflow",enabled:!0,phase:"main",fn:function(p){var c=p.state,d=p.options,_=p.name,T=d.mainAxis,E=T===void 0||T,M=d.altAxis,W=M!==void 0&&M,z=d.boundary,et=d.rootBoundary,st=d.altBoundary,q=d.padding,yt=d.tether,ht=yt===void 0||yt,gt=d.tetherOffset,ft=gt===void 0?0:gt,pt=un(c,{boundary:z,rootBoundary:et,padding:q,altBoundary:st}),Ht=Es(c.placement),zt=hn(c.placement),Ct=!zt,Mt=Ya(Ht),bt=Mt==="x"?"y":"x",Ot=c.modifiersData.popperOffsets,It=c.rects.reference,Vt=c.rects.popper,Bt=typeof ft=="function"?ft(Object.assign({},c.rects,{placement:c.placement})):ft,ie=typeof Bt=="number"?{mainAxis:Bt,altAxis:Bt}:Object.assign({mainAxis:0,altAxis:0},Bt),Ge=c.modifiersData.offset?c.modifiersData.offset[c.placement]:null,ds={x:0,y:0};if(Ot){if(E){var De,ss=Mt==="y"?Ee:Ae,is=Mt==="y"?Ye:ze,te=Mt==="y"?"height":"width",As=Ot[Mt],Ds=As+pt[ss],gn=As-pt[is],de=ht?-Vt[te]/2:0,Xt=zt===Oi?It[te]:Vt[te],ke=zt===Oi?-Vt[te]:-It[te],ns=c.elements.arrow,ai=ht&&ns?Xa(ns):{width:0,height:0},no=c.modifiersData["arrow#persistent"]?c.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},bu=no[ss],xu=no[is],ro=$n(0,It[te],ai[te]),V_=Ct?It[te]/2-de-ro-bu-ie.mainAxis:Xt-ro-bu-ie.mainAxis,X_=Ct?-It[te]/2+de+ro+xu+ie.mainAxis:ke+ro+xu+ie.mainAxis,hl=c.elements.arrow&&Gn(c.elements.arrow),Y_=hl?Mt==="y"?hl.clientTop||0:hl.clientLeft||0:0,wu=(De=Ge==null?void 0:Ge[Mt])!=null?De:0,z_=As+X_-wu,Cu=$n(ht?Ur(Ds,As+V_-wu-Y_):Ds,As,ht?Ai(gn,z_):gn);Ot[Mt]=Cu,ds[Mt]=Cu-As}if(W){var Su,U_=Mt==="x"?Ee:Ae,G_=Mt==="x"?Ye:ze,Ri=Ot[bt],oo=bt==="y"?"height":"width",Tu=Ri+pt[U_],Ou=Ri-pt[G_],ul=[Ee,Ae].indexOf(Ht)!==-1,Eu=(Su=Ge==null?void 0:Ge[bt])!=null?Su:0,Au=ul?Tu:Ri-It[oo]-Vt[oo]-Eu+ie.altAxis,Du=ul?Ri+It[oo]+Vt[oo]-Eu-ie.altAxis:Ou,ku=ht&&ul?function($_,q_,fl){var Mu=$n($_,q_,fl);return Mu>fl?fl:Mu}(Au,Ri,Du):$n(ht?Au:Tu,Ri,ht?Du:Ou);Ot[bt]=ku,ds[bt]=ku-Ri}c.modifiersData[_]=ds}},requiresIfExists:["offset"]};function um(p,c,d){d===void 0&&(d=!1);var _,T,E=ts(c),M=ts(c)&&function(q){var yt=q.getBoundingClientRect(),ht=ln(yt.width)/q.offsetWidth||1,gt=ln(yt.height)/q.offsetHeight||1;return ht!==1||gt!==1}(c),W=ri(c),z=cn(p,M,d),et={scrollLeft:0,scrollTop:0},st={x:0,y:0};return(E||!E&&!d)&&((Os(c)!=="body"||qa(W))&&(et=(_=c)!==Ue(_)&&ts(_)?{scrollLeft:(T=_).scrollLeft,scrollTop:T.scrollTop}:Ga(_)),ts(c)?((st=cn(c,!0)).x+=c.clientLeft,st.y+=c.clientTop):W&&(st.x=$a(W))),{x:z.left+et.scrollLeft-st.x,y:z.top+et.scrollTop-st.y,width:z.width,height:z.height}}function fm(p){var c=new Map,d=new Set,_=[];function T(E){d.add(E.name),[].concat(E.requires||[],E.requiresIfExists||[]).forEach(function(M){if(!d.has(M)){var W=c.get(M);W&&T(W)}}),_.push(E)}return p.forEach(function(E){c.set(E.name,E)}),p.forEach(function(E){d.has(E.name)||T(E)}),_}var Lh={placement:"bottom",modifiers:[],strategy:"absolute"};function Rh(){for(var p=arguments.length,c=new Array(p),d=0;d<p;d++)c[d]=arguments[d];return!c.some(function(_){return!(_&&typeof _.getBoundingClientRect=="function")})}function Kr(p){p===void 0&&(p={});var c=p,d=c.defaultModifiers,_=d===void 0?[]:d,T=c.defaultOptions,E=T===void 0?Lh:T;return function(M,W,z){z===void 0&&(z=E);var et,st,q={placement:"bottom",orderedModifiers:[],options:Object.assign({},Lh,E),modifiersData:{},elements:{reference:M,popper:W},attributes:{},styles:{}},yt=[],ht=!1,gt={state:q,setOptions:function(pt){var Ht=typeof pt=="function"?pt(q.options):pt;ft(),q.options=Object.assign({},E,q.options,Ht),q.scrollParents={reference:Ei(M)?qn(M):M.contextElement?qn(M.contextElement):[],popper:qn(W)};var zt,Ct,Mt=function(bt){var Ot=fm(bt);return _h.reduce(function(It,Vt){return It.concat(Ot.filter(function(Bt){return Bt.phase===Vt}))},[])}((zt=[].concat(_,q.options.modifiers),Ct=zt.reduce(function(bt,Ot){var It=bt[Ot.name];return bt[Ot.name]=It?Object.assign({},It,Ot,{options:Object.assign({},It.options,Ot.options),data:Object.assign({},It.data,Ot.data)}):Ot,bt},{}),Object.keys(Ct).map(function(bt){return Ct[bt]})));return q.orderedModifiers=Mt.filter(function(bt){return bt.enabled}),q.orderedModifiers.forEach(function(bt){var Ot=bt.name,It=bt.options,Vt=It===void 0?{}:It,Bt=bt.effect;if(typeof Bt=="function"){var ie=Bt({state:q,name:Ot,instance:gt,options:Vt});yt.push(ie||function(){})}}),gt.update()},forceUpdate:function(){if(!ht){var pt=q.elements,Ht=pt.reference,zt=pt.popper;if(Rh(Ht,zt)){q.rects={reference:um(Ht,Gn(zt),q.options.strategy==="fixed"),popper:Xa(zt)},q.reset=!1,q.placement=q.options.placement,q.orderedModifiers.forEach(function(Bt){return q.modifiersData[Bt.name]=Object.assign({},Bt.data)});for(var Ct=0;Ct<q.orderedModifiers.length;Ct++)if(q.reset!==!0){var Mt=q.orderedModifiers[Ct],bt=Mt.fn,Ot=Mt.options,It=Ot===void 0?{}:Ot,Vt=Mt.name;typeof bt=="function"&&(q=bt({state:q,options:It,name:Vt,instance:gt})||q)}else q.reset=!1,Ct=-1}}},update:(et=function(){return new Promise(function(pt){gt.forceUpdate(),pt(q)})},function(){return st||(st=new Promise(function(pt){Promise.resolve().then(function(){st=void 0,pt(et())})})),st}),destroy:function(){ft(),ht=!0}};if(!Rh(M,W))return gt;function ft(){yt.forEach(function(pt){return pt()}),yt=[]}return gt.setOptions(z).then(function(pt){!ht&&z.onFirstUpdate&&z.onFirstUpdate(pt)}),gt}}var dm=Kr(),gm=Kr({defaultModifiers:[Ua,Ja,za,Ha]}),Qa=Kr({defaultModifiers:[Ua,Ja,za,Ha,jh,Dh,Fh,Ch,Ph]});const Ih=Object.freeze(Object.defineProperty({__proto__:null,afterMain:dh,afterRead:hh,afterWrite:mh,applyStyles:Ha,arrow:Ch,auto:zr,basePlacements:rn,beforeMain:uh,beforeRead:lh,beforeWrite:gh,bottom:Ye,clippingParents:oh,computeStyles:za,createPopper:Qa,createPopperBase:dm,createPopperLite:gm,detectOverflow:un,end:on,eventListeners:Ua,flip:Dh,hide:Ph,left:Ae,main:fh,modifierPhases:_h,offset:jh,placements:Na,popper:an,popperGenerator:Kr,popperOffsets:Ja,preventOverflow:Fh,read:ch,reference:ah,right:ze,start:Oi,top:Ee,variationPlacements:Ba,viewport:Ia,write:ph},Symbol.toStringTag,{value:"Module"})),Bh="dropdown",Di=".bs.dropdown",Za=".data-api",pm="ArrowUp",Nh="ArrowDown",mm=`hide${Di}`,_m=`hidden${Di}`,vm=`show${Di}`,ym=`shown${Di}`,Wh=`click${Di}${Za}`,Hh=`keydown${Di}${Za}`,bm=`keyup${Di}${Za}`,fn="show",ki='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',xm=`${ki}.${fn}`,Jr=".dropdown-menu",wm=C()?"top-end":"top-start",Cm=C()?"top-start":"top-end",Sm=C()?"bottom-end":"bottom-start",Tm=C()?"bottom-start":"bottom-end",Om=C()?"left-start":"right-start",Em=C()?"right-start":"left-start",Am={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Dm={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class fs extends At{constructor(c,d){super(c,d),this._popper=null,this._parent=this._element.parentNode,this._menu=j.next(this._element,Jr)[0]||j.prev(this._element,Jr)[0]||j.findOne(Jr,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Am}static get DefaultType(){return Dm}static get NAME(){return Bh}toggle(){return this._isShown()?this.hide():this.show()}show(){if(u(this._element)||this._isShown())return;const c={relatedTarget:this._element};if(!R.trigger(this._element,vm,c).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const d of[].concat(...document.body.children))R.on(d,"mouseover",g);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(fn),this._element.classList.add(fn),R.trigger(this._element,ym,c)}}hide(){if(u(this._element)||!this._isShown())return;const c={relatedTarget:this._element};this._completeHide(c)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(c){if(!R.trigger(this._element,mm,c).defaultPrevented){if("ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))R.off(d,"mouseover",g);this._popper&&this._popper.destroy(),this._menu.classList.remove(fn),this._element.classList.remove(fn),this._element.setAttribute("aria-expanded","false"),$t.removeDataAttribute(this._menu,"popper"),R.trigger(this._element,_m,c)}}_getConfig(c){if(typeof(c=super._getConfig(c)).reference=="object"&&!a(c.reference)&&typeof c.reference.getBoundingClientRect!="function")throw new TypeError(`${Bh.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return c}_createPopper(){if(Ih===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let c=this._element;this._config.reference==="parent"?c=this._parent:a(this._config.reference)?c=l(this._config.reference):typeof this._config.reference=="object"&&(c=this._config.reference);const d=this._getPopperConfig();this._popper=Qa(c,this._menu,d)}_isShown(){return this._menu.classList.contains(fn)}_getPlacement(){const c=this._parent;if(c.classList.contains("dropend"))return Om;if(c.classList.contains("dropstart"))return Em;if(c.classList.contains("dropup-center"))return"top";if(c.classList.contains("dropdown-center"))return"bottom";const d=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return c.classList.contains("dropup")?d?Cm:wm:d?Tm:Sm}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:c}=this._config;return typeof c=="string"?c.split(",").map(d=>Number.parseInt(d,10)):typeof c=="function"?d=>c(d,this._element):c}_getPopperConfig(){const c={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&($t.setDataAttribute(this._menu,"popper","static"),c.modifiers=[{name:"applyStyles",enabled:!1}]),{...c,...D(this._config.popperConfig,[void 0,c])}}_selectMenuItem({key:c,target:d}){const _=j.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(T=>h(T));_.length&&P(_,d,c===Nh,!_.includes(d)).focus()}static jQueryInterface(c){return this.each(function(){const d=fs.getOrCreateInstance(this,c);if(typeof c=="string"){if(d[c]===void 0)throw new TypeError(`No method named "${c}"`);d[c]()}})}static clearMenus(c){if(c.button===2||c.type==="keyup"&&c.key!=="Tab")return;const d=j.find(xm);for(const _ of d){const T=fs.getInstance(_);if(!T||T._config.autoClose===!1)continue;const E=c.composedPath(),M=E.includes(T._menu);if(E.includes(T._element)||T._config.autoClose==="inside"&&!M||T._config.autoClose==="outside"&&M||T._menu.contains(c.target)&&(c.type==="keyup"&&c.key==="Tab"||/input|select|option|textarea|form/i.test(c.target.tagName)))continue;const W={relatedTarget:T._element};c.type==="click"&&(W.clickEvent=c),T._completeHide(W)}}static dataApiKeydownHandler(c){const d=/input|textarea/i.test(c.target.tagName),_=c.key==="Escape",T=[pm,Nh].includes(c.key);if(!T&&!_||d&&!_)return;c.preventDefault();const E=this.matches(ki)?this:j.prev(this,ki)[0]||j.next(this,ki)[0]||j.findOne(ki,c.delegateTarget.parentNode),M=fs.getOrCreateInstance(E);if(T)return c.stopPropagation(),M.show(),void M._selectMenuItem(c);M._isShown()&&(c.stopPropagation(),M.hide(),E.focus())}}R.on(document,Hh,ki,fs.dataApiKeydownHandler),R.on(document,Hh,Jr,fs.dataApiKeydownHandler),R.on(document,Wh,fs.clearMenus),R.on(document,bm,fs.clearMenus),R.on(document,Wh,ki,function(p){p.preventDefault(),fs.getOrCreateInstance(this).toggle()}),O(fs);const Vh="backdrop",Xh="show",Yh=`mousedown.bs.${Vh}`,km={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Mm={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class zh extends Se{constructor(c){super(),this._config=this._getConfig(c),this._isAppended=!1,this._element=null}static get Default(){return km}static get DefaultType(){return Mm}static get NAME(){return Vh}show(c){if(!this._config.isVisible)return void D(c);this._append();const d=this._getElement();this._config.isAnimated&&m(d),d.classList.add(Xh),this._emulateAnimation(()=>{D(c)})}hide(c){this._config.isVisible?(this._getElement().classList.remove(Xh),this._emulateAnimation(()=>{this.dispose(),D(c)})):D(c)}dispose(){this._isAppended&&(R.off(this._element,Yh),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const c=document.createElement("div");c.className=this._config.className,this._config.isAnimated&&c.classList.add("fade"),this._element=c}return this._element}_configAfterMerge(c){return c.rootElement=l(c.rootElement),c}_append(){if(this._isAppended)return;const c=this._getElement();this._config.rootElement.append(c),R.on(c,Yh,()=>{D(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(c){L(c,this._getElement(),this._config.isAnimated)}}const Qr=".bs.focustrap",Pm=`focusin${Qr}`,jm=`keydown.tab${Qr}`,Uh="backward",Fm={autofocus:!0,trapElement:null},Lm={autofocus:"boolean",trapElement:"element"};class Gh extends Se{constructor(c){super(),this._config=this._getConfig(c),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Fm}static get DefaultType(){return Lm}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),R.off(document,Qr),R.on(document,Pm,c=>this._handleFocusin(c)),R.on(document,jm,c=>this._handleKeydown(c)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,R.off(document,Qr))}_handleFocusin(c){const{trapElement:d}=this._config;if(c.target===document||c.target===d||d.contains(c.target))return;const _=j.focusableChildren(d);_.length===0?d.focus():this._lastTabNavDirection===Uh?_[_.length-1].focus():_[0].focus()}_handleKeydown(c){c.key==="Tab"&&(this._lastTabNavDirection=c.shiftKey?Uh:"forward")}}const $h=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",qh=".sticky-top",Zr="padding-right",Kh="margin-right";class tl{constructor(){this._element=document.body}getWidth(){const c=document.documentElement.clientWidth;return Math.abs(window.innerWidth-c)}hide(){const c=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Zr,d=>d+c),this._setElementAttributes($h,Zr,d=>d+c),this._setElementAttributes(qh,Kh,d=>d-c)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Zr),this._resetElementAttributes($h,Zr),this._resetElementAttributes(qh,Kh)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(c,d,_){const T=this.getWidth();this._applyManipulationCallback(c,E=>{if(E!==this._element&&window.innerWidth>E.clientWidth+T)return;this._saveInitialAttribute(E,d);const M=window.getComputedStyle(E).getPropertyValue(d);E.style.setProperty(d,`${_(Number.parseFloat(M))}px`)})}_saveInitialAttribute(c,d){const _=c.style.getPropertyValue(d);_&&$t.setDataAttribute(c,d,_)}_resetElementAttributes(c,d){this._applyManipulationCallback(c,_=>{const T=$t.getDataAttribute(_,d);T!==null?($t.removeDataAttribute(_,d),_.style.setProperty(d,T)):_.style.removeProperty(d)})}_applyManipulationCallback(c,d){if(a(c))d(c);else for(const _ of j.find(c,this._element))d(_)}}const es=".bs.modal",Rm=`hide${es}`,Im=`hidePrevented${es}`,Jh=`hidden${es}`,Qh=`show${es}`,Bm=`shown${es}`,Nm=`resize${es}`,Wm=`click.dismiss${es}`,Hm=`mousedown.dismiss${es}`,Vm=`keydown.dismiss${es}`,Xm=`click${es}.data-api`,Zh="modal-open",tu="show",el="modal-static",Ym={backdrop:!0,focus:!0,keyboard:!0},zm={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Mi extends At{constructor(c,d){super(c,d),this._dialog=j.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new tl,this._addEventListeners()}static get Default(){return Ym}static get DefaultType(){return zm}static get NAME(){return"modal"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||this._isTransitioning||R.trigger(this._element,Qh,{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Zh),this._adjustDialog(),this._backdrop.show(()=>this._showElement(c)))}hide(){this._isShown&&!this._isTransitioning&&(R.trigger(this._element,Rm).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(tu),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){R.off(window,es),R.off(this._dialog,es),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new zh({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Gh({trapElement:this._element})}_showElement(c){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const d=j.findOne(".modal-body",this._dialog);d&&(d.scrollTop=0),m(this._element),this._element.classList.add(tu),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,R.trigger(this._element,Bm,{relatedTarget:c})},this._dialog,this._isAnimated())}_addEventListeners(){R.on(this._element,Vm,c=>{c.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),R.on(window,Nm,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),R.on(this._element,Hm,c=>{R.one(this._element,Wm,d=>{this._element===c.target&&this._element===d.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Zh),this._resetAdjustments(),this._scrollBar.reset(),R.trigger(this._element,Jh)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(R.trigger(this._element,Im).defaultPrevented)return;const c=this._element.scrollHeight>document.documentElement.clientHeight,d=this._element.style.overflowY;d==="hidden"||this._element.classList.contains(el)||(c||(this._element.style.overflowY="hidden"),this._element.classList.add(el),this._queueCallback(()=>{this._element.classList.remove(el),this._queueCallback(()=>{this._element.style.overflowY=d},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const c=this._element.scrollHeight>document.documentElement.clientHeight,d=this._scrollBar.getWidth(),_=d>0;if(_&&!c){const T=C()?"paddingLeft":"paddingRight";this._element.style[T]=`${d}px`}if(!_&&c){const T=C()?"paddingRight":"paddingLeft";this._element.style[T]=`${d}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(c,d){return this.each(function(){const _=Mi.getOrCreateInstance(this,c);if(typeof c=="string"){if(_[c]===void 0)throw new TypeError(`No method named "${c}"`);_[c](d)}})}}R.on(document,Xm,'[data-bs-toggle="modal"]',function(p){const c=j.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&p.preventDefault(),R.one(c,Qh,_=>{_.defaultPrevented||R.one(c,Jh,()=>{h(this)&&this.focus()})});const d=j.findOne(".modal.show");d&&Mi.getInstance(d).hide(),Mi.getOrCreateInstance(c).toggle(this)}),U(Mi),O(Mi);const Ws=".bs.offcanvas",eu=".data-api",Um=`load${Ws}${eu}`,su="show",iu="showing",nu="hiding",ru=".offcanvas.show",Gm=`show${Ws}`,$m=`shown${Ws}`,qm=`hide${Ws}`,ou=`hidePrevented${Ws}`,au=`hidden${Ws}`,Km=`resize${Ws}`,Jm=`click${Ws}${eu}`,Qm=`keydown.dismiss${Ws}`,Zm={backdrop:!0,keyboard:!0,scroll:!1},t_={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Hs extends At{constructor(c,d){super(c,d),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Zm}static get DefaultType(){return t_}static get NAME(){return"offcanvas"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||R.trigger(this._element,Gm,{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new tl().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(iu),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(su),this._element.classList.remove(iu),R.trigger(this._element,$m,{relatedTarget:c})},this._element,!0))}hide(){this._isShown&&(R.trigger(this._element,qm).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(nu),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(su,nu),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new tl().reset(),R.trigger(this._element,au)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const c=!!this._config.backdrop;return new zh({className:"offcanvas-backdrop",isVisible:c,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:c?()=>{this._config.backdrop!=="static"?this.hide():R.trigger(this._element,ou)}:null})}_initializeFocusTrap(){return new Gh({trapElement:this._element})}_addEventListeners(){R.on(this._element,Qm,c=>{c.key==="Escape"&&(this._config.keyboard?this.hide():R.trigger(this._element,ou))})}static jQueryInterface(c){return this.each(function(){const d=Hs.getOrCreateInstance(this,c);if(typeof c=="string"){if(d[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);d[c](this)}})}}R.on(document,Jm,'[data-bs-toggle="offcanvas"]',function(p){const c=j.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&p.preventDefault(),u(this))return;R.one(c,au,()=>{h(this)&&this.focus()});const d=j.findOne(ru);d&&d!==c&&Hs.getInstance(d).hide(),Hs.getOrCreateInstance(c).toggle(this)}),R.on(window,Um,()=>{for(const p of j.find(ru))Hs.getOrCreateInstance(p).show()}),R.on(window,Km,()=>{for(const p of j.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(p).position!=="fixed"&&Hs.getOrCreateInstance(p).hide()}),U(Hs),O(Hs);const lu={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},e_=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),s_=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,i_=(p,c)=>{const d=p.nodeName.toLowerCase();return c.includes(d)?!e_.has(d)||!!s_.test(p.nodeValue):c.filter(_=>_ instanceof RegExp).some(_=>_.test(d))},n_={allowList:lu,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},r_={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},o_={entry:"(string|element|function|null)",selector:"(string|element)"};class a_ extends Se{constructor(c){super(),this._config=this._getConfig(c)}static get Default(){return n_}static get DefaultType(){return r_}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(c=>this._resolvePossibleFunction(c)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(c){return this._checkContent(c),this._config.content={...this._config.content,...c},this}toHtml(){const c=document.createElement("div");c.innerHTML=this._maybeSanitize(this._config.template);for(const[T,E]of Object.entries(this._config.content))this._setContent(c,E,T);const d=c.children[0],_=this._resolvePossibleFunction(this._config.extraClass);return _&&d.classList.add(..._.split(" ")),d}_typeCheckConfig(c){super._typeCheckConfig(c),this._checkContent(c.content)}_checkContent(c){for(const[d,_]of Object.entries(c))super._typeCheckConfig({selector:d,entry:_},o_)}_setContent(c,d,_){const T=j.findOne(_,c);T&&((d=this._resolvePossibleFunction(d))?a(d)?this._putElementInTemplate(l(d),T):this._config.html?T.innerHTML=this._maybeSanitize(d):T.textContent=d:T.remove())}_maybeSanitize(c){return this._config.sanitize?function(d,_,T){if(!d.length)return d;if(T&&typeof T=="function")return T(d);const E=new window.DOMParser().parseFromString(d,"text/html"),M=[].concat(...E.body.querySelectorAll("*"));for(const W of M){const z=W.nodeName.toLowerCase();if(!Object.keys(_).includes(z)){W.remove();continue}const et=[].concat(...W.attributes),st=[].concat(_["*"]||[],_[z]||[]);for(const q of et)i_(q,st)||W.removeAttribute(q.nodeName)}return E.body.innerHTML}(c,this._config.allowList,this._config.sanitizeFn):c}_resolvePossibleFunction(c){return D(c,[void 0,this])}_putElementInTemplate(c,d){if(this._config.html)return d.innerHTML="",void d.append(c);d.textContent=c.textContent}}const l_=new Set(["sanitize","allowList","sanitizeFn"]),sl="fade",to="show",c_=".tooltip-inner",cu=".modal",hu="hide.bs.modal",Kn="hover",il="focus",h_={AUTO:"auto",TOP:"top",RIGHT:C()?"left":"right",BOTTOM:"bottom",LEFT:C()?"right":"left"},u_={allowList:lu,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},f_={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Pi extends At{constructor(c,d){if(Ih===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(c,d),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return u_}static get DefaultType(){return f_}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),R.off(this._element.closest(cu),hu,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const c=R.trigger(this._element,this.constructor.eventName("show")),d=(f(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(c.defaultPrevented||!d)return;this._disposePopper();const _=this._getTipElement();this._element.setAttribute("aria-describedby",_.getAttribute("id"));const{container:T}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(T.append(_),R.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(_),_.classList.add(to),"ontouchstart"in document.documentElement)for(const E of[].concat(...document.body.children))R.on(E,"mouseover",g);this._queueCallback(()=>{R.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!R.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(to),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))R.off(c,"mouseover",g);this._activeTrigger.click=!1,this._activeTrigger[il]=!1,this._activeTrigger[Kn]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),R.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(c){const d=this._getTemplateFactory(c).toHtml();if(!d)return null;d.classList.remove(sl,to),d.classList.add(`bs-${this.constructor.NAME}-auto`);const _=(T=>{do T+=Math.floor(1e6*Math.random());while(document.getElementById(T));return T})(this.constructor.NAME).toString();return d.setAttribute("id",_),this._isAnimated()&&d.classList.add(sl),d}setContent(c){this._newContent=c,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(c){return this._templateFactory?this._templateFactory.changeContent(c):this._templateFactory=new a_({...this._config,content:c,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[c_]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(c){return this.constructor.getOrCreateInstance(c.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(sl)}_isShown(){return this.tip&&this.tip.classList.contains(to)}_createPopper(c){const d=D(this._config.placement,[this,c,this._element]),_=h_[d.toUpperCase()];return Qa(this._element,c,this._getPopperConfig(_))}_getOffset(){const{offset:c}=this._config;return typeof c=="string"?c.split(",").map(d=>Number.parseInt(d,10)):typeof c=="function"?d=>c(d,this._element):c}_resolvePossibleFunction(c){return D(c,[this._element,this._element])}_getPopperConfig(c){const d={placement:c,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:_=>{this._getTipElement().setAttribute("data-popper-placement",_.state.placement)}}]};return{...d,...D(this._config.popperConfig,[void 0,d])}}_setListeners(){const c=this._config.trigger.split(" ");for(const d of c)if(d==="click")R.on(this._element,this.constructor.eventName("click"),this._config.selector,_=>{this._initializeOnDelegatedTarget(_).toggle()});else if(d!=="manual"){const _=d===Kn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),T=d===Kn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");R.on(this._element,_,this._config.selector,E=>{const M=this._initializeOnDelegatedTarget(E);M._activeTrigger[E.type==="focusin"?il:Kn]=!0,M._enter()}),R.on(this._element,T,this._config.selector,E=>{const M=this._initializeOnDelegatedTarget(E);M._activeTrigger[E.type==="focusout"?il:Kn]=M._element.contains(E.relatedTarget),M._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},R.on(this._element.closest(cu),hu,this._hideModalHandler)}_fixTitle(){const c=this._element.getAttribute("title");c&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",c),this._element.setAttribute("data-bs-original-title",c),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(c,d){clearTimeout(this._timeout),this._timeout=setTimeout(c,d)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(c){const d=$t.getDataAttributes(this._element);for(const _ of Object.keys(d))l_.has(_)&&delete d[_];return c={...d,...typeof c=="object"&&c?c:{}},c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c.container=c.container===!1?document.body:l(c.container),typeof c.delay=="number"&&(c.delay={show:c.delay,hide:c.delay}),typeof c.title=="number"&&(c.title=c.title.toString()),typeof c.content=="number"&&(c.content=c.content.toString()),c}_getDelegateConfig(){const c={};for(const[d,_]of Object.entries(this._config))this.constructor.Default[d]!==_&&(c[d]=_);return c.selector=!1,c.trigger="manual",c}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(c){return this.each(function(){const d=Pi.getOrCreateInstance(this,c);if(typeof c=="string"){if(d[c]===void 0)throw new TypeError(`No method named "${c}"`);d[c]()}})}}O(Pi);const d_=".popover-header",g_=".popover-body",p_={...Pi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},m_={...Pi.DefaultType,content:"(null|string|element|function)"};class eo extends Pi{static get Default(){return p_}static get DefaultType(){return m_}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[d_]:this._getTitle(),[g_]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(c){return this.each(function(){const d=eo.getOrCreateInstance(this,c);if(typeof c=="string"){if(d[c]===void 0)throw new TypeError(`No method named "${c}"`);d[c]()}})}}O(eo);const nl=".bs.scrollspy",__=`activate${nl}`,uu=`click${nl}`,v_=`load${nl}.data-api`,dn="active",rl="[href]",fu=".nav-link",y_=`${fu}, .nav-item > ${fu}, .list-group-item`,b_={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},x_={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Jn extends At{constructor(c,d){super(c,d),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return b_}static get DefaultType(){return x_}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const c of this._observableSections.values())this._observer.observe(c)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(c){return c.target=l(c.target)||document.body,c.rootMargin=c.offset?`${c.offset}px 0px -30%`:c.rootMargin,typeof c.threshold=="string"&&(c.threshold=c.threshold.split(",").map(d=>Number.parseFloat(d))),c}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(R.off(this._config.target,uu),R.on(this._config.target,uu,rl,c=>{const d=this._observableSections.get(c.target.hash);if(d){c.preventDefault();const _=this._rootElement||window,T=d.offsetTop-this._element.offsetTop;if(_.scrollTo)return void _.scrollTo({top:T,behavior:"smooth"});_.scrollTop=T}}))}_getNewObserver(){const c={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(d=>this._observerCallback(d),c)}_observerCallback(c){const d=M=>this._targetLinks.get(`#${M.target.id}`),_=M=>{this._previousScrollData.visibleEntryTop=M.target.offsetTop,this._process(d(M))},T=(this._rootElement||document.documentElement).scrollTop,E=T>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=T;for(const M of c){if(!M.isIntersecting){this._activeTarget=null,this._clearActiveClass(d(M));continue}const W=M.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(E&&W){if(_(M),!T)return}else E||W||_(M)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const c=j.find(rl,this._config.target);for(const d of c){if(!d.hash||u(d))continue;const _=j.findOne(decodeURI(d.hash),this._element);h(_)&&(this._targetLinks.set(decodeURI(d.hash),d),this._observableSections.set(d.hash,_))}}_process(c){this._activeTarget!==c&&(this._clearActiveClass(this._config.target),this._activeTarget=c,c.classList.add(dn),this._activateParents(c),R.trigger(this._element,__,{relatedTarget:c}))}_activateParents(c){if(c.classList.contains("dropdown-item"))j.findOne(".dropdown-toggle",c.closest(".dropdown")).classList.add(dn);else for(const d of j.parents(c,".nav, .list-group"))for(const _ of j.prev(d,y_))_.classList.add(dn)}_clearActiveClass(c){c.classList.remove(dn);const d=j.find(`${rl}.${dn}`,c);for(const _ of d)_.classList.remove(dn)}static jQueryInterface(c){return this.each(function(){const d=Jn.getOrCreateInstance(this,c);if(typeof c=="string"){if(d[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);d[c]()}})}}R.on(window,v_,()=>{for(const p of j.find('[data-bs-spy="scroll"]'))Jn.getOrCreateInstance(p)}),O(Jn);const ji=".bs.tab",w_=`hide${ji}`,C_=`hidden${ji}`,S_=`show${ji}`,T_=`shown${ji}`,O_=`click${ji}`,E_=`keydown${ji}`,A_=`load${ji}`,D_="ArrowLeft",du="ArrowRight",k_="ArrowUp",gu="ArrowDown",ol="Home",pu="End",Fi="active",mu="fade",al="show",_u=".dropdown-toggle",ll=`:not(${_u})`,vu='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',cl=`.nav-link${ll}, .list-group-item${ll}, [role="tab"]${ll}, ${vu}`,M_=`.${Fi}[data-bs-toggle="tab"], .${Fi}[data-bs-toggle="pill"], .${Fi}[data-bs-toggle="list"]`;class Li extends At{constructor(c){super(c),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),R.on(this._element,E_,d=>this._keydown(d)))}static get NAME(){return"tab"}show(){const c=this._element;if(this._elemIsActive(c))return;const d=this._getActiveElem(),_=d?R.trigger(d,w_,{relatedTarget:c}):null;R.trigger(c,S_,{relatedTarget:d}).defaultPrevented||_&&_.defaultPrevented||(this._deactivate(d,c),this._activate(c,d))}_activate(c,d){c&&(c.classList.add(Fi),this._activate(j.getElementFromSelector(c)),this._queueCallback(()=>{c.getAttribute("role")==="tab"?(c.removeAttribute("tabindex"),c.setAttribute("aria-selected",!0),this._toggleDropDown(c,!0),R.trigger(c,T_,{relatedTarget:d})):c.classList.add(al)},c,c.classList.contains(mu)))}_deactivate(c,d){c&&(c.classList.remove(Fi),c.blur(),this._deactivate(j.getElementFromSelector(c)),this._queueCallback(()=>{c.getAttribute("role")==="tab"?(c.setAttribute("aria-selected",!1),c.setAttribute("tabindex","-1"),this._toggleDropDown(c,!1),R.trigger(c,C_,{relatedTarget:d})):c.classList.remove(al)},c,c.classList.contains(mu)))}_keydown(c){if(![D_,du,k_,gu,ol,pu].includes(c.key))return;c.stopPropagation(),c.preventDefault();const d=this._getChildren().filter(T=>!u(T));let _;if([ol,pu].includes(c.key))_=d[c.key===ol?0:d.length-1];else{const T=[du,gu].includes(c.key);_=P(d,c.target,T,!0)}_&&(_.focus({preventScroll:!0}),Li.getOrCreateInstance(_).show())}_getChildren(){return j.find(cl,this._parent)}_getActiveElem(){return this._getChildren().find(c=>this._elemIsActive(c))||null}_setInitialAttributes(c,d){this._setAttributeIfNotExists(c,"role","tablist");for(const _ of d)this._setInitialAttributesOnChild(_)}_setInitialAttributesOnChild(c){c=this._getInnerElement(c);const d=this._elemIsActive(c),_=this._getOuterElement(c);c.setAttribute("aria-selected",d),_!==c&&this._setAttributeIfNotExists(_,"role","presentation"),d||c.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(c,"role","tab"),this._setInitialAttributesOnTargetPanel(c)}_setInitialAttributesOnTargetPanel(c){const d=j.getElementFromSelector(c);d&&(this._setAttributeIfNotExists(d,"role","tabpanel"),c.id&&this._setAttributeIfNotExists(d,"aria-labelledby",`${c.id}`))}_toggleDropDown(c,d){const _=this._getOuterElement(c);if(!_.classList.contains("dropdown"))return;const T=(E,M)=>{const W=j.findOne(E,_);W&&W.classList.toggle(M,d)};T(_u,Fi),T(".dropdown-menu",al),_.setAttribute("aria-expanded",d)}_setAttributeIfNotExists(c,d,_){c.hasAttribute(d)||c.setAttribute(d,_)}_elemIsActive(c){return c.classList.contains(Fi)}_getInnerElement(c){return c.matches(cl)?c:j.findOne(cl,c)}_getOuterElement(c){return c.closest(".nav-item, .list-group-item")||c}static jQueryInterface(c){return this.each(function(){const d=Li.getOrCreateInstance(this);if(typeof c=="string"){if(d[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);d[c]()}})}}R.on(document,O_,vu,function(p){["A","AREA"].includes(this.tagName)&&p.preventDefault(),u(this)||Li.getOrCreateInstance(this).show()}),R.on(window,A_,()=>{for(const p of j.find(M_))Li.getOrCreateInstance(p)}),O(Li);const oi=".bs.toast",P_=`mouseover${oi}`,j_=`mouseout${oi}`,F_=`focusin${oi}`,L_=`focusout${oi}`,R_=`hide${oi}`,I_=`hidden${oi}`,B_=`show${oi}`,N_=`shown${oi}`,yu="hide",so="show",io="showing",W_={animation:"boolean",autohide:"boolean",delay:"number"},H_={animation:!0,autohide:!0,delay:5e3};class Qn extends At{constructor(c,d){super(c,d),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return H_}static get DefaultType(){return W_}static get NAME(){return"toast"}show(){R.trigger(this._element,B_).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(yu),m(this._element),this._element.classList.add(so,io),this._queueCallback(()=>{this._element.classList.remove(io),R.trigger(this._element,N_),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(R.trigger(this._element,R_).defaultPrevented||(this._element.classList.add(io),this._queueCallback(()=>{this._element.classList.add(yu),this._element.classList.remove(io,so),R.trigger(this._element,I_)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(so),super.dispose()}isShown(){return this._element.classList.contains(so)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(c,d){switch(c.type){case"mouseover":case"mouseout":this._hasMouseInteraction=d;break;case"focusin":case"focusout":this._hasKeyboardInteraction=d}if(d)return void this._clearTimeout();const _=c.relatedTarget;this._element===_||this._element.contains(_)||this._maybeScheduleHide()}_setListeners(){R.on(this._element,P_,c=>this._onInteraction(c,!0)),R.on(this._element,j_,c=>this._onInteraction(c,!1)),R.on(this._element,F_,c=>this._onInteraction(c,!0)),R.on(this._element,L_,c=>this._onInteraction(c,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(c){return this.each(function(){const d=Qn.getOrCreateInstance(this,c);if(typeof c=="string"){if(d[c]===void 0)throw new TypeError(`No method named "${c}"`);d[c](this)}})}}return U(Qn),O(Qn),{Alert:x,Button:I,Carousel:en,Collapse:nn,Dropdown:fs,Modal:Mi,Offcanvas:Hs,Popover:eo,ScrollSpy:Jn,Tab:Li,Toast:Qn,Tooltip:Pi}})}(zo)),zo.exports}pS();_0(w0).use(gC()).use(dS).mount("#app");
